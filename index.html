<!doctype html><title>lmfao wwak!</title><body><script>"use strict"
const boomboxModule = {}
{
	boomboxModule.link = env => {
		const freqFromNote = note => {
			const noteMap = {
				"C": 261.63,
				"C#": 277.18,
				"D": 293.66,
				"D#": 311.13,
				"E": 329.63,
				"F": 349.23,
				"F#": 369.99,
				"G": 392.00,
				"G#": 415.30,
				"A": 440.00,
				"A#": 466.16,
				"B": 493.88
			}
			const octave = int(note[note.length - 1])
			const noteString = note.slice(0, -1)
			return noteMap[noteString]*pow(2, octave - 4)
		}
		const playAtPitch = (url, pitch) => {
			const src = new Audio(url)
			src.playbackRate = pitch
			src.preservesPitch = false
			src.volume = 0.2 // Volume is proportional to 1.
			//src.loop = true
			src.play()
		}
		const meat = "data:image/jpg;base64,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"
		const idk = "data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+MYZAADUD04AKEMAALwBmwBQAAA/5G/UjT0IRQAQwn/L4nPg/UcEgY/l3/hgoGP/l38Hy7/5R3Of4fV9RRmUEb5UYXdTikm/+MYZAwDyJGGAMKIAAXhLwQBghAAOKgocyCfncnKKO2g/+r5Ow9qft0+s5xrGHc+Yimh1G/elFan/3Gw/jYR0DLS7suUsq2L/+MYZAkD7ImAAOOUAASJEwABwhAAnHE2VKDHhASQ0T/28TI+owW/1CHW/V+//w7YjPUF5+n6fBv52/4c7qVi8MEJqC9geq0f/+MYZAoDvImCZAiiNgTI5vgACA4gEbYP4SbGv+3hP0DL/w/nux31fyfeXKV59Tsa+RPyj/QzxQ/iH5zoxML3i2ujPRXKPQS2/+MYZAwELJmAAKOIAAMAzwABQgAAQ+okc8Iy2r/VuYNC76W/1BJ+Cf/9H7f/bn1yeL6P+3gtakCZpgPn+7ONDh5H84VqGDSh/+MYZBEEbImCAMOUAAYorvwBhRAAca+tWCvmX8Y2I4/oLSX//8v9Ss3/YpxRjI/uH1BBVnDvvsgxc7rl75X/6IGZKCwkQ2K7/+MYZAgB8AcSAOGAAISgAhgBwgAA5eivyeCsHb/4ieCoCDgNAUFSyoKjDwNLDRZMQU1FMy4xMDCqqqqqqqqqqqqqqqqqqqqq"
		const easyDoesIt = "data:audio/mpeg;base64,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"
		const channels = 1
		const dur = 0.4
		const ctx = new AudioContext()
		//const sampleRate = ctx.sampleRate
		const sampleRate = 8000
		const totalSamples = dur*sampleRate
		boomboxModule.make = _ => {
			const boombox = {}
			boombox.step = dt => {
			}
			boombox.playNote = note => {
				const freq = freqFromNote(note)
				const buff = ctx.makeBuffer(channels, totalSamples, sampleRate)
				const channelData = buff.getChannelData(0)
				if (rand() > 0.7) {
					let i = 0
					while (i < totalSamples) {
						const t = i/sampleRate
						channelData[i] = 0.1*sin(2*pi*freq*(t + 0.0005*sin(80*t)))*exp(-10*t)
						++i
					}
				}
				else {
					let i = 0
					while (i < totalSamples) {
						const t = i/sampleRate
						channelData[i] = 0.1*(2*pi*freq*t%1)*exp(-10*t)
						++i
					}
					/*
					let i = 0
					while (i < totalSamples) {
						const t = i/sampleRate
						channelData[i] = 0.1*(2*pi*freq*(t + 0.0005*sin(80*t))%1)*exp(-10*t)
						++i
					}
					*/
				}
				const src = ctx.makeBufferSource()
				src.buff = buff
				src.connect(ctx.destination)
				src.start()
				//playAtPitch(idk, 1/440*freq)
				//playAtPitch(easyDoesIt, 1/440*freq)
			}
			// thread.interval(_ => {
			let i = 0
			// 	while (i < floor(5*rand())) {
			// 		boombox.playNote(["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"][floor(12*rand())] + (2 + floor(4*rand())))
			// 	}
			// }, 500)
			// thread.interval(_ => {
			// 	playAtPitch(drum, 1/440*freqFromNote(note + offset))
			// }, 200)
			return boombox
		}
		{
			const randChordProgression = chordsCount => {
				const rootNotes = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"]
				const chordTypes = ["major", "minor", "diminished", "augmented", "sus2", "sus4"]
				const progression = []
				let i = 0
				while (i < chordsCount) {
					const randRoot = rootNotes[floor(rand()*rootNotes.length)]
					const randChordType = chordTypes[floor(rand()*chordTypes.length)]
					const chord = randRoot + " " + randChordType
					const notes = gchord(randRoot, randChordType)
					progression.push(...notes)
					++i
				}
				return progression
			}
			// const gchord = (root, chordType) => {
			// 	const notes = []
			// 	switch(chordType) {
			// 		case "major":
			// 			notes.push(root + "4", root + "3", root + "2")
			// 			break
			// 		case "minor":
			// 			notes.push(root + "4", root + "3", root + "1")
			// 			break
			// 		case "diminished":
			// 			notes.push(root + "4", root + "b3", root + "b2")
			// 			break
			// 		case "augmented":
			// 			notes.push(root + "4", root + "3", root + "#2")
			// 			break
			// 		case "sus2":
			// 			notes.push(root + "4", root + "2", root + "1")
			// 			break
			// 		case "sus4":
			// 			notes.push(root + "4", root + "b3", root + "2")
			// 			break
			// 		default:
			// 			break
			// 	}
			// 	return notes
			// }
			// example usage
			// const progression = randChordProgression(4) // generate a progression of 4 chords
		}
		// let chord
		// {
		// 	const semitoneMap = {
		// 		"C": 0, "C#": 1, "Db": 1,
		// 		"D": 2, "D#": 3, "Eb": 3,
		// 		"E": 4, "Fb": 4, "E#": 5,
		// 		"F": 5, "F#": 6, "Gb": 6,
		// 		"G": 7, "G#": 8, "Ab": 8,
		// 		"A": 9, "A#":10, "Bb":10,
		// 		"B":11, "Cb":11, "B#": 0
		// 	}
		// 	const noteNamesSharp = [
		// 		"C", "C#", "D", "D#", "E", "F",
		// 		"F#", "G", "G#", "A", "A#", "B"
		// 	]
		// 	const baseChords = {
		// 		"M": [0, 4, 7],
		// 		"": [0, 4, 7],
		// 		"m": [0, 3, 7],
		// 		"7": [0, 4, 7, 10],
		// 		"maj7": [0, 4, 7, 11],
		// 		"m7": [0, 3, 7, 10],
		// 		"dim": [0, 3, 6],
		// 		"dim7": [0, 3, 6, 9],
		// 	}
		// 	const extensions = {
		// 		"9": 2, // major 9th = 2 semitones above an octave
		// 		"b9": 1,
		// 		"#9": 3,
		// 		"11": 5,
		// 		"#11": 6,
		// 		"b5": 6,
		// 		"#5": 8,
		// 		"13": 9,
		// 		"b13": 8,
		// 	}
		// 	chord = chord => {
		// 		const rootMatch = chord.match(/^([A-G](#|b)?)/i)
		// 		if (rootMatch === undefined) {
		// 			return // unrecognized root
		// 		}
		// 		const root = rootMatch[0]
		// 		let remainder = chord.slice(root.length)
		// 		let baseChord = ""
		// 		const knownBaseChords = Object.keys(baseChords).sort((a, b) => b.length - a.length)
		// 		while (i < knownBaseChords.length) {
		// 			if (remainder.startsWith(type)) {
		// 				baseChord = type
		// 				remainder = remainder.slice(type.length)
		// 				break
		// 			}
		// 		}
		// 		const extensions = []
		// 		while (remainder.length > 0) {
		// 			let matchedExtension = null
		// 			while (i < Object.keys(extensions).sort((a, b) => b.length - a.length).length) {
		// 				if (remainder.startsWith(extKey)) {
		// 					matchedExtension = extKey
		// 					extensions.push(matchedExtension)
		// 					remainder = remainder.slice(extKey.length) // remove that chunk
		// 					break
		// 				}
		// 			}
		// 			if (matchedExtension === undefined) {
		// 				break
		// 			}
		// 		}
		// 		debug.log(chord, "->", root, baseChord, extensions)
		// 		return { root, baseChord, extensions }
		// 	}
		// }
		let gchord
		{
			// 1) Map note names to semitone offsets (0 = C, 1 = C#/Db, ..., 11 = B).
			const NOTE_OFFSETS = {
				"C": 0,
				"C#": 1, "Db": 1,
				"D": 2,
				"D#": 3, "Eb": 3,
				"E": 4,
				"F": 5,
				"F#": 6, "Gb": 6,
				"G": 7,
				"G#": 8, "Ab": 8,
				"A": 9,
				"A#": 10, "Bb": 10,
				"B": 11
			}
			// 2) Basic chord-type intervals (triads, etc.).
			// Each entry is an array of intervals ABOVE the root in semitones.
			const BASE_CHORDS = {
				// If there"s no “type” (like plain "C"), let"s assume a major triad
				"": [0, 4, 7],
				"m": [0, 3, 7],
				"dim": [0, 3, 6],
				"aug": [0, 4, 8],
				"5": [0, 7],
				// e.g. “sus2”, “sus4”, etc. can go here
			}
			// 3) Possible extensions to add on top of the base chord
			// (these are also intervals *above the root*).
			// You can expand these with #9, b9, #11, etc.
			const EXTENSIONS_MAP = {
				"7": [10], // minor 7th
				"maj7": [11], // major 7th
				"9": [14], // 2 octaves + a major 2nd
				"11": [17],
				"13": [21]
			}
			gchord = chord => {
				const rootMatch = chord.match(/^([A-G](#|b)?)/i)
				if (rootMatch === undefined) {
					return []
				}
				const rootString = rootMatch[0]
				let remainder = chord.slice(rootString.length)
				let baseChordType = ""
				const knownChordTypes = Object.keys(BASE_CHORDS).sort((a, b) => b.length - a.length)
				let i = 0
				while (i < knownChordTypes.length) {
					const type = knownChordTypes[i]
					if (remainder.startsWith(type)) {
						baseChordType = type
						remainder = remainder.slice(type.length)
						break
					}
					++i
				}
				const parsedExtensions = []
				const knownExtensions = Object.keys(EXTENSIONS_MAP).sort((a, b) => b.length - a.length)
				while (remainder.length > 0) {
					let matchedExtension = null
					while (i < knownExtensions.length) {
						if (remainder.startsWith(extKey)) {
							matchedExtension = extKey
							parsedExtensions.push(matchedExtension)
							remainder = remainder.slice(extKey.length)
							break
						}
					}
					if (matchedExtension === undefined) {
						break
					}
				}
				// Debugging
				// debug.log(
				// 	`Chord: "${chord}" -> root: "${rootString}", type: "${baseChordType}", exts: [${parsedExtensions}]`
				// )
				// --- 4) Convert root to offset (0-11). If not found, just exit -----------
				const rootOffset = NOTE_OFFSETS[rootString.toUpperCase()]
				if (typeof rootOffset === undefined) {
					return []
				}
				// --- 5) Collect all intervals from base chord + extensions ---------------
				// e.g. for "Cmaj7", base chord intervals = [0,4,7], extension = [11].
				let chordIntervals = BASE_CHORDS[baseChordType] || []
				let extensionIntervals = []
				parsedExtensions.forEach(ext => {
					if (EXTENSIONS_MAP[ext]) {
						extensionIntervals.push(...EXTENSIONS_MAP[ext])
					}
				})
				// Combine them into one array (avoiding duplicates)
				let allIntervals = [...chordIntervals]
				extensionIntervals.forEach(iv => {
					if (allIntervals.includes(iv) === undefined) {
						allIntervals.push(iv)
					}
				})
				// Sort them ascending so the chord tones are in ascending order
				allIntervals.sort((a, b) => a - b)
				// --- 6) Decide on a "base MIDI note" or "base offset" for the chord -------
				// For example, let"s pick 48 (C3) so that if the chord root is "C",
				// the root note becomes 48. But if we want "B" to be 47,
				// we can choose 47 for the "B" root, etc.
				//
				// *If you specifically want the root for "B" to be 47, you could do a
				// dynamic approach: baseMidi = 48 - NOTE_OFFSETS["C"] + (some offset).
				// But let"s keep it simple with a single base for all.
				const BASE_MIDI = 48 // If "C" is 48, "C#" is 49, etc.
				// Map intervals => actual note numbers
				const notes = allIntervals.map(interval => {
					// rootOffset + interval is how many semitones above "C"
					return BASE_MIDI + rootOffset + interval
				})
				// Return the array, e.g. [48, 52, 55] for a C major triad
				return notes
			}
			// ---------------------------------------------------------------------------
			// Some quick tests:
			// debug.log(gchord("C")) // => [48, 52, 55] (C3, E3, G3)
			// debug.log(gchord("C7")) // => [48, 52, 55, 58]
			// debug.log(gchord("Cm7")) // => [48, 51, 55, 58]
			// debug.log(gchord("F#m9")) // => e.g. [54, 57, 61, 66, 68]
			// debug.log(gchord("Bbmaj7")) // => [58, 62, 65, 69]
		}
		const softMiddle = "data:audio/mpeg;base64,SUQzBAAAAAADNVRJVDIAAAAgAAADQyA0NDAgVHVuaW5nIE5vdGUgKDEwIG1pbnV0ZXMpAFRYWFgAAAAyAAADUFVSTABodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PTVPWmFjMFkxTGFzAFRYWFgAAAA1AAADQ09NTUVOVABodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PTVPWmFjMFkxTGFzAFRYWFgAAAAgAAADQ09NUEFUSUJMRV9CUkFORFMAaXNvNmF2YzFtcDQxAFRYWFgAAAASAAADTUFKT1JfQlJBTkQAZGFzaABUWFhYAAAAEQAAA01JTk9SX1ZFUlNJT04AMABUUEUxAAAAEwAAA1RoZSBXaXNlIE11c2ljaWFuAFREUkMAAAAKAAADMjAyMTExMjYAVFhYWAAAACUAAANERVNDUklQVElPTgBDIDQ0MGh6IGRyb25lIHRvbmUgKEM0KQBUWFhYAAAAIgAAA1NZTk9QU0lTAEMgNDQwaHogZHJvbmUgdG9uZSAoQzQpAFRTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+MYZAADPAB4BKAAAAOQANhJQAAAh//wws///4neHyjg+XPlDk5+Jz4PwQcUcD4MQ////+o4UcJ33//7yir///TcJwj/0//8/+MYZAoEdNNeAMa0AAPoBgABgBAAwJRt///EYHhQaE4GP///jBnlzMvm//8u/If/+39SLf5Yl////7rGSQlq//qEuJwTeYNv/+MYZAkEzJ14AMOoAAPQBbgBgAAAXv2Jm6kPxl84t6goGZbyAIRHfwqCblPX5bVqy/1//Ulvut/Gf//9M1iFtX9F//YJwLo0/+MYZAYEgKtsAMUoAAMwBcRRgBAC/y4+KjD/FUsqmnf/oTTSgzAmAu//8hNZ1Hph3/4dAAggAA//////9v//qUxBTUUzLjEw/+MYZAgAAAGkAOAAAAAAA0gBwAAAMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV"
		const drum = "data:audio/mpeg;base64,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"
		// Do some arpeggio stuff here.
		{
			const mod = (x, y) => {
				return ((x % y) + y) % y
			}
			const arpeggiate = (i, n) => {
				const r = floor(2*n - 2)
				return abs(mod(floor(i + 0.5*r), r) - 0.5*r)
			}
			// const chords = ["Emaj7", "G#m7", "F#m7", "B7"] // Gone, gone
			// const chords = ["C", "Dm"]
			// const chords = ["Emaj7", "E7", "Amaj7", "C#m7", "F#m7", "B7"] // Thank you
			const chords = ["A#m", "B#m", "A#", "Fm", "Gaug7"] // Thank you
			let chordI = 0
			let chordsI = 0
			let chord = gchord(chords[chordsI])
			// thread.interval(_ => {
			// 	const arpeggioI = arpeggiate(chordI, chord.length)
			// 	const noteN = chord[arpeggioI]
			// 	const note = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"][mod(noteN, 12)]
			// 	// playAtPitch(softMiddle, 1/440*freqFromNote(note + (3 + mod(floor(noteN/12), 4))))
			// 	playAtPitch(softMiddle, 1/440*freqFromNote(note + (5 + mod(floor(noteN/12), 4))))
			// 	++chordI
			// 	if (chordI === chord.length + 1) {
			// 		chordI = 0
			// 		++chordsI
			// 		chordsI %= chords.length
			// 		chord = gchord(chords[chordsI])
			// 	}
			// }, 300)
			// Make the arpeggio reactive with key presses.
		}
		/*
		{
			let i = 0
			thread.interval(_ => {
				const note = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"][i%12]
				playAtPitch(drum, 1/440*freqFromNote(note + (3 + floor(i/12)%4)))
				++i
			}, 500)
		}
		*/
		/*
		{
			const sequence = [
				["C3", "E3", "G3", "B3"],
				["F3", "A3", "C4", "E4"],
				["G3", "B3", "D4", "F4"],
				["C3", "E3", "G3", "B3"],
			]
			let i = 0
			thread.interval(_ => {
				while (true) {
				for (const j in sequence[i]) {
					playAtPitch(softMiddle, 1/440*freqFromNote(sequence[i][j]))
				}
				playAtPitch(drum, 1)
				++i
				i %= 4
			}, 1000)
		}
		playAtPitch(easyDoesIt, 0.2)
		*/
	}
}
const cameraModule = {}
{
	cameraModule.link = env => {
		const vector = env.require("vector")
		const matrix = env.require("matrix")
		const thread = env.require("thread")
		const geometry = env.require("geometry")
		const trigger = env.require("trigger")
		const debug = env.require("debug")
		const forward = vector.make(0, 0, -1)

		const position = vector.ident.copy()
		const rotation = vector.ident.copy()
		let fieldOfView = 1.3429
		let velocity = vector.make(0, 0, 0, 0)
		const cameraRadius = 0.1

		const linearAccelerate = (p, v, v1, a, t) => {

		}

		cameraModule.frus = _ => matrix.pers(0.1, 10000, fieldOfView)
		cameraModule.p = _ => position
		cameraModule.r = _ => rotation
		cameraModule.fov = _ => fieldOfView
		cameraModule.forward = _ => rotation.copy().qmul(forward)

		cameraModule.impulse = deltaVelocity => {
			velocity.add(deltaVelocity)
		}

		cameraModule.step = dt => {
			let displacement = velocity.copy().scale(dt)
			const origin = position.copy()
			const length = displacement.length()
			if (length < 1e-9) return

			const movementDirection = displacement.copy().norm()
			const rayHit = geometry.raycast(origin, movementDirection)
			if (rayHit) {
				const distanceToHit = origin.distance(rayHit.p())
				if (distanceToHit < length) {
					const safeDistance = Math.max(distanceToHit - cameraRadius, 0)
					displacement.set(movementDirection.copy().scale(safeDistance))
				}
			}
			position.add(displacement)

			const projectionHit = geometry.project(position)
			if (projectionHit) {
				const projectionPoint = projectionHit.p()
				const distanceToSurface = position.distance(projectionPoint)
				if (distanceToSurface < cameraRadius) {
					const normal = position.copy().sub(projectionPoint).norm()
					const normalVelocity = velocity.dot(normal)
					if (normalVelocity < 0) {
						velocity.project(normal)
					}
				}
			}

			const triggerRayDirection = (velocity.length() > 1e-9) ? velocity.copy().norm() : cameraModule.forward()
			trigger.shoot(
				position,
				triggerRayDirection
			)
		}

		cameraModule.locate = newPosition => {
			position.set(newPosition)
			velocity.set(vector.make(0, 0, 0, 0))
		}

		cameraModule.playAnim = _ => {}

		cameraModule.makeTrigger = (position, rotation, size, func) => {
			return trigger.make(position, rotation, size, func)
		}
	}
}

const debugModule = {}
{
	debugModule.log = console.log
	debugModule.link = env => {
		debugModule.bench = name => {
			const debug = {}
			const t0 = performance.now()
			debug.end = _ => {
				const t1 = performance.now()
				debugModule.log(`${name}:`, t1 - t0, "ms")
			}
			return debug
		}
	}
}
const geometryModule = {}
{
	geometryModule.link = env => {
		const debug = env.require("debug")
		const vector = env.require("vector")
		const vertsIn = []
		const surfsIn = []
		const normsIn = []
		let verts = []
		let surfs = []
		let norms = []
		const defs = {}
		defs["#"] = _ => {}
		defs[""] = _ => {}
		defs.mtllib = _ => {}
		defs.usemtl = _ => {}
		defs.o = _ => {}
		defs.s = _ => {}
		defs.v = vert => {
			vertsIn.push([int(vert[0]), int(vert[1]), int(vert[2])])
		}
		defs.vt = surf => {
			surfsIn.push([int(surf[0]), int(surf[1])])
		}
		// If you have vertex normals from file, you can enable this
		/*
		defs.vn = norm => {
			normsIn.push([int(norm[0]), int(norm[1]), int(norm[2])])
		}
		*/
		// In this example, we compute a flat normal during the face processing.
		defs.vn = _ => {}
		defs.f = face => {
			let pairI = 0
			while (pairI < face.length) {
				const [i, j, k] = face[pairI].split("/")
				face[pairI] = [int(i) - 1, int(j) - 1, int(k) - 1]
				++pairI
			}
			const va = face[0][0]
			const ta = face[0][1]
			const na = face[0][2]
			const vb = face[1][0]
			const tb = face[1][1]
			const nb = face[1][2]
			const vc = face[2][0]
			const tc = face[2][1]
			const nc = face[2][2]
			verts.push(...vertsIn[va], ...vertsIn[vb], ...vertsIn[vc])
			surfs.push(...surfsIn[ta], ...surfsIn[tb], ...surfsIn[tc])
			{
				// Compute flat normal for triangle (first three vertices)
				const ax = vertsIn[va][0]
				const ay = vertsIn[va][1]
				const az = vertsIn[va][2]
				const bx = vertsIn[vb][0]
				const by = vertsIn[vb][1]
				const bz = vertsIn[vb][2]
				const cx = vertsIn[vc][0]
				const cy = vertsIn[vc][1]
				const cz = vertsIn[vc][2]
				// cross product: (B-A) x (C-A)
				let ux = (by - ay) * (cz - az) - (bz - az) * (cy - ay)
				let uy = (bz - az) * (cx - ax) - (bx - ax) * (cz - az)
				let uz = (bx - ax) * (cy - ay) - (by - ay) * (cx - ax)
				const l = sqrt(ux*ux + uy*uy + uz*uz)
				ux /= l
				uy /= l
				uz /= l
				// Assign this normal to all three vertices.
				normsIn[na] = [ux, uy, uz]
				normsIn[nb] = [ux, uy, uz]
				normsIn[nc] = [ux, uy, uz]
			}
			norms.push(...normsIn[na], ...normsIn[nb], ...normsIn[nc])
			if (face.length === 4) {
				const vd = face[3][0]
				const td = face[3][1]
				const nd = face[3][2]
				verts.push(...vertsIn[vc], ...vertsIn[vd], ...vertsIn[va])
				surfs.push(...surfsIn[tc], ...surfsIn[td], ...surfsIn[ta])
				{
					const ax = vertsIn[vc][0]
					const ay = vertsIn[vc][1]
					const az = vertsIn[vc][2]
					const bx = vertsIn[vd][0]
					const by = vertsIn[vd][1]
					const bz = vertsIn[vd][2]
					const cx = vertsIn[va][0]
					const cy = vertsIn[va][1]
					const cz = vertsIn[va][2]
					let ux = (by - ay) * (cz - az) - (bz - az) * (cy - ay)
					let uy = (bz - az) * (cx - ax) - (bx - ax) * (cz - az)
					let uz = (bx - ax) * (cy - ay) - (by - ay) * (cx - ax)
					const l = sqrt(ux*ux + uy*uy + uz*uz)
					ux /= l
					uy /= l
					uz /= l
					normsIn[na] = [ux, uy, uz]
					normsIn[nb] = [ux, uy, uz]
					normsIn[nc] = [ux, uy, uz]
				}
				norms.push(...normsIn[nc], ...normsIn[nd], ...normsIn[na])
			}
		}
		geometryModule.obj = src => {
			const timer = debug.bench("Construct model")
			const lines = src.split("\n")
			let i = 0
			while (i < lines.length) {
				const values = lines[i].split(" ")
				defs[values[0]](values.splice(1))
				++i
			}
			timer.end()
			verts = new Float32Array(verts)
			surfs = new Float32Array(surfs)
			norms = new Float32Array(norms)
			geometryModule.verts = _ => {
				return verts
			}
			geometryModule.surfs = _ => {
				return surfs
			}
			geometryModule.norms = _ => {
				return norms
			}
		}
		geometryModule.raycast = (p, d) => {
			// Grab ray origin and direction
			const [px, py, pz] = p.dump()
			const [dx, dy, dz] = d.dump()
			// Normalize direction (if not already normalized)
			const len = Math.sqrt(dx * dx + dy * dy + dz * dz)
			if (len < 1e-9) {
				// If direction is too small, there's no valid ray
				return false
			}
			const ux = dx / len, uy = dy / len, uz = dz / len

			let closestT = Infinity
			let hitPoint = false
			// To compute the interpolated normal, we need to store:
			let bestU = 0, bestV = 0, bestTriIndex = 0

			// For each triangle (3 vertices per triangle = 9 floats)
			for (let i = 0; i < verts.length; i += 9) {
				// Triangle vertices: A, B, C
				const ax = verts[i + 0], ay = verts[i + 1], az = verts[i + 2]
				const bx = verts[i + 3], by = verts[i + 4], bz = verts[i + 5]
				const cx = verts[i + 6], cy = verts[i + 7], cz = verts[i + 8]
				// Implement Möller–Trumbore:
				// e1 = B - A
				const e1x = bx - ax, e1y = by - ay, e1z = bz - az
				// e2 = C - A
				const e2x = cx - ax, e2y = cy - ay, e2z = cz - az
				// h = D x e2
				const hx = uy * e2z - uz * e2y
				const hy = uz * e2x - ux * e2z
				const hz = ux * e2y - uy * e2x
				// a = e1 . h
				const a = e1x * hx + e1y * hy + e1z * hz
				if (Math.abs(a) < 1e-9) {
					continue // Ray is parallel to this triangle.
				}
				const f = 1 / a
				// s = P - A
				const sx = px - ax, sy = py - ay, sz = pz - az
				// u parameter
				const uVal = f * (sx * hx + sy * hy + sz * hz)
				if (uVal < 0 || uVal > 1) {
					continue
				}
				// q = s x e1
				const qx = sy * e1z - sz * e1y
				const qy = sz * e1x - sx * e1z
				const qz = sx * e1y - sy * e1x
				// v parameter
				const vVal = f * (ux * qx + uy * qy + uz * qz)
				if (vVal < 0 || (uVal + vVal) > 1) {
					continue
				}
				// t = f * (e2 . q)
				const t = f * (e2x * qx + e2y * qy + e2z * qz)
				if (t > 1e-9 && t < closestT) {
					closestT = t
					bestU = uVal
					bestV = vVal
					bestTriIndex = i // Store where this triangle’s data starts.
					// Intersection point
					const ix = px + t * ux
					const iy = py + t * uy
					const iz = pz + t * uz
					hitPoint = vector.make(ix, iy, iz, 1)
				}
			}
			// Compute the normal at the hit point (if any intersection was found)
			let hitNormal = false
			if (hitPoint) {
				// Retrieve the vertex normals for the intersected triangle.
				// Since normals array is organized in 9-float groups:
				const nAx = norms[bestTriIndex + 0],
						nAy = norms[bestTriIndex + 1],
						nAz = norms[bestTriIndex + 2]
				const nBx = norms[bestTriIndex + 3],
						nBy = norms[bestTriIndex + 4],
						nBz = norms[bestTriIndex + 5]
				const nCx = norms[bestTriIndex + 6],
						nCy = norms[bestTriIndex + 7],
						nCz = norms[bestTriIndex + 8]
				// The barycentric coordinate for the third vertex is:
				const w = 1 - bestU - bestV
				// Interpolate the normal
				let nx = nAx * w + nBx * bestU + nCx * bestV
				let ny = nAy * w + nBy * bestU + nCy * bestV
				let nz = nAz * w + nBz * bestU + nCz * bestV
				// Normalize the result
				const nl = Math.sqrt(nx*nx + ny*ny + nz*nz)
				nx /= nl
				ny /= nl
				nz /= nl
				hitNormal = vector.make(nx, ny, nz, 0)
			}
			const hitinfo = {}
			hitinfo.p = _ => {
				return hitPoint
			}
			hitinfo.n = _ => {
				return hitNormal
			}
			return hitinfo
		}
		// Helper: Compute dot product of two 3D vectors.
		function dot3(ax, ay, az, bx, by, bz) {
			return ax * bx + ay * by + az * bz
		}

		// Helper: Given a point P and triangle vertices A, B, C,
		// returns the closest point on the triangle to P.
		function closestPointOnTriangle(px, py, pz,
										ax, ay, az,
										bx, by, bz,
										cx, cy, cz) {
			// Compute edge vectors and vector from A to P.
			const abx = bx - ax, aby = by - ay, abz = bz - az
			const acx = cx - ax, acy = cy - ay, acz = cz - az
			const apx = px - ax, apy = py - ay, apz = pz - az

			const d1 = dot3(abx, aby, abz, apx, apy, apz)
			const d2 = dot3(acx, acy, acz, apx, apy, apz)
			if (d1 <= 0 && d2 <= 0) {
				// Closest to vertex A
				return [ ax, ay, az ]
			}

			// Check if P in vertex region outside B.
			const bpx = px - bx, bpy = py - by, bpz = pz - bz
			const d3 = dot3(abx, aby, abz, bpx, bpy, bpz)
			const d4 = dot3(acx, acy, acz, bpx, bpy, bpz)
			if (d3 >= 0 && d4 <= d3) {
				// Closest to vertex B.
				return [ bx, by, bz ]
			}

			// Check if P in vertex region outside C.
			const cpx = px - cx, cpy = py - cy, cpz = pz - cz
			const d5 = dot3(abx, aby, abz, cpx, cpy, cpz)
			const d6 = dot3(acx, acy, acz, cpx, cpy, cpz)
			if (d6 >= 0 && d5 <= d6) {
				// Closest to vertex C.
				return [ cx, cy, cz ]
			}

			// Check if P in edge region of AB, and if so return projection onto AB.
			const vc = d1 * d4 - d3 * d2
			if (vc <= 0 && d1 >= 0 && d3 <= 0) {
				const t = d1 / (d1 - d3)
				return [ ax + t * abx, ay + t * aby, az + t * abz ]
			}

			// Check if P in edge region of AC, and if so return projection onto AC.
			const vb = d5 * d2 - d1 * d6
			if (vb <= 0 && d2 >= 0 && d6 <= 0) {
				const t = d2 / (d2 - d6)
				return [ ax + t * acx, ay + t * acy, az + t * acz ]
			}

			// Check if P in edge region of BC, and if so return projection onto BC.
			const va = d3 * d6 - d5 * d4
			if (va <= 0 && (d4 - d3) >= 0 && (d5 - d6) >= 0) {
				const t = (d4 - d3) / ((d4 - d3) + (d5 - d6))
				const bcx = cx - bx, bcy = cy - by, bcz = cz - bz
				return [ bx + t * bcx, by + t * bcy, bz + t * bcz ]
			}

			// P is inside face region. Compute barycentrics for the projection.
			let denom = 1 / (va + vb + vc)
			const v = vb * denom
			const w = vc * denom
			const u = 1 - v - w
			return [
				u * ax + v * bx + w * cx,
				u * ay + v * by + w * cy,
				u * az + v * bz + w * cz
			]
		}

		// Helper: Given point P and triangle vertices A, B, C,
		// compute barycentric coordinates (u,v,w) for P relative to the triangle.
		function computeBarycentrics(P, A, B, C) {
			const v0x = B[0] - A[0], v0y = B[1] - A[1], v0z = B[2] - A[2]
			const v1x = C[0] - A[0], v1y = C[1] - A[1], v1z = C[2] - A[2]
			const v2x = P[0] - A[0], v2y = P[1] - A[1], v2z = P[2] - A[2]

			const d00 = dot3(v0x, v0y, v0z, v0x, v0y, v0z)
			const d01 = dot3(v0x, v0y, v0z, v1x, v1y, v1z)
			const d11 = dot3(v1x, v1y, v1z, v1x, v1y, v1z)
			const d20 = dot3(v2x, v2y, v2z, v0x, v0y, v0z)
			const d21 = dot3(v2x, v2y, v2z, v1x, v1y, v1z)

			const denom = d00 * d11 - d01 * d01
			const v = (d11 * d20 - d01 * d21) / denom
			const w = (d00 * d21 - d01 * d20) / denom
			const u = 1 - v - w
			return [ u, v, w ]
		}

		// -------------------------------------------------------------------------
		// geometryModule.project
		// Given an input point (as a vector), finds the closest point on any
		// triangle in the geometry. Also interpolates the normal at that point.
		geometryModule.project = p => {
			// Get the coordinates from the vector point.
			const [px, py, pz] = p.dump()
			let bestDistSq = Infinity
			let bestProj = null
			let bestTriIndex = null
			let bestBary = null

			// Iterate over every triangle (3 vertices per triangle = 9 floats).
			for (let i = 0; i < verts.length; i += 9) {
				// Retrieve the three vertices of the triangle.
				const ax = verts[i + 0], ay = verts[i + 1], az = verts[i + 2]
				const bx = verts[i + 3], by = verts[i + 4], bz = verts[i + 5]
				const cx = verts[i + 6], cy = verts[i + 7], cz = verts[i + 8]

				// Find the closest point on this triangle to the input point.
				const proj = closestPointOnTriangle(px, py, pz, ax, ay, az, bx, by, bz, cx, cy, cz)
				// Compute squared distance from input point to the projection.
				const dx = px - proj[0], dy = py - proj[1], dz = pz - proj[2]
				const distSq = dx * dx + dy * dy + dz * dz

				if (distSq < bestDistSq) {
					bestDistSq = distSq
					bestProj = proj
					bestTriIndex = i
					// Also compute barycentrics so that we can interpolate the normal.
					bestBary = computeBarycentrics(proj, { ax, ay, az },
															{ bx, by, bz },
															{ cx, cy, cz })
				}
			}

			// If no projection was computed, return false.
			if (!bestProj) {
				return false
			}

			// Now interpolate the normal using the barycentrics.
			// The normals array is organized similarly to verts (3 normals per vertex).
			const nAx = norms[bestTriIndex + 0],
						nAy = norms[bestTriIndex + 1],
						nAz = norms[bestTriIndex + 2]
			const nBx = norms[bestTriIndex + 3],
						nBy = norms[bestTriIndex + 4],
						nBz = norms[bestTriIndex + 5]
			const nCx = norms[bestTriIndex + 6],
						nCy = norms[bestTriIndex + 7],
						nCz = norms[bestTriIndex + 8]

			// Using barycentrics, interpolate.
			const u = bestBary.u,
						v = bestBary.v,
						w = bestBary.w
			let nx = nAx * u + nBx * v + nCx * w
			let ny = nAy * u + nBy * v + nCy * w
			let nz = nAz * u + nBz * v + nCz * w

			// Normalize the interpolated normal.
			let len = Math.sqrt(nx * nx + ny * ny + nz * nz)
			if (len > 0) {
				nx /= len; ny /= len; nz /= len
			}

			// Create vector points for the projected point and the normal.
			const closestPoint = vector.make(bestProj[0], bestProj[1], bestProj[2], 1)
			const normalAtPoint = vector.make(nx, ny, nz, 0)

			// Return an object similar to "raycast"—with functions p() and n()
			// that return the hit point and normal, respectively.
			const hitinfo = {}
			hitinfo.p = () => closestPoint
			hitinfo.n = () => normalAtPoint
			return hitinfo
		}

	}
}
const graphicsModule = {}
{
	graphicsModule.link = env => {
		const debug = env.require("debug")
		const vector = env.require("vector")
		const camera = env.require("camera")
		const geometry = env.require("geometry")
		const thread = env.require("thread")
		camera.link(env)

		const canvas = document.createElement("canvas")
		canvas.style.imageRendering = "pixelated"
		graphicsModule.fixCanvas = _ => {
			canvas.style.position = "fixed"
			canvas.style.top = "0"
		}

		const gl = canvas.getContext("webgl2", {
			alpha: false,
			antialias: false,
			desynchronized: true,
			failIfMajorPerformanceCaveat: false,
			powerPreference: "low-power",
			premultipliedAlpha: false,
			preserveDrawingBuffer: true
		})
		if (!gl) {
			debug.log("Failed to initialize context")
		}

		// Helper functions for creating shaders, programs, and buffers.
		graphicsModule.makeShader = (type, src) => {
			const shader = {}
			const id = gl.createShader(type)
			gl.shaderSource(id, src)
			gl.compileShader(id)
			if (!gl.getShaderParameter(id, gl.COMPILE_STATUS)) {
				debug.log(gl.getShaderInfoLog(id))
			}
			shader.id = () => id
			return shader
		}

		graphicsModule.makeProg = (...shaders) => {
			const prog = {}
			const id = gl.createProgram()
			for (const sh of shaders) {
				gl.attachShader(id, sh.id())
			}
			gl.linkProgram(id)
			if (!gl.getProgramParameter(id, gl.LINK_STATUS)) {
				debug.log(gl.getProgramInfoLog(id))
			}
			prog.use = () => gl.useProgram(id)
			prog.id = () => id
			prog.uniform = name => {
				const loc = gl.getUniformLocation(id, name)
				return {
					loc: () => loc,
					send: (...values) => {
						if (values.length === 1 && typeof values[0] === "object") {
							const v = values[0]
							if (v.type === "vector") {
								gl.uniform4fv(loc, v.dump())
							} else if (v.type === "matrix") {
								gl.uniformMatrix4fv(loc, false, v.tdump())
							} else if (v.length === 3) {
								// assume a vec3 array
								gl.uniform3fv(loc, v)
							}
						} else if (values.length === 1 && typeof values[0] === "number") {
							// single float
							gl.uniform1f(loc, values[0])
						} else {
							// multiple floats
							gl.uniform1fv(loc, values)
						}
					}
				}
			}
			prog.attr = name => {
				const loc = gl.getAttribLocation(id, name)
				gl.enableVertexAttribArray(loc)
				return {
					loc: () => loc,
					point: (size, type, norm, stride, offset) => {
						gl.vertexAttribPointer(loc, size, type, norm, stride, offset)
					}
				}
			}
			return prog
		}

		graphicsModule.makeBuff = () => {
			const buff = {}
			const id = gl.createBuffer()
			buff.bind = (...args) => gl.bindBuffer(...args, id)
			return buff
		}

		graphicsModule.fade = _ => {
			const t0 = thread.now()
			const uhh = thread.make(_ => {
				const t = thread.now()
				const elapsed = t - t0
				canvas.style.opacity = elapsed
				if (elapsed >= 1) {
					canvas.style.opacity = 1
					uhh.remove()
				}
			})
		}

		// ------------------------------
		// SCENE RENDER PROGRAM (pass 1)
		// ------------------------------
		const vertSrc = `#version 300 es
		flat out int vertI;
		in vec2 surf;
		in vec3 norm;
		in vec3 vert;
		out vec2 surfW;
		out vec3 normW;
		out vec3 vertR;
		out vec3 vertW;
		precision lowp float;
		precision lowp int;
		uniform mat4 frus;
		uniform vec2 viewportSize;
		uniform vec4 camP;
		uniform vec4 camR;

		vec3 qmul(vec4 q, vec3 p) {
			// quaternion * vector
			vec3 t = 2.0 * cross(q.xyz, p);
			return p + q.w * t + cross(q.xyz, t);
		}

		vec4 conj(vec4 q) {
			return vec4(-q.xyz, q.w);
		}

		void main() {
			vertW = vert;
			surfW = surf;
			normW = norm;
			vertR = qmul(conj(camR), vert - camP.xyz);
			gl_Position = frus * vec4(vertR, 1.0);
			vertI = gl_VertexID;
		}
		`

		const fragSrc = `#version 300 es
		precision lowp float;
		precision lowp int;
		flat in int vertI;
		in vec2 surfW;
		in vec3 normW;
		in vec3 vertR;
		in vec3 vertW;
		out vec4 fragColor;
		uniform vec4 camP;
		uniform float time;

		#define DENOISE true
		float hash(vec2 p) {
			// quick-and-dirty 2D hash
			vec3 p3 = fract(vec3(p.xyx) * 0.1031);
			p3 += dot(p3, p3.yzx + 19.19);
			return fract((p3.x + p3.y) * p3.z);
		}

		// Hue-sat-val to RGB
		vec3 rgbFromHsv(vec3 c) {
			vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
			vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
			return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
		}

		void main() {
			float intensity = 12.0 * inversesqrt(length(vertR));
			float incidence = dot(normW, normalize(camP.xyz - vertW));
			float smoothness = 5.0 * hash(vec2(float(vertI), 1.0));
			float reflectance = incidence/(incidence*(1.0 - smoothness) + smoothness);
			float luminance = intensity * reflectance;
			float eye = exp(-luminance);

			// Use hue from hash, saturation from 'eye', value = 1 - eye^2
			vec3 color = rgbFromHsv(vec3(
				hash(vec2(float(vertI), 12.0)),
				eye,
				1.0 - eye * eye
			));

			// cheap denoise
			if (DENOISE) {
				color.r += 0.05 * hash(gl_FragCoord.xy + vec2(1.0, 0.0 + time));
				color.g += 0.05 * hash(gl_FragCoord.xy + vec2(0.0, 1.0 + time));
				color.b += 0.05 * hash(gl_FragCoord.xy + vec2(1.0, 1.0 + time));
			}

			// Write geometry with full alpha
			fragColor = vec4(color, 1.0);
		}
		`

		document.documentElement.style.backgroundColor = "black"
		document.documentElement.style.overflow = "hidden"

		const vertShader = graphicsModule.makeShader(gl.VERTEX_SHADER, vertSrc)
		const fragShader = graphicsModule.makeShader(gl.FRAGMENT_SHADER, fragSrc)
		const worldProg = graphicsModule.makeProg(vertShader, fragShader)
		worldProg.use()

		const camP_u = worldProg.uniform("camP")
		const camR_u = worldProg.uniform("camR")
		const frusU = worldProg.uniform("frus")
		const timeU = worldProg.uniform("time")

		// Example geometry
		geometry.obj(e1m1Src)
		const verts = geometry.verts()

		// Position attribute
		{
			const vertBuff = graphicsModule.makeBuff()
			vertBuff.bind(gl.ARRAY_BUFFER)
			gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW)
			const vertAttr = worldProg.attr("vert")
			vertAttr.point(3, gl.FLOAT, false, 0, 0)
		}

		// Normal attribute
		{
			const normBuff = graphicsModule.makeBuff()
			normBuff.bind(gl.ARRAY_BUFFER)
			gl.bufferData(gl.ARRAY_BUFFER, geometry.norms(), gl.STATIC_DRAW)
			const normAttr = worldProg.attr("norm")
			normAttr.point(3, gl.FLOAT, false, 0, 0)
		}

		// (Optional) Surface attribute
		// {
		//   const surfBuff = graphicsModule.makeBuff()
		//   surfBuff.bind(gl.ARRAY_BUFFER)
		//   gl.bufferData(gl.ARRAY_BUFFER, geometry.surfs(), gl.STATIC_DRAW)
		//   const surfAttr = worldProg.attr("surf")
		//   surfAttr.point(2, gl.FLOAT, false, 0, 0)
		// }

		// We'll store viewport in a uniform if you like, but not strictly necessary
		const aspectU = worldProg.uniform("aspect")
		let aspect

		// Suppose colorTex and depthBuf were created at startup...
		// const colorTex = gl.createTexture()
		// const depthBuf = gl.createRenderbuffer()
		// const fbo = gl.createFramebuffer()

		function resize() {
			// 1. Resize the canvas HTML element
			canvas.width = window.innerWidth
			canvas.height = window.innerHeight

			// 2. Update the WebGL viewport
			gl.viewport(0, 0, canvas.width, canvas.height)

			// 3. Reallocate the FBO’s color texture to match the new Canvas size
			gl.bindTexture(gl.TEXTURE_2D, colorTex)
			gl.texImage2D(
				gl.TEXTURE_2D,
				0,
				gl.RGBA,
				canvas.width,
				canvas.height,
				0,
				gl.RGBA,
				gl.UNSIGNED_BYTE,
				null
			)

			// 4. Reallocate the FBO’s depth renderbuffer
			gl.bindRenderbuffer(gl.RENDERBUFFER, depthBuf)
			gl.renderbufferStorage(
				gl.RENDERBUFFER,
				gl.DEPTH_COMPONENT16,
				canvas.width,
				canvas.height
			)

			// 5. (Optional) Unbind things for cleanliness
			gl.bindTexture(gl.TEXTURE_2D, null)
			gl.bindRenderbuffer(gl.RENDERBUFFER, null)

			// 6. Update any uniforms that depend on viewport size/aspect ratio
			frusU.send(camera.frus())
			aspect = canvas.height / canvas.width
			aspectU.send(aspect)
		}

		window.onresize = resize


		canvas.onclick = () => {
			canvas.requestPointerLock({ unadjustedMovement: true })
		}

		document.documentElement.appendChild(canvas)

		// -----------------------------------------
		// NEW: Create an offscreen FBO for pass #1
		// -----------------------------------------
		const fbo = gl.createFramebuffer()
		gl.bindFramebuffer(gl.FRAMEBUFFER, fbo)

		// Create a color texture w/ alpha
		const colorTex = gl.createTexture()
		gl.bindTexture(gl.TEXTURE_2D, colorTex)
		gl.texImage2D(
			gl.TEXTURE_2D,
			0,
			gl.RGBA,
			canvas.width,
			canvas.height,
			0,
			gl.RGBA,
			gl.UNSIGNED_BYTE,
			null
		)
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST)
		gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST)
		// Attach to FBO
		gl.framebufferTexture2D(
			gl.FRAMEBUFFER,
			gl.COLOR_ATTACHMENT0,
			gl.TEXTURE_2D,
			colorTex,
			0
		)

		// Create a depth renderbuffer (or depth texture) so depth works
		const depthBuf = gl.createRenderbuffer()
		gl.bindRenderbuffer(gl.RENDERBUFFER, depthBuf)
		gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, canvas.width, canvas.height)
		gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, depthBuf)

		if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {
			debug.log("Framebuffer not complete!")
		}
		gl.bindFramebuffer(gl.FRAMEBUFFER, null)

		// ------------------------------------------
		// NEW: Post-process pass (full-screen quad)
		// ------------------------------------------
		const postVertSrc = `#version 300 es
		in vec2 position;
		out vec2 uv;
		void main() {
			uv = 0.5 * (position + vec2(1.0, 1.0)); // from [-1..1] to [0..1]
			gl_Position = vec4(position, 0.0, 1.0);
		}
		`
		const postFragSrc = `#version 300 es
		precision lowp float;
		in vec2 uv;
		out vec4 fragColor;
		uniform sampler2D colorTex;
		uniform float time;

		// same hash function
		float hash(vec2 p) {
			vec3 p3 = fract(vec3(p.xyx) * 0.1031);
			p3 += dot(p3, p3.yzx + 19.19);
			return fract((p3.x + p3.y) * p3.z);
		}

		void main() {
			// read color from first pass
			vec4 color = texture(colorTex, uv);

			// If alpha < 0.5, treat as “not drawn,” so we draw static
			if (color.a < 0.5) {
				float n = hash(gl_FragCoord.xy + vec2(time));
				color = vec4(vec3(n), 1.0);
			}

			fragColor = color;
		}
		`
		const postVert = graphicsModule.makeShader(gl.VERTEX_SHADER, postVertSrc)
		const postFrag = graphicsModule.makeShader(gl.FRAGMENT_SHADER, postFragSrc)
		const postProg = graphicsModule.makeProg(postVert, postFrag)
		const postPosLoc = postProg.attr("position")
		const postTimeLoc = postProg.uniform("time")
		const postColorTexLoc = postProg.uniform("colorTex")

		// A simple full-screen quad (-1..1) in XY
		const fsq = new Float32Array([
			-1, -1,
			 1, -1,
			-1,  1,
			-1,  1,
			 1, -1,
			 1,  1
		])
		const fsqBuff = graphicsModule.makeBuff()
		fsqBuff.bind(gl.ARRAY_BUFFER)
		gl.bufferData(gl.ARRAY_BUFFER, fsq, gl.STATIC_DRAW)

		// -----------------------------------------------------------
		// NEW: Debug Box drawing
		// -----------------------------------------------------------
		// We'll maintain an array of pending debug box definitions.
		graphicsModule.debugBoxes = []
		graphicsModule.drawDebugBox = (p, r, s) => {
			// p: vec4 (or an object with x,y,z properties)
			// s: vec3 (scaling in each dimension)
			// r: vec4 (quaternion rotation)
			graphicsModule.debugBoxes.push({ p, r, s })
		}

		// Debug box vertex shader and fragment shader.
		// This shader uses the same camera uniforms and quaternion utilities
		// as the world shader.
		const debugVertSrc = `#version 300 es
		in vec3 pos;
		uniform vec4 debugP; // box position (only xyz used)
		uniform vec3 debugS; // box scale/size
		uniform vec4 debugR; // box rotation (quaternion)

		uniform mat4 frus;
		uniform vec4 camP;
		uniform vec4 camR;

		vec3 qmul(vec4 q, vec3 v) {
			vec3 t = 2.0 * cross(q.xyz, v);
			return v + q.w * t + cross(q.xyz, t);
		}
		vec4 conj(vec4 q) { return vec4(-q.xyz, q.w); }

		void main(){
			// pos is in local-space (a unit cube centered at 0)
			// First scale it, then rotate, then translate.
			vec3 worldPos = debugP.xyz + qmul(debugR, pos * debugS);
			// Now, transform the worldPos into camera (view) space.
			vec3 viewPos = qmul(conj(camR), worldPos - camP.xyz);
			gl_Position = frus * vec4(viewPos, 1.0);
		}
		`
		const debugFragSrc = `#version 300 es
		precision lowp float;
		out vec4 fragColor;
		void main(){
			// Draw in red.
			fragColor = vec4(1.0, 0.0, 0.0, 1.0);
		}
		`
		const debugVertShader = graphicsModule.makeShader(gl.VERTEX_SHADER, debugVertSrc)
		const debugFragShader = graphicsModule.makeShader(gl.FRAGMENT_SHADER, debugFragSrc)
		const debugProg = graphicsModule.makeProg(debugVertShader, debugFragShader)
		// Get attribute and uniform locations for the debug shader.
		const debugPosAttr = debugProg.attr("pos")
		const debugP_u = debugProg.uniform("debugP")
		const debugS_u = debugProg.uniform("debugS")
		const debugR_u = debugProg.uniform("debugR")
		const debugCamP_u = debugProg.uniform("camP")
		const debugCamR_u = debugProg.uniform("camR")
		const debugFrusU = debugProg.uniform("frus")

		// Create a vertex buffer for a solid cube.
		// Instead of a wireframe cube (12 edges), we define 6 faces (12 triangles, 36 vertices).
		const cubeFaces = new Float32Array([
			// Front face (z = 0.5)
			-0.5, -0.5,  0.5,
			 0.5, -0.5,  0.5,
			 0.5,  0.5,  0.5,
			-0.5, -0.5,  0.5,
			 0.5,  0.5,  0.5,
			-0.5,  0.5,  0.5,

			// Back face (z = -0.5)
			-0.5, -0.5, -0.5,
			-0.5,  0.5, -0.5,
			 0.5,  0.5, -0.5,
			-0.5, -0.5, -0.5,
			 0.5,  0.5, -0.5,
			 0.5, -0.5, -0.5,

			// Left face (x = -0.5)
			-0.5, -0.5, -0.5,
			-0.5, -0.5,  0.5,
			-0.5,  0.5,  0.5,
			-0.5, -0.5, -0.5,
			-0.5,  0.5,  0.5,
			-0.5,  0.5, -0.5,

			// Right face (x = 0.5)
			 0.5, -0.5, -0.5,
			 0.5,  0.5, -0.5,
			 0.5,  0.5,  0.5,
			 0.5, -0.5, -0.5,
			 0.5,  0.5,  0.5,
			 0.5, -0.5,  0.5,

			// Top face (y = 0.5)
			-0.5,  0.5, -0.5,
			-0.5,  0.5,  0.5,
			 0.5,  0.5,  0.5,
			-0.5,  0.5, -0.5,
			 0.5,  0.5,  0.5,
			 0.5,  0.5, -0.5,

			// Bottom face (y = -0.5)
			-0.5, -0.5, -0.5,
			 0.5, -0.5, -0.5,
			 0.5, -0.5,  0.5,
			-0.5, -0.5, -0.5,
			 0.5, -0.5,  0.5,
			-0.5, -0.5,  0.5,
		])
		const debugCubeBuff = graphicsModule.makeBuff()
		debugCubeBuff.bind(gl.ARRAY_BUFFER)
		gl.bufferData(gl.ARRAY_BUFFER, cubeFaces, gl.STATIC_DRAW)

		// ------------------------------------------------------
		// Main update loop: Render geometry, then post-process,
		// then draw debug boxes (which overlay everything)
		// ------------------------------------------------------
		thread.make(_ => {
			// PASS #1: Render into offscreen FBO
			gl.bindFramebuffer(gl.FRAMEBUFFER, fbo)
			gl.viewport(0, 0, canvas.width, canvas.height)
			// Clear with alpha=0 so “no geometry = alpha=0”
			gl.clearColor(0, 0, 0, 0)
			gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)
			gl.enable(gl.DEPTH_TEST)
			gl.enable(gl.CULL_FACE)
			gl.depthFunc(gl.LESS)

			worldProg.use()
			timeU.send(thread.now())
			camP_u.send(camera.p())
			camR_u.send(camera.r())
			gl.drawArrays(gl.TRIANGLES, 0, verts.length / 3)

			// PASS #2: Render full-screen quad to default framebuffer
			gl.bindFramebuffer(gl.FRAMEBUFFER, null)
			gl.viewport(0, 0, canvas.width, canvas.height)
			gl.clearColor(0.0, 0.0, 0.0, 1.0)
			gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)

			postProg.use()
			fsqBuff.bind(gl.ARRAY_BUFFER)
			postPosLoc.point(2, gl.FLOAT, false, 0, 0)

			// Set uniforms
			postTimeLoc.send(thread.now())
			// The texture unit to use for colorTex is texture unit 0
			gl.activeTexture(gl.TEXTURE0)
			gl.bindTexture(gl.TEXTURE_2D, colorTex)
			postColorTexLoc.send(0) // sampler2D takes the texture unit index

			// Draw the fullscreen quad
			gl.drawArrays(gl.TRIANGLES, 0, 6)

			// ------------------------------------------------------
			// PASS #3: Draw Debug Boxes (always drawn last as red overlays)
			// ------------------------------------------------------
			// Use the debug box program, bind the cube buffer, and
			// set camera uniforms.
			debugProg.use()
			debugCubeBuff.bind(gl.ARRAY_BUFFER)
			debugPosAttr.point(3, gl.FLOAT, false, 0, 0)

			debugCamP_u.send(camera.p())
			debugCamR_u.send(camera.r())
			debugFrusU.send(camera.frus())

			// Disable depth testing so the debug boxes show up on top.
			gl.disable(gl.DEPTH_TEST)
			// For each pending debug box, set its transform and draw the cube faces.
			for (const box of graphicsModule.debugBoxes) {
				debugP_u.send(box.p)
				debugR_u.send(box.r)
				debugS_u.send(box.s)
				// Draw filled cube faces:
				gl.drawArrays(gl.TRIANGLES, 0, cubeFaces.length / 3)
			}
			// Re-enable depth test if needed later.
			gl.enable(gl.DEPTH_TEST)
			// Clear the debug boxes list.
			// graphicsModule.debugBoxes.length = 0
		})

		resize() // call once at startup
	}
}

const inputModule = {}
{
	inputModule.link = env => {
		const signal = env.require("signal")
		const vector = env.require("vector")
		// require("thread")
		const keysDown = {}
		inputModule.move = signal.make()
		onkeydown = event => {
			if (event.key === "F12") {
				event.preventDefault()
			}
			keysDown[event.code] = true
		}
		onkeyup = event => {
			keysDown[event.code] = false
		}
		onmousemove = event => {
			// thread.tick()
			inputModule.move.fire(event)
		}
		oncontextmenu = event => {
			event.preventDefault()
		}
		inputModule.intent = _ => {
			return vector.make(
				(keysDown["KeyD"] && 1 || 0) - (keysDown["KeyA"] && 1 || 0),
				(keysDown["KeyE"] && 1 || 0) - (keysDown["KeyQ"] && 1 || 0),
				(keysDown["KeyS"] && 1 || 0) - (keysDown["KeyW"] && 1 || 0),
				0
			)
		}
	}
}
const e1m1Src = `# doom.wad, map E1M1
# Created by GZDoom Builder 2.3.0.2787
o E1M1
v -1984 24 -3648
v -1984 64 -3648
v -1984 64 -3776
v -1984 24 -3776
v -2240 24 -3776
v -2240 64 -3776
v -2240 64 -3648
v -2240 24 -3648
v -1672 -80 -3104
v -1672 -56 -3104
v -1520 -56 -3168
v -1520 -80 -3168
v -1896 -80 -3104
v -1896 -56 -3104
v -2040 -80 -3144
v -2040 -56 -3144
v -2128 -80 -3272
v -2128 -56 -3272
v -2064 -80 -3408
v -2064 -56 -3408
v -1784 -80 -3448
v -1784 -56 -3448
v -1544 -80 -3384
v -1544 -56 -3384
v -1376 -56 -3648
v -1376 24 -3648
v -1528 24 -3680
v -1528 -56 -3680
v -1672 24 -3744
v -1672 -56 -3744
v -1984 -56 -3776
v 640 0 -3648
v 640 128 -3648
v -64 128 -3648
v -64 0 -3648
v 768 0 -3520
v 768 128 -3520
v 768 0 -2944
v 768 128 -2944
v 640 0 -2816
v 640 128 -2816
v -64 0 -2816
v -64 128 -2816
v -2488 -56 -3744
v -2488 24 -3744
v -2736 24 -3648
v -2736 -56 -3648
v -2240 -56 -3776
v -1376 192 -3104
v -1376 216 -3104
v -1376 216 -3200
v -1376 192 -3200
v -1376 -56 -3104
v -1376 8 -3104
v -1376 8 -3200
v -1376 -56 -3200
v -1376 192 -3264
v -1376 216 -3264
v -1376 216 -3360
v -1376 192 -3360
v -1376 -56 -3264
v -1376 8 -3264
v -1376 8 -3360
v -1376 -56 -3360
v -1376 -56 -2944
v -1376 216 -2944
v -1472 -56 -2880
v -1472 216 -2880
v -1920 0 -2920
v -1920 216 -2920
v -1856 216 -2880
v -1856 0 -2880
v -1920 -56 -2920
v -1856 -56 -2880
v -2736 216 -3648
v -2736 216 -3360
v -2736 -56 -3360
v -2240 216 -3648
v -1984 216 -3648
v -1376 216 -3648
v -2272 -56 -3008
v -2272 216 -3008
v -2240 216 -2920
v -2240 -56 -2920
v -2432 -56 -3112
v -2432 216 -3112
v -2736 -56 -3112
v -2736 216 -3112
v -2736 136 -3360
v -2736 136 -3112
v -2736 0 -3360
v -2736 0 -3112
v -1376 -56 -3520
v -1376 216 -3520
v -1376 216 -3392
v -1376 -56 -3392
v -1376 0 -3392
v -1376 0 -3520
v -1664 -56 -2880
v -1664 216 -2880
v -1664 0 -2880
v -2176 0 -2920
v -2176 216 -2920
v -2176 -56 -2920
v -1248 0 -2528
v -1248 144 -2528
v -1216 144 -2880
v -1216 0 -2880
v -1344 0 -2880
v -1344 144 -2880
v -1384 144 -2592
v -1384 0 -2592
v -1472 144 -2560
v -1472 0 -2560
v -1472 0 -2432
v -1472 144 -2432
v -1216 72 -2880
v -1344 72 -2880
v -1472 88 -2560
v -1472 88 -2432
v -1536 88 -2560
v -1536 0 -2560
v -1536 0 -2432
v -1536 88 -2432
v -1344 192 -3360
v -1344 200 -3360
v -1344 200 -3264
v -1344 192 -3264
v -1344 -16 -3360
v -1344 8 -3360
v -1344 8 -3264
v -1344 -16 -3264
v -1344 200 -3200
v -1344 -16 -3200
v -1344 192 -3200
v -1344 200 -3104
v -1344 192 -3104
v -1344 8 -3200
v -1344 8 -3104
v -1344 -16 -3104
v -1216 72 -3392
v -1216 200 -3392
v -1344 72 -3360
v -1344 72 -3104
v -1216 200 -3072
v -1216 72 -3072
v -1184 120 -3104
v -1184 200 -3104
v -928 200 -3104
v -928 120 -3104
v -928 120 -3360
v -928 200 -3360
v -1184 200 -3360
v -1184 120 -3360
v -1088 0 -3648
v -1088 72 -3648
v -1152 72 -3648
v -1152 0 -3648
v -960 0 -3648
v -960 72 -3648
v -1024 72 -3648
v -1024 0 -3648
v -1280 72 -3552
v -1280 0 -3552
v -832 0 -3552
v -832 72 -3552
v -1344 72 -3552
v -1344 0 -3552
v -704 0 -3552
v -704 72 -3552
v -1344 0 -3104
v -832 0 -2944
v -832 72 -2944
v -704 72 -2944
v -704 0 -2944
v -968 0 -2880
v -968 72 -2880
v -704 0 -3360
v -704 72 -3360
v -704 72 -3104
v -704 0 -3104
v -1344 0 -3392
v -1344 72 -3392
v -1344 0 -3360
v -1344 72 -3520
v -1344 0 -3520
v -704 120 -3360
v -704 120 -3104
v -512 -8 -3304
v -512 120 -3304
v -512 120 -3328
v -512 -8 -3328
v -512 -8 -3136
v -512 120 -3136
v -512 120 -3160
v -512 -8 -3160
v -680 -8 -3104
v -680 120 -3104
v -680 120 -3360
v -680 -8 -3360
v 320 104 -3296
v 320 264 -3296
v 256 264 -3328
v 256 104 -3328
v 256 104 -3136
v 256 264 -3136
v 320 264 -3168
v 320 104 -3168
v 256 240 -3328
v 128 264 -3328
v 128 240 -3328
v 256 136 -3328
v 128 136 -3328
v 128 104 -3328
v 128 240 -3136
v 128 264 -3136
v 256 240 -3136
v 128 104 -3136
v 128 136 -3136
v 256 136 -3136
v 320 240 -3168
v 320 240 -3296
v 320 136 -3168
v 320 136 -3296
v 88 104 -3136
v 88 264 -3136
v 88 264 -3328
v 88 104 -3328
v 336 0 -3120
v 336 264 -3120
v 256 264 -3120
v 256 0 -3120
v 336 0 -3168
v 336 264 -3168
v 336 0 -3344
v 336 264 -3344
v 336 264 -3296
v 336 0 -3296
v 256 0 -3344
v 256 264 -3344
v 96 0 -3344
v 96 264 -3344
v 128 264 -3344
v 128 0 -3344
v -64 0 -3520
v -64 264 -3520
v 128 0 -3120
v 128 264 -3120
v 96 264 -3120
v 96 0 -3120
v -64 264 -2944
v -64 0 -2944
v 128 240 -3344
v 256 240 -3344
v 128 136 -3344
v 256 136 -3344
v 256 240 -3120
v 128 240 -3120
v 256 136 -3120
v 128 136 -3120
v 336 240 -3296
v 336 240 -3168
v 336 136 -3296
v 336 136 -3168
v -64 264 -2816
v -64 264 -3648
v -2176 0 -2816
v -1664 0 -2816
v -1664 32 -2816
v -1664 88 -2816
v -2176 88 -2816
v -2176 32 -2816
v -2752 136 -3360
v -2752 0 -3360
v -2752 0 -3112
v -2752 136 -3112
v -2112 -136 -4032
v -2112 -40 -4032
v -2240 -40 -4096
v -2240 -136 -4096
v -2176 -136 -3904
v -2176 -120 -3904
v -2048 -120 -3904
v -2048 -136 -3904
v -2240 -136 -3968
v -2240 -40 -3968
v -2176 -40 -3920
v -2176 -136 -3920
v -2048 -136 -3920
v -2048 -40 -3920
v -2048 -120 -3872
v -2048 16 -3872
v -2048 16 -3904
v -2176 16 -3904
v -2176 16 -3872
v -2176 -120 -3872
v -2176 -104 -3872
v -2048 -104 -3872
v -2048 -40 -3904
v -2176 -40 -3904
v -2048 -104 -3840
v -2048 16 -3840
v -2176 16 -3840
v -2176 -104 -3840
v -2176 -88 -3840
v -2048 -88 -3840
v -2176 16 -3808
v -2176 -88 -3808
v -2048 -88 -3808
v -2048 16 -3808
v -2176 -72 -3808
v -2048 -72 -3808
v -2176 16 -3776
v -2176 -72 -3776
v -2048 -72 -3776
v -2048 16 -3776
v -2176 -56 -3776
v -2048 -56 -3776
v -2208 -56 -3680
v -2208 64 -3680
v -2176 -56 -3680
v -2176 64 -3680
v -2016 64 -3680
v -2016 -56 -3680
v -2048 64 -3680
v -2048 -56 -3680
v -2048 16 -3680
v -2176 16 -3680
v -2176 16 -3704
v -2176 -56 -3704
v -2048 -56 -3704
v -2048 16 -3704
v -1216 -16 -3360
v -1216 200 -3360
v -1216 -16 -3392
v -1184 -16 -3360
v -1216 -16 -3104
v -1216 200 -3104
v -1184 -16 -3104
v -1216 -16 -3072
v -928 -8 -3360
v -928 120 -3392
v -928 -8 -3392
v -896 -8 -3360
v -896 120 -3360
v -1184 -8 -3392
v -1184 120 -3392
v -1184 -8 -3360
v -928 -8 -3104
v -896 120 -3104
v -896 -8 -3104
v -928 -8 -3072
v -928 120 -3072
v -1184 -8 -3104
v -1184 120 -3072
v -1184 -8 -3072
v -928 0 -3392
v -928 72 -3392
v -896 72 -3392
v -896 0 -3392
v -896 72 -3360
v -896 0 -3360
v -1216 0 -3392
v -1184 72 -3392
v -1184 0 -3392
v -896 0 -3104
v -896 72 -3104
v -896 72 -3072
v -896 0 -3072
v -928 72 -3072
v -928 0 -3072
v -1184 0 -3072
v -1184 72 -3072
v -1216 0 -3072
v -2944 72 -2656
v -2944 176 -2656
v -2752 176 -2784
v -2752 72 -2784
v -2944 -24 -2656
v -2944 -16 -2656
v -2752 -16 -2784
v -2752 -24 -2784
v -2624 -16 -2784
v -2624 72 -2784
v -2752 72 -2560
v -2752 -16 -2560
v -2752 -8 -2560
v -2624 -8 -2784
v -2520 72 -2560
v -2520 -8 -2560
v -2520 -8 -2688
v -2520 72 -2688
v -2496 -8 -2560
v -2496 0 -2560
v -2496 0 -2688
v -2496 -8 -2688
v -2752 -104 -3904
v -2752 -88 -3904
v -2752 -88 -3776
v -2752 -104 -3776
v -2752 48 -3776
v -2688 48 -3776
v -2688 -104 -3776
v -2720 -104 -3904
v -2720 48 -3904
v -2752 48 -3904
v -2784 -88 -3904
v -2784 -72 -3904
v -2784 -72 -3776
v -2784 -88 -3776
v -2784 48 -3776
v -2784 48 -3904
v -2816 -72 -3904
v -2816 -56 -3904
v -2816 -56 -3776
v -2816 -72 -3776
v -2816 48 -3776
v -2816 48 -3904
v -2848 -56 -3904
v -2848 -40 -3904
v -2848 -40 -3776
v -2848 -56 -3776
v -2848 48 -3776
v -2848 48 -3904
v -2880 -40 -3904
v -2880 -24 -3904
v -2880 -24 -3776
v -2880 -40 -3776
v -2880 48 -3776
v -2880 48 -3904
v -2912 -24 -3776
v -2912 48 -3776
v -2912 48 -3904
v -2912 -24 -3904
v -2240 -24 -3968
v -2240 -24 -4096
v -2368 -40 -4096
v -2368 -24 -4096
v -2368 -24 -3968
v -2368 -40 -3968
v -2264 -136 -4096
v -2264 -24 -4096
v -2344 -24 -4096
v -2344 -136 -4096
v -2344 -136 -3968
v -2344 -24 -3968
v -2264 -24 -3968
v -2264 -136 -3968
v -2688 -136 -3920
v -2688 -120 -3920
v -2632 -120 -3792
v -2632 -136 -3792
v -2368 -136 -4096
v -2672 -40 -3920
v -2672 -136 -3920
v -2616 -136 -3792
v -2616 -40 -3792
v -2368 -136 -3968
v -2720 -120 -3904
v -2688 -120 -3776
v -2632 -40.00001 -3792
v -2632 48 -3792
v -2688 48 -3920
v -2688 -40 -3920
v -1664 0 -2600
v -1664 224 -2600
v -1664 224 -2624
v -1664 0 -2624
v -1664 0 -2368
v -1664 224 -2368
v -1664 224 -2392
v -1664 0 -2392
v -2496 0 -2520
v -2496 224 -2520
v -2496 224 -2496
v -2496 0 -2496
v -2176 0 -2752
v -2176 224 -2752
v -2200 224 -2752
v -2200 0 -2752
v -2144 0 -2304
v -2144 224 -2304
v -2112 224 -2304
v -2112 0 -2304
v -2112 0 -2560
v -2112 224 -2560
v -2144 224 -2560
v -2144 0 -2560
v -704 -8 -3104
v -704 -8 -3360
v 64 104 -3136
v 64 264 -3136
v 64 264 -3328
v 64 104 -3328
v -48 104 -3392
v -48 192 -3392
v -64 192 -3392
v -64 104 -3392
v -64 104 -3072
v -64 192 -3072
v -48 192 -3072
v -48 104 -3072
v -2752 176 -2800
v -2752 -24 -2800
v -2960 -24 -2656
v -2960 176 -2656
v -3472 -48 -3520
v -3472 104 -3520
v -3448 104 -3520
v -3448 -48 -3520
v -3352 -48 -3568
v -3352 104 -3568
v -3352 104 -3592
v -3352 -48 -3592
v -3320 104 -3040
v -3320 184 -3040
v -3304 184 -3040
v -3304 104 -3040
v -3400 104 -3152
v -3400 184 -3152
v -3416 184 -3152
v -3416 104 -3152
v -2496 72 -2560
v -2496 72 -2688
v -2632 -40 -3792
v -3304 -48 -3968
v -3304 32 -3968
v -3328 32 -3968
v -3328 -48 -3968
v -3328 -48 -3744
v -3328 32 -3744
v -3304 32 -3744
v -3304 -48 -3744
v -3536 104 -3840
v -3536 184 -3840
v -3520 184 -3840
v -3520 104 -3840
v -3520 104 -3904
v -3520 184 -3904
v -3536 184 -3904
v -3536 104 -3904
v -2176 88 -2752
v -2176 32 -2752
v -1600 32 -2368
v -1600 88 -2368
v -1664 88 -2368
v -1664 32 -2368
v -2496 32 -2496
v -2496 88 -2496
v -2560 88 -2496
v -2560 32 -2496
v -1664 32 -2048
v -1664 88 -2048
v -1600 88 -2048
v -1600 32 -2048
v -2560 32 -2048
v -2560 88 -2048
v -2496 88 -2048
v -2496 32 -2048
v -2560 32 -2112
v -2560 88 -2112
v -1600 88 -2112
v -1600 32 -2112
v -1664 32 -2624
v -1664 88 -2624
v -1600 88 -2624
v -1600 32 -2624
v -1600 32 -2816
v -1600 88 -2816
v -1600 32 -2752
v -1600 88 -2752
v -1024 72 -3680
v -1024 0 -3680
v -1088 0 -3680
v -1088 72 -3680
v -3072 -24 -4608
v -3072 72 -4608
v -3072 72 -4544
v -3072 -24 -4544
v -2944 -24 -4544
v -2944 72 -4544
v -2944 72 -4608
v -2944 -24 -4608
v -1664 88 -2112
v -1664 224 -2112
v -2496 88 -2112
v -2496 224 -2112
v -1664 88 -2752
v -1664 224 -2752
v -1664 0 -2112
v -1664 32 -2112
v -2496 0 -2112
v -2496 32 -2112
v -1664 0 -2752
v -1664 32 -2752
v -2496 0 -2752
v -2496 224 -2752
v -2496 224 -2688
v -1664 72 -2432
v -1664 224 -2432
v -1664 224 -2560
v -1664 72 -2560
v -2496 224 -2560
v -1664 0 -2560
v -1664 0 -2432
v -1552 0 -2560
v -1552 72 -2560
v -1552 72 -2432
v -1552 0 -2432
v -2336 0 -2592
v -2336 224 -2592
v -2112 224 -2592
v -2112 0 -2592
v -2336 0 -2272
v -2336 224 -2272
v -2112 0 -2272
v -2112 224 -2272
v -2144 152 -2560
v -2144 152 -2304
v -2176 8 -2304
v -2176 152 -2304
v -2144 8 -2304
v -2144 8 -2560
v -2176 152 -2560
v -2176 8 -2560
v -2208 16 -2304
v -2208 152 -2304
v -2176 16 -2304
v -2176 16 -2560
v -2208 152 -2560
v -2208 16 -2560
v -2304 24 -2304
v -2304 152 -2304
v -2208 24 -2304
v -2304 24 -2560
v -2304 152 -2560
v -2208 24 -2560
v -1984 96 -2240
v -1984 224 -2240
v -1984 224 -2304
v -1984 96 -2304
v -1792 96 -2240
v -1792 224 -2240
v -1792 96 -2304
v -1792 224 -2304
v -1984 96 -2560
v -1984 224 -2560
v -1984 224 -2624
v -1984 96 -2624
v -1792 96 -2560
v -1792 224 -2560
v -1792 96 -2624
v -1792 224 -2624
v -928 -16 -3104
v -928 -16 -3360
v -320 -8 -3200
v -320 8 -3200
v -320 8 -3264
v -320 -8 -3264
v -288 8 -3200
v -288 24 -3200
v -288 24 -3264
v -288 8 -3264
v -256 24 -3200
v -256 40 -3200
v -256 40 -3264
v -256 24 -3264
v -224 40 -3200
v -224 56 -3200
v -224 56 -3264
v -224 40 -3264
v -192 56 -3200
v -192 72 -3200
v -192 72 -3264
v -192 56 -3264
v -160 72 -3200
v -160 88 -3200
v -160 88 -3264
v -160 72 -3264
v -496 -8 -3304
v -496 120 -3304
v -496 120 -3160
v -496 -8 -3160
v -496 224 -3304
v -496 224 -3160
v -496 -8 -3328
v -496 224 -3328
v -448 -8 -3456
v -448 224 -3456
v -128 -8 -3456
v -128 224 -3456
v -448 -8 -3008
v -448 224 -3008
v -128 224 -3008
v -128 -8 -3008
v -496 224 -3136
v -496 -8 -3136
v -64 224 -3072
v -128 224 -3200
v -128 192 -3200
v -64 -8 -3072
v -64 104 -3072
v -128 104 -3200
v -128 -8 -3200
v -64 -8 -3392
v -64 224 -3392
v -128 192 -3264
v -128 224 -3264
v -128 -8 -3264
v -128 104 -3264
v 64 192 -3328
v 64 192 -3136
v 640 128 -3520
v 640 264 -3520
v 640 128 -2944
v 640 264 -2944
v -128 88 -3200
v -128 104 -3264
v -128 88 -3264
v -160 -8 -3264
v -192 -8 -3264
v -224 -8 -3264
v -256 -8 -3264
v -288 -8 -3264
v -288 -8 -3200
v -256 -8 -3200
v -224 -8 -3200
v -192 -8 -3200
v -160 -8 -3200
v -320 184 -3136
v -320 224 -3136
v -256 224 -3136
v -256 184 -3136
v -320 -8 -3136
v -320 40 -3136
v -256 40 -3136
v -256 -8 -3136
v -320 184 -3072
v -320 224 -3072
v -320 -8 -3072
v -320 40 -3072
v -256 184 -3072
v -256 224 -3072
v -256 40 -3072
v -256 -8 -3072
v -320 184 -3392
v -320 224 -3392
v -256 224 -3392
v -256 184 -3392
v -320 -8 -3392
v -320 40 -3392
v -256 40 -3392
v -256 -8 -3392
v -320 184 -3328
v -320 224 -3328
v -320 -8 -3328
v -320 40 -3328
v -256 184 -3328
v -256 224 -3328
v -256 -8 -3328
v -256 40 -3328
v 208 104 -3264
v 208 128 -3264
v 240 128 -3264
v 240 104 -3264
v 192 104 -3248
v 192 128 -3248
v 192 104 -3216
v 192 128 -3216
v 208 104 -3200
v 208 128 -3200
v 240 104 -3200
v 240 128 -3200
v 256 104 -3216
v 256 128 -3216
v 256 104 -3248
v 256 128 -3248
v -2880 -24 -2880
v -2880 176 -2880
v -2880 176 -2912
v -2880 -24 -2912
v -2752 -24 -2912
v -2752 176 -2912
v -2752 176 -3048
v -2752 -24 -3048
v -3048 -24 -2880
v -3048 176 -2880
v -2752 -48 -3360
v -2752 176 -3360
v -2752 176 -3584
v -2752 -48 -3584
v -2752 -24 -3584
v -2944 176 -3648
v -2944 -24 -3648
v -3072 -24 -4000
v -3072 176 -4000
v -3072 176 -3648
v -3072 -24 -3648
v -2944 176 -3776
v -2944 -24 -3776
v -2944 -24 -3904
v -2944 176 -3904
v -2944 176 -4000
v -2944 -24 -4000
v -2944 48 -4000
v -3072 48 -4000
v -3264 -48 -3616
v -3264 176 -3616
v -3352 176 -3568
v -3408 -48 -3432
v -3408 96 -3432
v -3472 96 -3432
v -3472 -48 -3432
v -3312 -48 -3496
v -3312 96 -3496
v -3352 96 -3568
v -3472 176 -3432
v -3400 176 -3152
v -3400 -48 -3152
v -3304 176 -3040
v -3304 -48 -3040
v -3448 96 -3520
v -3328 104 -3968
v -3520 -48 -3904
v -3360 -48 -3648
v -3360 104 -3648
v -3328 104 -3744
v -3520 -48 -3584
v -3520 104 -3584
v -3520 -48 -3840
v -3448 176 -3520
v -3048 -24 -2944
v -3048 176 -2944
v -3304 -24 -3040
v -3264 -24 -3616
v -2752 176 -3112
v -2752 -48 -3112
v -2752 -48 -3048
v -3584 104 -3904
v -3584 184 -3904
v -3680 184 -3904
v -3680 104 -3904
v -3744 184 -3808
v -3744 104 -3808
v -3616 104 -3776
v -3616 184 -3776
v -3584 184 -3840
v -3584 104 -3840
v -3552 104 -3552
v -3552 184 -3552
v -3552 104 -3392
v -3552 184 -3392
v -3648 104 -3264
v -3648 184 -3264
v -3680 184 -3552
v -3680 104 -3552
v -3680 184 -3392
v -3680 104 -3392
v -3808 184 -3264
v -3808 104 -3264
v -3496 104 -3032
v -3496 184 -3032
v -3584 184 -2880
v -3584 104 -2880
v -3456 104 -3032
v -3456 184 -3032
v -3360 184 -2880
v -3360 104 -2880
v -2888 -24 -4160
v -2888 104 -4160
v -2856 104 -4160
v -2856 -24 -4160
v -2912 -24 -4160
v -2912 104 -4160
v -3128 -24 -4352
v -3128 104 -4352
v -3160 104 -4352
v -3160 -24 -4352
v -3104 -24 -4352
v -3104 104 -4352
v -3128 -24 -4160
v -3128 104 -4160
v -3104 104 -4160
v -3104 -24 -4160
v -3160 -24 -4160
v -3160 104 -4160
v -2888 -24 -4352
v -2888 104 -4352
v -2912 104 -4352
v -2912 -24 -4352
v -2856 -24 -4352
v -2856 104 -4352
v -3104 48 -4160
v -2912 48 -4160
v -2912 48 -4352
v -3104 48 -4352
v -2856 48 -4160
v -2856 48 -4352
v -3160 48 -4352
v -3160 48 -4160
v -3328 -24 -4128
v -3328 48 -4128
v -3200 48 -4128
v -3200 -24 -4128
v -2816 -24 -4128
v -2816 48 -4128
v -2688 48 -4128
v -2688 -24 -4128
v -3104 -24 -4384
v -3104 48 -4384
v -3160 -24 -4384
v -3160 48 -4384
v -2856 -24 -4384
v -2856 48 -4384
v -2912 -24 -4384
v -2912 48 -4384
v -3072 48 -4544
v -3328 48 -4544
v -3328 -24 -4544
v -2688 -24 -4544
v -2688 48 -4544
v -2944 48 -4544
v -2944 48 -4016
v -2944 -24 -4016
v -3072 -24 -4016
v -3072 48 -4016
v -2912 -24 -4128
v -2912 48 -4128
v -3104 48 -4128
v -3104 -24 -4128
v -2944 -24 -4032
v -2944 48 -4032
v -3072 48 -4032
v -3072 -24 -4032
v -3200 -48 -3744
v -3200 32 -3744
v -3200 32 -3968
v -3200 -48 -3968
v -2944 -24 -3536
v -2944 -48 -3536
v -3136 -24 -3072
v -3136 -48 -3072
v -2984 -48 -3200
v -2984 -24 -3200
v -3280 -24 -3320
v -3280 -48 -3320
v -3104 -24 -3552
v -3104 -48 -3552
v -3112 -24 -3360
v -3112 -48 -3360
v -2816 -24 -3232
v -2816 -48 -3232
v -2976 -24 -3072
v -2976 -48 -3072
v -2888 -24 -4320
v -2888 104 -4320
v -2888 -24 -4192
v -2888 104 -4192
v -3128 -24 -4320
v -3128 104 -4320
v -3128 -24 -4192
v -3128 104 -4192
v -3040 -24 -4608
v -3040 72 -4608
v -2976 72 -4608
v -2976 -24 -4608
v -2976 48 -4608
v -3040 48 -4608
v -3104 -24 -4672
v -3104 88 -4672
v -3040 88 -4672
v -3040 -24 -4672
v -2976 -24 -4672
v -2976 88 -4672
v -2912 88 -4672
v -2912 -24 -4672
v -3104 -24 -4864
v -3104 88 -4864
v -2912 -24 -4800
v -2912 88 -4800
v -2912 88 -4864
v -2912 -24 -4864
v -2912 88 -4736
v -2912 -24 -4736
v -3040 48 -4672
v -2976 48 -4672
v -2992 56 -4592
v -2992 72 -4592
v -3024 72 -4592
v -3024 56 -4592
v -3024 56 -4600
v -3024 72 -4600
v -2992 72 -4600
v -2992 56 -4600
v -2992 72 -4840
v -2992 88 -4840
v -3024 88 -4840
v -3024 72 -4840
v -3024 72 -4848
v -3024 88 -4848
v -2992 88 -4848
v -2992 72 -4848
v -2976 48 -4632
v -2976 -24 -4632
v -3040 -24 -4632
v -3040 48 -4632
v -3040 48 -4648
v -3040 -24 -4648
v -2976 -24 -4648
v -2976 48 -4648
v -1784 216 -3448
v -2128 216 -3272
v -2064 216 -3408
v -1544 216 -3384
v -1520 216 -3168
v -1672 216 -3104
v -1896 216 -3104
v -2040 216 -3144
v -2736 216 -3272
v -2736 -56 -3272
v -1984 -56 -3648
v -2240 -56 -3648
v 640 0 -2944
v 640 0 -3520
v -1784 0 -2232
v -2496 0 -2232
v -2496 0 -2272
v -1992 0 -2232
v -2496 0 -2632
v -1784 0 -2632
v -1992 0 -2312
v -1992 0 -2632
v -1784 0 -2552
v -1784 0 -2312
v -1992 0 -2552
v -1992 0 -2240
v -1792 0 -2240
v -1984 0 -2240
v -1984 0 -2304
v -1792 0 -2304
v -1792 0 -2560
v -1992 0 -2560
v -1984 0 -2560
v -1984 0 -2624
v -1792 0 -2624
v -472 -8 -3072
v 64 104 -3216
v -1784 224 -2232
v -2496 224 -2232
v -2496 224 -2272
v -1992 224 -2232
v -2496 224 -2632
v -1784 224 -2632
v -1992 224 -2312
v -1992 224 -2632
v -1784 224 -2552
v -1784 224 -2312
v -1992 224 -2552
v -1992 224 -2240
v -1992 224 -2560
v -2944 176 -3536
v -3312 176 -3496
v -3104 176 -3552
v -3280 176 -3320
v -3136 176 -3072
v -2984 176 -3200
v -3408 176 -3432
v -3112 176 -3360
v -2976 176 -3072
v -2816 176 -3232
v -3072 72 -4600
v -3104 88 -4848
v -320 224 -3264
v -320 224 -3200
v -472 224 -3072
v -288 224 -3200
v -288 224 -3264
v -256 224 -3200
v -256 224 -3264
v -224 224 -3200
v -224 224 -3264
v -192 224 -3200
v -192 224 -3264
v -160 224 -3200
v -160 224 -3264
v 192 264 -3216
v 64 264 -3216
v 208 264 -3200
v 192 264 -3248
v 240 264 -3200
v 208 264 -3264
v 256 264 -3216
v 240 264 -3264
v 256 264 -3248
v -3024 -24 -4600
v -3072 -24 -4600
v -3024 -24 -4592
v -2992 -24 -4600
v -2992 -24 -4592
v -3024 -24 -4848
v -3104 -24 -4848
v -3024 -24 -4840
v -2992 -24 -4848
v -2992 -24 -4840
vt 2 -0.625
vt 2 0
vt 0 0
vt 0 -0.625
vt 1.289063 -2.3125
vt 1.289063 -2.125
vt 0 -2.125
vt 0 -2.3125
vt 1.75 -2.3125
vt 1.75 -2.125
vt 1.164063 -2.3125
vt 1.164063 -2.125
vt 1.210937 -2.3125
vt 1.210937 -2.125
vt 1.171875 -2.3125
vt 1.171875 -2.125
vt 2.210938 -2.3125
vt 2.210938 -2.125
vt 1.9375 -2.3125
vt 1.9375 -2.125
vt 1.695312 -2.3125
vt 1.695312 -2.125
vt 1.210938 -0.625
vt 1.210938 0
vt 1.234375 -0.625
vt 1.234375 0
vt 2.453125 -0.625
vt 2.453125 0
vt 5.5 -0.9999999
vt 5.5 0
vt 0 -0.9999999
vt 1.414063 -1
vt 1.414063 0
vt 0 -1
vt 4.5 -1
vt 4.5 0
vt 2.078125 -0.6249999
vt 2.078125 0
vt 0 -0.6249999
vt 1.953125 -0.625
vt 1.953125 0
vt 0.75 -0.1875
vt 0.75 0
vt 0 -0.1875
vt 0.75 -2.125
vt 0.75 -1.625
vt 0 -1.625
vt 0.5 -2.125
vt 0.5 0
vt 1.25 -2.125
vt 1.25 0
vt 0.8984375 -2.125
vt 0.8984375 0
vt 0.5859374 -1.6875
vt 0.5859374 0
vt 0 -1.6875
vt 0.5859375 -1.125
vt 0.5859375 -0.6875
vt 0 -0.6875
vt 0 -1.125
vt 2.25 -2.125
vt 2.25 0
vt 3.875 -1.5
vt 3.875 0
vt 0 -1.5
vt 2 -1.1875
vt 0 -1.1875
vt 4.75 -1.5
vt 4.75 0
vt 0.734375 -2.125
vt 0.734375 0
vt 1.492188 -2.125
vt 1.492188 0
vt 2.375 -2.125
vt 2.375 0
vt 1.9375 -0.625
vt 1.9375 0
vt 1.9375 -1.6875
vt 0 -1.6875
vt 1 -2.125
vt 1 0
vt 0.25 -2.125
vt 0.25 0
vt 1 -1.6875
vt 1 -1.125
vt 1 -0.6875
vt 1.5 -2.125
vt 1.5 0
vt 1.5 -1.6875
vt 1.5 0
vt 1.5 -1.125
vt 1.5 -0.6875
vt 2 -1.6875
vt 2 -1.125
vt 2 -0.6875
vt 2.757813 -1.125
vt 2.757813 0
vt 2.273438 -1.125
vt 2.273438 0
vt 0.734375 -1.125
vt 1.90625 -1.125
vt 1.90625 0
vt 1 -0.5625
vt 0 -0.5625
vt 1 -0.4375
vt 0 -0.4375
vt 0.5 -1.125
vt 0.5 -0.4375
vt 0.75 -0.0625
vt 0 -0.0625
vt 0.75 -1.6875
vt 0.75 -1.5
vt 0.5 -1.6875
vt 1.03125 -1
vt 1.03125 0
vt 0.5 -0.5625
vt 1.25 -0.5625
vt 1.75 -0.5625
vt 1.75 0
vt 1.171875 -0.5625
vt 1.171875 0
vt 1.9375 -0.5625
vt 1.5 -0.5625
vt 0.25 -0.5625
vt 1 -1.5625
vt 1 -1
vt 0 -1.5625
vt 2 -0.375
vt 0 -0.375
vt 0.1875 -1
vt 0.1875 0
vt 1.335938 -1
vt 1.335938 0
vt 0.5625 -1.25
vt 0.5625 0
vt 0 -1.25
vt 1 -0.1875
vt 1 -1.25
vt 0.3125 -1.25
vt 0.3125 0
vt 0.625 -2.0625
vt 0.625 0
vt 0 -2.0625
vt 0.375 -2.0625
vt 0.375 0
vt 0.25 -2.0625
vt 1.859375 -2.0625
vt 1.859375 0
vt 1 -2.0625
vt 4 -0.25
vt 0 -0.25
vt 4 -1.4375
vt 4 -1
vt 0 -1.4375
vt 4 0
vt 2 -0.8125
vt 0 -0.8125
vt 2 -1.0625
vt 0 -1.0625
vt 1.117188 -0.75
vt 1.117188 0
vt 0 -0.75
vt 1 -0.125
vt 0 -0.125
vt 0.625 -0.75
vt 1.007813 -0.75
vt 1.007813 0
vt 0.25 -1.0625
vt 0.25 -0.9375
vt 0 -0.9375
vt 0.25 -0.8125
vt 0.25 -0.6874999
vt 0.25 0
vt 0 -0.6874999
vt 0.7890625 -0.9375
vt 0.7890625 0
vt 1 -0.375
vt 0.5624999 -0.5624999
vt 0.5624999 0
vt 0 -0.5624999
vt 0.25 -1.6875
vt 0.25 -1
vt 0.25 -1.625
vt 0.25 -0.625
vt 0.25 -0.375
vt 1.804688 -1
vt 1.804688 -0.1875
vt 1.804688 -0.0625
vt 1.804688 0
vt 0.9999999 -0.6874999
vt 0.9999999 0
vt 1.679688 -0.6875
vt 1.679688 0
vt 2.015625 -0.0625
vt 2.015625 0
vt 1.8125 -0.625
vt 1.8125 0
vt 1.109375 -0.625
vt 1.109375 0
vt 1 -0.0625
vt 0.5 -1.1875
vt 0.25 -1.1875
vt 0.625 -1
vt 0.625 -0.125
vt 1.09375 -0.125
vt 1.09375 0
vt 2.742188 -0.75
vt 2.742188 0
vt 2.375 -0.75
vt 1.03125 -0.125
vt 1.09375 -0.6875
vt 0.453125 -1.3125
vt 0.453125 0
vt 0 -1.3125
vt 0.28125 -1.3125
vt 0.28125 0
vt 0.3125 -0.75
vt 0.0625 0
vt 0.0625 -0.75
vt 0.375 -0.5625
vt 0.375 -1.75
vt 0 -1.75
vt 0.59375 -1.75
vt 0.59375 0
vt 0.09375 0
vt 0.09375 -1.75
vt 0.375 -1
vt 0.375 -1.25
vt 0.3125 -0.6874999
vt 0.06250001 -0.6874999
vt 0.3125 -1.5625
vt 0.0625 -1.5625
vt 0.375 -1.1875
vt 0.3125 -0.625
vt 0.0625 -0.625
vt 0.375 -0.875
vt 0.375 -0.25
vt 0 -0.875
vt 0.375 -0.125
vt 0.375 -0.625
vt 2 -0.25
vt 2 -0.75
vt 1 -1.0625
vt 3.25 -1.0625
vt 3.25 0
vt 1.5 -1.0625
vt 0.5 -1.0625
vt 8 -0.25
vt 8 0
vt 26 -0.25
vt 26 0
vt 12 -0.25
vt 12 0
vt 16 -0.25
vt 16 0
vt 1 -2
vt 1 -0.25
vt 0 -2
vt 2 -1.4375
vt 0.625 -2
vt 0.625 -0.25
vt 4.625 -2
vt 4.625 -0.25
vt 1.75 -1
vt 1.75 -0.4375
vt 1.75 -1.75
vt 2.5 -1.75
vt 2.5 0
vt 0.25 -1.75
vt 2 -0.5625
vt 0.25 -1.125
vt 0.75 -1.125
vt 0.75 -1.0625
vt 0.75 -1
vt 2 -1
vt 8 -1
vt 1.5 -1
vt 3.25 -1
vt 0.5 -1
vt 1 -0.8571429
vt 0 -0.8571429
vt 0.9999999 -0.9999999
vt 0.9999999 -0.3125
vt 0 -0.3125
vt 4.125 -1
vt 4.125 0
vt 8 -0.5
vt 0 -0.5
vt 1.125 -1.8125
vt 1.125 -1
vt 0 -1.8125
vt 0.1875 -1.8125
vt 0.1875 0
vt 0 -1.8125
vt 1.070313 -1.8125
vt 1.070313 0
vt 2.5 -1.8125
vt 1.117188 -0.25
vt 1.117187 -1.8125
vt 1.117187 -0.9375
vt 0.7109375 -1.8125
vt 0.7109375 0
vt 5.59375 -1.0625
vt 5.59375 0
vt 4.5 -1.0625
vt 1.007813 -0.6875
vt 0.5 -0.25
vt 0.5 -0.9375
vt 0.5 -1.8125
vt 0.5 -1.3125
vt 0.5 -1.4375
vt 0.5 -1.5625
vt 0.5 -0.3125
vt 0.5 -0.375
vt 0.5 -0.0625
vt 1 -1.875
vt 1 -1.5
vt 0 -1.875
vt 0.3125 -1.0625
vt 0.0625 -1.0625
vt 0.0625 -1.25
vt 0.2421875 -1.25
vt 0.2421875 -1.0625
vt 2.125 -1.5625
vt 2.125 0
vt 2.359375 -1.5625
vt 2.359375 0
vt 3.765625 -1.5625
vt 3.765625 0
vt 2 -1.5625
vt 3.5 -1.75
vt 3.5 0
vt 3.15625 -1.5625
vt 3.15625 0
vt 5.5 -1.5625
vt 5.5 0
vt 1.5 -1.5625
vt 1.5625 -1.75
vt 1.5625 0
vt 1 -1.375
vt 0 -1.375
vt 1.796875 -1.375
vt 1.796875 -0.25
vt 1.28125 -1.375
vt 1.28125 -0.25
vt 4.515625 -1.75
vt 4.515625 0
vt 2.3125 -1
vt 2.3125 -0.4375
vt 2.3125 -1.75
vt 2.3125 -0.5625
vt 1.671875 -1.125
vt 1.671875 0
vt 3.15625 -1.1875
vt 1.578125 -1.1875
vt 1.578125 0
vt 3.5 -0.5625
vt 1.25 -1.1875
vt 0.890625 -1.1875
vt 0.890625 0
vt 4 -1.1875
vt 1 -1.1875
vt 1.421875 -0.625
vt 1.421875 0
vt 1.671875 -0.5625
vt 4.265625 -1.5625
vt 4.265625 0
vt 0 -1.5625
vt 3.046875 -1.5625
vt 3.046875 0
vt 3.875 -0.3125
vt 3.875 -1.75
vt 3.875 -1.375
vt 1 -1.75
vt 1.5 -0.625
vt 1.796875 -0.625
vt 1.796875 0
vt 1.125 -0.625
vt 1.125 0
vt 3.640625 -0.625
vt 3.640625 0
vt 2.5 -0.625
vt 4.125 -0.6249999
vt 4.125 0
vt 2.828125 -0.625
vt 2.828125 0
vt 4.328125 -0.6249999
vt 4.328125 0
vt 6.953125 -0.625
vt 6.953125 0
vt 0.625 -0.625
vt 3.5 -0.625
vt 2.3125 -0.0625
vt 2.3125 0
vt 2.578125 -0.625
vt 2.578125 0
vt 1.96875 -0.625
vt 1.96875 0
vt 3 -0.4375
vt 3 0
vt 0.7968749 -0.5624999
vt 0.7968749 0
vt 0.875 -0.5625
vt 0.875 0
vt 4 -0.5625
vt 6.5 -0.5625
vt 6.5 0
vt 2 -0.1875
vt 1.578125 -0.5625
vt 1.625 -0.625
vt 1.625 0
vt 1 -0.625
vt 0.75 -0.625
vt 3.09375 -1
vt 3.09375 0
vt 2.671875 -1
vt 2.671875 0
vt 4.984375 -1
vt 4.984375 0
vt 3.109375 -0.9999999
vt 3.109375 0
vt 4.546875 -1
vt 4.546875 0
vt 2.6875 -1
vt 2.6875 0
vt 3.796875 -1
vt 3.796875 0
vt 5.03125 -0.9999999
vt 5.03125 0
vt 3.53125 -1
vt 3.53125 0
vt 3.515625 -1
vt 3.515625 0
vt 0.5 -0.75
vt 3 -1
vt 3 -0.125
vt 0.875 -1
vt 0.6875 0
vt 0.6875 -1
vt 27.875 -53.875
vt 32.25 -53.25
vt 33.25 -51.125
vt 24.125 -52.875
vt 23.75 -49.5
vt 26.125 -48.5
vt 29.625 -48.5
vt 31.875 -49.125
vt 43 -52.5
vt 43 -56
vt 46 -55.25
vt 51 -56.5
vt 52.375 -55.75
vt 51.75 -54.625
vt 48.5 -55.5
vt 51.25 -51.875
vt 49 -48
vt 46.625 -50
vt 51.625 -47.5
vt 53.125 -49.25
vt 54.25 -53.625
vt 53.25 -53.625
vt 48.625 -52.5
vt 44 -50.5
vt 46.5 -48
vt 43 -47.625
vt 21.5 -57
vt 42.75 -51.125
vt 42.75 -57
vt 23 -45
vt 21.5 -46
vt 30 -45.625
vt 29 -45
vt 35.5 -47
vt 35 -45.625
vt 38 -48.625
vt 42.75 -48.625
vt 23.875 -57.5
vt 31 -59
vt 26.125 -58.5
vt 31 -57
vt 31.5 -57.5
vt 34.5 -57.5
vt 35 -57
vt 35 -59
vt -12 -55
vt 1 -57
vt -10 -57
vt -10 -44
vt -12 -46
vt -10 -46
vt 1 -44
vt -10 -55
vt 1 -55
vt 1 -46
vt -1.5 -48.75
vt -5.25 -48.75
vt -5.25 -52.25
vt -1.5 -52.25
vt 38.875 -58.5
vt 32 -57.5
vt 32 -59
vt 34 -59
vt 34 -57.5
vt 34 -45.625
vt 34 -44
vt 26 -44
vt 26 -45
vt 21 -53
vt 21 -55
vt 21.5 -55
vt 21.5 -53
vt 26 -43
vt 34 -43
vt 27.875 -34.875
vt 39 -34.875
vt 39 -33
vt 39 -35.5
vt 31.125 -34.875
vt 33 -35.5
vt 33.5 -40
vt 33.5 -36
vt 33 -36
vt 33 -40
vt 36.5 -35.5
vt 36.5 -40.5
vt 39 -41.125
vt 39 -43
vt 27.875 -41.125
vt 26 -33
vt 31.125 -36.125
vt 33 -40.5
vt 31.125 -41.125
vt 27.875 -39.875
vt 27.875 -36.125
vt 31.125 -39.875
vt 31.125 -35
vt 28 -35
vt 31 -35
vt 31 -36
vt 28 -36
vt 28 -40
vt 31.125 -40
vt 31 -40
vt 31 -41
vt 28 -41
vt 26 -38
vt 24.25 -38
vt 24.25 -40
vt 26 -40
vt 19 -45
vt 21 -45
vt 21.625 -40.5
vt 19.5 -39.5
vt 23 -38
vt 23 -40
vt 24 -40
vt 24 -38
vt 15 -57
vt 18 -57
vt 20 -55.5
vt 13 -55.5
vt 11 -46
vt 11 -55.5
vt 13 -46
vt 15.125 -45
vt 21 -48.5
vt 19 -48
vt 21 -55.5
vt 21 -52.5
vt 19 -53
vt 14 -48
vt 14 -53
vt 17 -57
vt 16 -57
vt 16 -57.5
vt 17 -57.5
vt 10.625 -52.5
vt 11 -52.5
vt 11 -48.5
vt 8 -52
vt 8 -51.625
vt 7.75 -49.375
vt 7.75 -51.625
vt 8 -49.375
vt 10.625 -48.5
vt 8 -49
vt 4 -52
vt 7.75 -52
vt 7.75 -49
vt 5 -52
vt 5 -53
vt 7 -54
vt 1 -53
vt 2 -54
vt 5 -51
vt 2 -51
vt 1 -48
vt 2 -50
vt 5 -50
vt 7 -47
vt 2 -47
vt 4 -48
vt 7.375 -48
vt 5 -48
vt 5 -49
vt 4 -53
vt 4 -49
vt 4.5 -50
vt 4.5 -51
vt 4 -50
vt 4 -51
vt 3.5 -50
vt 3.5 -51
vt 3 -50
vt 3 -51
vt 2.5 -50
vt 2.5 -51
vt -3 -50.25
vt -1 -50.25
vt -1 -49
vt -3.25 -50
vt -3 -50.75
vt -1 -52
vt -4 -52
vt -5 -49.5
vt -5 -51.5
vt -4 -49
vt -3.75 -50
vt -3.25 -51
vt -4 -50.25
vt -3.75 -51
vt -4 -50.75
vt 0.75 -53
vt 0.75 -48
vt 43 -40
vt 41 -43.5
vt 43 -43.5
vt 46 -41.5
vt 52 -58.5
vt 52 -62
vt 55 -61
vt 52.5 -57
vt 52.375 -56.125
vt 53.875 -55
vt 54.25 -55
vt 55 -56
vt 57.5 -61
vt 58.5 -59.5
vt 57.5 -55.5
vt 56 -61
vt 56.5 -59
vt 56 -60
vt 55.5 -53
vt 55.5 -55.5
vt 57 -51
vt 53.375 -49.25
vt 54 -47.375
vt 51.875 -47.5
vt 56 -45
vt 52.5 -45
vt 57.5 -53
vt 59.5 -51
vt 54.625 -47.375
vt 39.375 -42
vt 39 -40
vt 39 -42
vt 50 -58.5
vt 50 -62
vt 55 -60
vt 39 -39
vt 40 -32
vt 40 -39
vt 25 -37
vt 26 -37
vt 25 -32
vt 25 -44
vt 25 -41
vt 26 -41
vt 21.5 -51
vt 21 -51
vt 21.5 -52.5
vt 21.5 -48.5
vt 21 -50
vt 21.5 -50
vt 45.5 -59
vt 46 -59
vt 46 -61
vt 45.5 -61
vt -4 -48.75
vt -2 -49
vt -2 -48.75
vt -5.25 -49.5
vt -5.25 -51.5
vt -4 -52.25
vt -2 -52.25
vt -2 -52
vt 43 -48.625
vt 42.75 -52.5
vt 46.5 -72.625
vt 46.5 -72.375
vt 47.5 -72.375
vt 47.5 -72.625
vt 46 -63
vt 46 -62.75
vt 48 -62.75
vt 48 -63
vt 32 -61.25
vt 33 -63
vt 35 -64
vt 32 -61
vt 34 -61.25
vt 34 -61
vt 35 -62
vt 32 -60.5
vt 34 -60.5
vt 32 -60
vt 34 -60
vt 32 -59.5
vt 34 -59.5
vt 42 -59
vt 42.5 -61
vt 43 -61
vt 43 -59
vt 43.5 -61
vt 43.5 -59
vt 44 -61
vt 44 -59
vt 44.5 -61
vt 44.5 -59
vt 45 -61
vt 45 -59
vt 37 -64
vt 37 -62
vt 41.75 -61.25
vt 40.875 -59.25
vt 41.125 -59.25
vt 42 -61.25
vt 19 -52.5
vt 14.5 -48.5
vt 14.5 -52.5
vt 19 -48.5
vt 14.5 -53
vt 18.5 -52.5
vt 18.5 -53
vt 18.5 -48
vt 18.5 -48.5
vt 14.5 -48
vt 14 -48.5
vt 14 -52.5
vt 45 -45.5
vt 43 -45.5
vt 45 -45
vt 43 -43.75
vt 46.25 -41.5
vt 47.625 -45
vt 46 -62.5
vt 48 -57
vt 48 -62.5
vt 46 -57
vt 47.625 -46
vt 44 -64.5
vt 42 -71
vt 42 -64.5
vt 44.625 -65
vt 44.625 -68.5
vt 48.5 -68
vt 45.5 -68.5
vt 45.5 -68
vt 48.5 -68.5
vt 50 -64.5
vt 49.375 -68.5
vt 49.375 -65
vt 52 -64.5
vt 52 -71
vt 47.25 -71.875
vt 48 -71
vt 48 -71.875
vt 47.25 -71.75
vt 48 -72
vt 46.75 -71.875
vt 46 -72
vt 46 -71
vt 46.75 -71.75
vt 46.5 -72
vt 47.5 -72
vt 46.5 -73
vt 47.5 -73
vt 45.5 -65
vt 48.5 -64.5
vt 48.5 -65
vt 45.5 -64.5
vt 34 -36
vt 34 -40
vt 34.5 -36
vt 34.5 -40
vt 36 -36
vt 36 -40
vt 49.375 -68
vt 44.625 -68
vt 47.25 -75.75
vt 48.5 -73
vt 48.5 -75.75
vt 47.25 -75.625
vt 48.5 -76
vt 46.75 -75.75
vt 45.5 -76
vt 45.5 -73
vt 46.75 -75.625
mtllib doom_E1M1.mtl
usemtl Default
f 1/1/1 2/2/1 3/3/1 4/4/1
f 5/1/2 6/2/2 7/3/2 8/4/2
usemtl BROWN144
f 9/5/3 10/6/3 11/7/3 12/8/3
f 13/9/4 14/10/4 10/7/4 9/8/4
f 15/11/5 16/12/5 14/7/5 13/8/5
f 17/13/6 18/14/6 16/7/6 15/8/6
f 19/15/7 20/16/7 18/7/7 17/8/7
f 21/17/8 22/18/8 20/7/8 19/8/8
f 23/19/9 24/20/9 22/7/9 21/8/9
f 12/21/10 11/22/10 24/7/10 23/8/10
f 25/23/11 26/24/11 27/3/11 28/4/11
f 28/25/12 27/26/12 29/3/12 30/4/12
f 30/27/13 29/28/13 4/3/13 31/4/13
f 32/29/14 33/30/14 34/3/14 35/31/14
f 36/32/15 37/33/15 33/3/15 32/34/15
f 38/35/1 39/36/1 37/3/1 36/34/1
f 40/32/16 41/33/16 39/3/16 38/34/16
f 42/29/4 43/30/4 41/3/4 40/31/4
f 44/37/17 45/38/17 46/3/17 47/39/17
f 48/40/18 5/41/18 45/3/18 44/4/18
usemtl STARTAN3
f 49/42/1 50/43/1 51/3/1 52/44/1
f 53/45/1 54/46/1 55/47/1 56/7/1
f 57/42/1 58/43/1 59/3/1 60/44/1
f 61/45/1 62/46/1 63/47/1 64/7/1
f 56/48/1 51/49/1 58/3/1 61/7/1
f 65/50/1 66/51/1 50/3/1 53/7/1
f 67/52/19 68/53/19 66/3/19 65/7/19
f 69/54/20 70/55/20 71/3/20 72/56/20
f 73/57/20 69/58/20 72/59/20 74/60/20
f 47/61/2 75/62/2 76/3/2 77/7/2
f 8/63/14 78/64/14 75/3/14 46/65/14
f 2/66/14 79/2/14 78/3/14 7/67/14
f 26/68/14 80/69/14 79/3/14 1/65/14
f 81/70/21 82/71/21 83/3/21 84/7/21
f 85/72/22 86/73/22 82/3/22 81/7/22
f 87/74/4 88/75/4 86/3/4 85/7/4
f 89/76/2 76/77/2 88/3/2 90/4/2
f 77/20/2 91/78/2 92/79/2 87/7/2
f 93/80/1 94/81/1 80/3/1 25/7/1
f 64/82/1 59/83/1 95/3/1 96/7/1
f 97/84/1 95/81/1 94/3/1 98/79/1
f 96/85/1 97/86/1 98/59/1 93/60/1
f 99/87/4 100/88/4 68/3/4 67/7/4
f 72/89/4 71/90/4 100/3/4 101/56/4
f 74/91/4 72/92/4 101/59/4 99/60/4
f 102/93/4 103/2/4 70/3/4 69/79/4
f 104/94/4 102/95/4 69/59/4 73/60/4
f 84/48/4 83/49/4 103/3/4 104/7/4
f 105/96/23 106/97/23 107/3/23 108/60/23
f 109/98/24 110/99/24 111/3/24 112/60/24
f 112/100/25 111/71/25 113/3/25 114/60/25
f 115/101/26 116/102/26 106/3/26 105/60/26
f 117/103/14 107/81/14 110/3/14 118/104/14
f 119/105/2 113/81/2 116/3/2 120/106/2
f 114/107/14 119/108/14 121/106/14 122/60/14
f 123/107/4 124/108/4 120/106/4 115/60/4
f 125/109/2 126/43/2 127/3/2 128/110/2
f 129/111/2 130/112/2 131/65/2 132/79/2
f 132/113/2 127/49/2 133/3/2 134/79/2
f 135/109/2 133/43/2 136/3/2 137/110/2
f 134/111/2 138/112/2 139/65/2 140/79/2
f 141/114/27 142/115/27 126/3/27 143/34/27
f 144/114/28 136/115/28 145/3/28 146/34/28
f 147/1/4 148/2/4 149/3/4 150/4/4
f 151/1/14 152/2/14 153/3/14 154/4/14
f 150/1/1 149/2/1 152/3/1 151/4/1
f 155/116/14 156/49/14 157/3/14 158/104/14
f 159/116/14 160/49/14 161/3/14 162/104/14
f 158/117/29 157/51/29 163/3/29 164/104/29
f 165/117/30 166/51/30 160/3/30 159/104/30
f 164/116/14 163/49/14 167/3/14 168/104/14
f 169/103/14 170/81/14 166/3/14 165/104/14
f 171/118/2 144/119/2 118/3/2 109/104/2
f 172/103/4 173/81/4 174/3/4 175/104/4
f 176/120/31 177/121/31 173/3/31 172/104/31
f 108/122/4 117/77/4 177/3/4 176/104/4
f 178/123/1 179/88/1 170/3/1 169/104/1
f 175/117/1 174/51/1 180/3/1 181/104/1
f 182/124/2 183/83/2 143/3/2 184/104/2
f 168/124/2 167/83/2 185/3/2 186/104/2
f 186/125/2 185/126/2 183/34/2 182/127/2
f 179/128/2 187/2/2 188/3/2 180/129/2
f 189/130/1 190/131/1 191/3/1 192/34/1
f 193/130/1 194/131/1 195/3/1 196/34/1
f 197/132/32 198/133/32 194/3/32 193/34/32
f 192/132/33 191/133/33 199/3/33 200/34/33
f 201/134/34 202/135/34 203/3/34 204/136/34
f 205/134/35 206/135/35 207/3/35 208/136/35
f 209/137/14 203/81/14 210/3/14 211/44/14
f 204/138/14 212/126/14 213/34/14 214/136/14
f 215/137/4 216/81/4 206/3/4 217/44/4
f 218/138/4 219/126/4 220/34/4 205/136/4
f 221/137/1 207/81/1 202/3/1 222/44/1
f 208/138/1 223/126/1 224/34/1 201/136/1
f 225/139/4 226/140/4 216/3/4 218/136/4
f 214/139/14 210/140/14 227/3/14 228/136/14
f 229/141/36 230/142/36 231/3/36 232/143/36
f 233/144/2 234/145/2 230/3/2 229/143/2
f 235/144/2 236/145/2 237/3/2 238/143/2
f 239/141/37 240/142/37 236/3/37 235/143/37
f 241/146/4 242/83/4 243/3/4 244/143/4
f 245/147/38 246/148/38 242/3/38 241/143/38
f 247/146/14 248/83/14 249/3/14 250/143/14
f 250/147/39 249/148/39 251/3/39 252/143/39
f 253/137/4 243/81/4 240/3/4 254/44/4
f 244/149/4 255/126/4 256/34/4 239/143/4
f 257/137/14 231/81/14 248/3/14 258/44/14
f 232/149/14 259/126/14 260/34/14 247/143/14
f 261/137/2 237/81/2 234/3/2 262/44/2
f 238/149/2 263/126/2 264/34/2 233/143/2
f 252/149/2 251/81/2 265/3/2 42/143/2
f 35/149/2 266/81/2 246/3/2 245/143/2
usemtl COMPUTE3
f 267/150/40 267/150/40 268/151/40 268/151/40
f 269/152/14 270/153/14 271/34/14 272/154/14
usemtl DOORSTOP
f 62/152/4 57/155/4 128/3/4 131/154/4
f 130/152/14 125/155/14 60/3/14 63/154/14
f 138/152/14 135/155/14 52/3/14 55/154/14
f 54/152/4 49/155/4 137/3/4 139/154/4
f 219/156/2 215/2/2 258/3/2 260/157/2
f 259/156/1 257/2/1 217/3/1 220/157/1
f 263/156/14 261/2/14 222/3/14 224/157/14
f 223/156/4 221/2/4 262/3/4 264/157/4
f 212/156/1 209/2/1 254/3/1 256/157/1
f 255/156/2 253/2/2 211/3/2 213/157/2
f 91/158/14 89/2/14 273/3/14 274/159/14
f 275/158/4 276/2/4 90/3/4 92/159/4
usemtl BROWN1
f 277/160/41 278/161/41 279/3/41 280/162/41
f 281/163/4 282/81/4 283/3/4 284/164/4
f 285/165/42 286/142/42 287/3/42 288/162/42
f 289/166/43 290/167/43 278/3/43 277/162/43
f 291/168/1 292/83/1 293/3/1 283/159/1
f 282/168/2 294/83/2 295/3/2 296/159/2
f 296/163/4 297/81/4 298/3/4 291/164/4
f 299/105/14 293/81/14 294/3/14 300/106/14
f 301/169/1 302/83/1 292/3/1 298/170/1
f 297/169/2 295/83/2 303/3/2 304/170/2
f 304/163/4 305/81/4 306/3/4 301/164/4
f 305/171/2 303/83/2 307/3/2 308/157/2
f 309/171/1 310/83/1 302/3/1 306/157/1
f 308/163/4 311/81/4 312/3/4 309/164/4
f 311/172/2 307/173/2 313/3/2 314/174/2
f 315/172/1 316/173/1 310/3/1 312/174/1
f 314/163/4 317/81/4 318/3/4 315/164/4
f 319/175/44 320/176/44 6/3/44 48/170/44
f 321/169/14 322/83/14 320/3/14 319/170/14
f 31/175/45 3/176/45 323/3/45 324/170/45
f 324/169/14 323/83/14 325/3/14 326/170/14
f 327/177/14 325/81/14 322/3/14 328/129/14
f 317/178/2 313/179/2 329/3/2 330/180/2
f 331/178/1 332/179/1 316/3/1 318/180/1
f 333/181/1 334/83/1 142/3/1 335/79/1
f 336/181/14 153/83/14 334/3/14 333/79/14
f 337/181/4 338/83/4 148/3/4 339/79/4
f 340/181/1 145/83/1 338/3/1 337/79/1
f 341/182/1 151/83/1 342/3/1 343/34/1
f 344/182/14 345/83/14 151/3/14 341/34/14
f 346/183/2 347/184/2 154/4/2 348/47/2
f 349/182/4 150/83/4 350/3/4 351/34/4
f 352/182/1 353/83/1 150/3/1 349/34/1
f 354/183/2 147/184/2 355/4/2 356/47/2
f 357/169/4 358/185/4 359/129/4 360/170/4
f 360/169/2 359/185/2 361/129/2 362/170/2
f 363/124/4 141/83/4 364/3/4 365/104/4
f 366/169/2 367/185/2 368/129/2 369/170/2
f 369/169/14 368/185/14 370/129/14 371/170/14
f 372/124/14 373/83/14 146/3/14 374/104/14
f 375/186/46 376/187/46 377/44/46 378/34/46
f 379/188/46 380/189/46 381/3/46 382/110/46
f 383/190/14 384/191/14 378/3/14 381/174/14
f 380/192/47 375/193/47 385/3/47 386/59/47
f 386/194/48 387/195/48 388/3/48 383/110/48
f 387/196/4 385/197/4 389/3/4 390/4/4
f 391/198/49 392/199/49 384/3/49 388/4/49
f 393/200/1 394/81/1 395/3/1 396/110/1
f 397/163/2 398/81/2 399/3/2 400/164/2
f 400/201/4 401/49/4 402/3/4 403/67/4
f 404/202/14 405/83/14 406/3/14 397/67/14
f 407/163/2 408/81/2 409/3/2 410/164/2
f 410/168/4 411/83/4 401/3/4 399/159/4
f 398/168/14 406/83/14 412/3/14 407/159/14
f 413/163/2 414/81/2 415/3/2 416/164/2
f 416/169/4 417/83/4 411/3/4 409/170/4
f 408/169/14 412/83/14 418/3/14 413/170/14
f 419/163/2 420/81/2 421/3/2 422/164/2
f 422/171/4 423/83/4 417/3/4 415/157/4
f 414/171/14 418/83/14 424/3/14 419/157/14
f 425/163/2 426/81/2 427/3/2 428/164/2
f 428/172/4 429/173/4 423/3/4 421/174/4
f 420/172/14 424/173/14 430/3/14 425/174/14
f 431/124/4 432/83/4 429/3/4 427/104/4
f 426/124/14 430/83/14 433/3/14 434/104/14
f 286/163/1 435/81/1 436/3/1 279/164/1
f 437/163/2 438/81/2 439/3/2 440/164/2
f 441/203/14 442/204/14 443/164/14 444/34/14
f 445/203/4 446/204/4 447/164/4 448/34/4
f 449/205/50 450/206/50 451/3/50 452/164/50
f 453/207/51 437/208/51 454/3/51 455/162/51
f 456/209/52 457/75/52 440/3/52 458/162/52
f 459/210/53 404/115/53 403/3/53 460/164/53
f 461/211/54 462/206/54 463/3/54 464/59/54
f 460/212/55 402/213/55 462/3/55 451/214/55
f 450/215/56 463/216/56 405/3/56 459/214/56
usemtl SUPPORT2
f 288/217/2 287/140/2 300/218/2 281/219/2
f 284/217/1 299/140/1 290/218/1 289/219/1
f 330/220/2 329/145/2 328/3/2 321/104/2
f 326/220/1 327/145/1 332/3/1 331/104/1
f 465/221/1 466/145/1 467/3/1 468/222/1
f 469/221/1 470/145/1 471/3/1 472/222/1
f 473/221/2 474/145/2 475/3/2 476/222/2
f 477/221/14 478/145/14 479/3/14 480/222/14
f 481/223/4 482/224/4 483/225/4 484/226/4
f 485/223/14 486/224/14 487/225/14 488/226/14
f 489/227/4 188/145/4 198/3/4 197/34/4
f 200/227/14 199/145/14 187/3/14 490/34/14
f 491/228/4 492/145/4 226/3/4 225/136/4
f 228/228/14 227/145/14 493/3/14 494/136/14
f 495/229/14 496/140/14 497/218/14 498/230/14
f 499/229/4 500/140/4 501/218/4 502/230/4
f 382/231/1 377/140/1 503/218/1 504/232/1
f 505/231/4 506/140/4 376/218/4 379/232/4
f 507/233/4 508/145/4 509/3/4 510/67/4
f 511/233/1 512/145/1 513/3/1 514/67/1
f 515/234/4 516/140/4 517/218/4 518/235/4
f 519/234/14 520/140/14 521/218/14 522/235/14
f 390/236/4 389/237/4 523/151/4 393/238/4
f 396/236/14 524/237/14 392/151/14 391/238/14
f 444/227/14 443/239/14 438/164/14 453/34/14
f 280/227/14 436/239/14 442/164/14 441/34/14
f 448/227/4 447/239/4 435/164/4 285/34/4
f 458/227/4 439/239/4 446/164/4 445/34/4
f 455/217/14 454/140/14 464/218/14 449/219/14
f 452/217/4 525/140/4 457/218/4 456/219/4
f 526/240/14 527/145/14 528/3/14 529/4/14
f 530/240/4 531/145/4 532/3/4 533/4/4
f 534/234/4 535/140/4 536/218/4 537/235/4
f 538/234/14 539/140/14 540/218/14 541/235/14
usemtl LITE3
f 272/95/2 271/241/2 542/151/2 543/59/2
f 544/95/14 545/241/14 546/151/14 547/59/14
f 548/95/14 549/241/14 550/151/14 551/59/14
f 552/95/4 553/241/4 554/151/4 555/59/4
f 556/95/4 557/241/4 558/151/4 559/59/4
f 560/95/2 561/241/2 557/151/2 556/59/2
f 555/95/1 554/241/1 562/151/1 563/59/1
f 564/95/4 565/241/4 566/151/4 567/59/4
f 568/95/14 569/241/14 270/151/14 269/59/14
f 570/95/1 571/241/1 569/151/1 568/59/1
f 162/103/1 161/81/1 572/3/1 573/104/1
f 574/103/2 575/81/2 156/3/2 155/104/2
f 576/242/2 577/2/2 578/3/2 579/162/2
f 580/242/1 581/2/1 582/3/1 583/162/1
usemtl COMPTALL
f 584/243/1 585/81/1 470/3/1 546/159/1
f 586/244/4 587/245/4 585/3/4 584/159/4
f 549/246/2 475/88/2 587/3/2 586/159/2
f 588/158/14 589/2/14 478/3/14 542/159/14
f 565/247/1 467/49/1 589/3/1 588/159/1
usemtl COMPSPAN
f 590/248/1 591/249/1 547/3/1 469/151/1
f 592/250/4 593/251/4 591/3/4 590/151/4
f 476/252/2 548/253/2 593/3/2 592/151/2
f 594/254/14 595/255/14 543/3/14 477/151/14
f 468/150/1 564/155/1 595/3/1 594/151/1
usemtl STARGR1
f 596/256/2 597/257/2 598/151/2 395/258/2
f 599/259/1 600/241/1 601/151/1 602/154/1
f 524/259/2 598/241/2 603/151/2 523/154/2
f 604/260/1 601/261/1 466/151/1 465/258/1
f 472/260/1 471/261/1 600/151/1 605/258/1
f 394/260/2 603/261/2 474/151/2 473/258/2
f 480/262/14 479/263/14 597/151/14 596/258/14
f 606/264/14 607/265/14 602/106/14 604/34/14
f 605/264/4 599/265/4 608/106/4 609/34/4
usemtl COMPTILE
f 610/266/4 611/119/4 612/3/4 613/222/4
f 614/267/1 615/268/1 611/3/1 610/222/1
f 616/266/14 617/119/14 615/3/14 614/222/14
f 484/269/2 483/83/2 617/3/2 616/222/2
f 613/269/2 612/83/2 486/3/2 485/222/2
f 618/270/2 487/2/2 482/3/2 619/104/2
f 620/271/4 621/83/4 619/3/4 622/60/4
f 623/85/14 618/81/14 624/43/14 625/272/14
f 626/243/4 627/81/4 621/43/4 628/273/4
f 629/168/14 624/83/14 630/3/14 631/159/14
f 632/274/4 633/43/4 627/3/4 634/34/4
f 635/275/2 636/2/2 633/3/2 632/34/2
f 637/274/14 630/43/14 636/3/14 635/34/14
usemtl STEP1
f 488/276/2 623/249/2 622/3/2 481/34/2
f 625/276/2 629/249/2 628/3/2 620/34/2
f 631/276/2 637/249/2 634/3/2 626/34/2
usemtl PLANET1
f 638/182/1 639/83/1 640/3/1 641/34/1
f 642/274/14 643/43/14 639/3/14 638/34/14
f 644/182/2 645/83/2 643/3/2 642/34/2
f 641/274/4 640/43/4 645/3/4 644/34/4
f 646/182/1 647/83/1 648/3/1 649/34/1
f 650/274/14 651/43/14 647/3/14 646/34/14
f 652/182/2 653/83/2 651/3/2 650/34/2
f 649/274/4 648/43/4 653/3/4 652/34/4
usemtl COMPUTE2
f 563/126/1 562/81/1 545/3/1 544/34/1
f 551/277/2 550/88/2 561/3/2 560/34/2
f 559/278/4 558/245/4 553/3/4 552/34/4
f 567/279/1 566/49/1 571/3/1 570/34/1
f 358/280/14 342/81/14 347/3/14 364/281/14
f 367/280/1 350/81/1 345/3/1 361/281/1
f 373/280/4 355/81/4 353/3/4 370/281/4
usemtl BIGDOOR2
f 609/126/1 608/105/1 607/106/1 606/34/1
f 122/282/2 121/283/2 124/284/2 123/31/2
usemtl STEP6
f 335/285/27 363/286/27 184/3/27 129/34/27
f 140/285/28 171/286/28 374/3/28 340/34/28
f 339/287/4 354/249/4 349/3/4 654/288/4
f 655/287/14 341/249/14 348/3/14 336/288/14
f 654/287/1 349/249/1 341/3/1 655/288/1
f 343/287/14 357/249/14 365/3/14 346/288/14
f 351/287/1 366/249/1 362/3/1 344/288/1
f 356/287/4 372/249/4 371/3/4 352/288/4
f 490/287/2 178/249/2 181/3/2 489/288/2
f 656/275/1 657/2/1 658/3/1 659/34/1
f 660/275/1 661/2/1 662/3/1 663/34/1
f 664/275/1 665/2/1 666/3/1 667/34/1
f 668/275/1 669/2/1 670/3/1 671/34/1
f 672/275/1 673/2/1 674/3/1 675/34/1
f 676/275/1 677/2/1 678/3/1 679/34/1
usemtl DOOR3
f 573/126/14 572/81/14 575/3/14 574/34/14
usemtl DOORTRAK
f 680/275/14 681/2/14 190/3/14 189/34/14
f 196/275/4 195/2/4 682/3/4 683/34/4
usemtl STARG3
f 681/289/2 684/290/2 685/34/2 682/291/2
f 686/292/2 687/293/2 684/3/2 680/294/2
f 688/295/57 689/296/57 687/3/57 686/291/57
f 690/297/14 691/268/14 689/3/14 688/291/14
f 692/297/4 693/268/4 694/3/4 695/291/4
f 683/292/2 685/293/2 696/3/2 697/294/2
f 697/295/58 696/296/58 693/3/58 692/291/58
f 500/298/59 698/161/59 699/3/59 700/151/59
f 701/299/60 702/300/60 703/170/60 704/291/60
f 695/301/61 694/302/61 698/3/61 701/291/61
f 705/301/62 706/302/62 691/3/62 690/291/62
f 707/298/63 708/161/63 706/3/63 497/151/63
f 709/299/64 710/300/64 498/170/64 705/291/64
f 711/123/2 493/88/2 492/3/2 712/104/2
f 713/303/65 714/304/65 266/3/65 34/159/65
f 715/305/1 716/36/1 714/3/1 713/159/1
f 43/303/66 265/304/66 716/3/66 715/159/66
f 494/306/67 711/167/67 496/3/67 495/59/67
f 502/306/68 501/167/68 712/3/68 491/59/68
f 700/307/1 699/49/1 708/3/1 707/151/1
f 717/247/1 703/308/1 718/170/1 719/159/1
usemtl SLADWALL
f 720/309/4 678/247/4 719/159/4 709/291/4
f 721/309/4 674/201/4 679/67/4 720/291/4
f 722/309/4 670/310/4 675/214/4 721/291/4
f 723/309/4 666/311/4 671/154/4 722/291/4
f 724/309/4 662/312/4 667/127/4 723/291/4
f 659/309/4 658/113/4 663/79/4 724/291/4
f 725/309/14 660/113/14 657/79/14 656/291/14
f 726/309/14 664/312/14 661/127/14 725/291/14
f 727/309/14 668/311/14 665/154/14 726/291/14
f 728/309/14 672/310/14 669/214/14 727/291/14
f 729/309/14 676/201/14 673/67/14 728/291/14
f 704/309/14 717/247/14 677/159/14 729/291/14
usemtl TEKWALL4
f 730/313/4 731/49/4 732/3/4 733/284/4
f 734/309/4 735/311/4 736/154/4 737/291/4
f 738/313/1 739/49/1 731/3/1 730/284/1
f 740/309/1 741/311/1 735/154/1 734/291/1
f 742/314/14 743/315/14 739/110/14 738/129/14
f 733/313/2 732/49/2 743/3/2 742/284/2
f 737/309/2 736/311/2 744/154/2 745/291/2
f 746/313/4 747/49/4 748/3/4 749/284/4
f 750/309/4 751/311/4 752/154/4 753/291/4
f 754/313/1 755/49/1 747/3/1 746/284/1
f 756/309/1 757/311/1 751/154/1 750/291/1
f 758/313/14 759/49/14 755/3/14 754/284/14
f 760/309/14 761/311/14 757/154/14 756/291/14
f 749/313/2 748/49/2 759/3/2 758/284/2
f 753/309/2 752/311/2 761/154/2 760/291/2
usemtl SW1COMP
f 745/316/14 744/317/14 741/65/14 740/318/14
usemtl TEKWALL1
f 762/139/4 763/319/4 764/320/4 765/321/4
f 766/322/61 767/323/61 763/320/61 762/321/61
f 768/139/1 769/319/1 767/320/1 766/321/1
f 770/322/62 771/323/62 769/320/62 768/321/62
f 772/139/14 773/319/14 771/320/14 770/321/14
f 774/322/69 775/323/69 773/320/69 772/321/69
f 776/139/2 777/319/2 775/320/2 774/321/2
f 765/322/70 764/323/70 777/320/70 776/321/70
usemtl BROWNGRN
f 778/312/1 779/49/1 780/3/1 781/127/1
f 782/324/71 783/325/71 784/3/71 785/127/71
f 504/326/72 503/327/72 779/3/72 778/127/72
f 786/328/73 787/329/73 506/3/73 505/127/73
f 781/330/4 780/2/4 783/3/4 782/127/4
f 788/331/1 789/332/1 790/3/1 791/222/1
f 792/333/74 790/334/74 793/3/74 794/127/74
f 795/335/2 796/336/2 797/3/2 798/127/2
f 794/330/1 793/2/1 799/3/1 800/127/1
f 801/337/1 802/88/1 803/3/1 804/127/1
f 805/275/14 803/2/14 796/3/14 806/34/14
f 807/338/75 808/339/75 809/3/75 511/222/75
f 810/340/14 811/257/14 812/151/14 813/341/14
f 814/342/76 815/343/76 811/151/76 810/341/76
f 511/344/77 816/345/77 815/151/77 814/341/77
f 813/346/78 817/347/78 818/3/78 819/222/78
f 519/348/79 818/349/79 820/106/79 518/34/79
f 819/350/79 519/351/79 518/104/79 821/222/79
f 510/352/80 822/353/80 816/3/80 511/60/80
f 529/354/81 823/334/81 538/3/81 824/67/81
f 825/355/82 826/356/82 827/3/82 530/67/82
f 531/357/1 827/332/1 823/3/1 528/104/1
f 828/358/83 829/51/83 508/3/83 507/67/83
f 514/359/84 513/360/84 826/3/84 825/67/84
f 830/361/2 537/155/2 829/3/2 828/67/2
f 824/362/2 538/81/2 537/3/2 830/67/2
f 822/363/85 831/364/85 817/3/85 812/4/85
f 512/365/56 809/353/56 831/3/56 509/104/56
f 832/125/2 833/81/2 787/3/2 786/127/2
f 834/366/86 820/367/86 833/3/86 832/368/86
f 798/369/87 797/370/87 808/3/87 835/127/87
f 276/371/1 836/64/1 789/3/1 273/284/1
f 837/372/1 275/373/1 274/341/1 788/222/1
f 838/374/1 784/81/1 836/3/1 837/222/1
f 839/375/14 840/88/14 841/3/14 842/4/14
f 842/376/88 841/377/88 843/3/88 844/4/88
f 845/378/89 846/379/89 847/3/89 848/4/89
f 849/380/90 850/381/90 846/3/90 845/4/90
f 851/382/1 852/268/1 850/3/1 849/4/1
f 853/382/91 854/268/91 852/3/91 851/4/91
f 844/383/92 843/384/92 855/3/92 856/39/92
f 856/382/2 855/268/2 857/3/2 858/4/2
f 858/385/69 857/386/69 859/3/69 860/4/69
f 861/387/93 862/388/93 854/3/93 853/39/93
f 860/389/94 859/390/94 863/3/94 864/4/94
f 865/391/14 866/142/14 862/3/14 861/4/14
f 864/392/4 863/332/4 867/3/4 868/4/4
f 820/393/95 517/394/95 520/3/95 818/110/95
f 868/395/96 867/396/96 516/3/96 515/4/96
f 522/397/97 521/398/97 866/3/97 865/4/97
f 869/279/4 870/49/4 871/3/4 872/34/4
f 873/227/4 874/145/4 870/3/4 869/34/4
f 875/279/14 876/49/14 877/3/14 878/34/14
f 879/227/14 880/145/14 876/3/14 875/34/14
f 881/227/4 882/145/4 883/3/4 884/34/4
f 885/279/4 886/49/4 882/3/4 881/34/4
f 887/227/14 888/145/14 889/3/14 890/34/14
f 891/279/14 892/49/14 888/3/14 887/34/14
f 893/399/4 883/400/4 874/3/4 894/106/4
f 895/399/14 889/400/14 880/3/14 896/106/14
f 897/399/1 871/400/1 892/3/1 898/106/1
f 899/399/2 877/400/2 886/3/2 900/106/2
f 901/270/4 902/2/4 903/3/4 904/104/4
f 905/270/4 906/2/4 907/3/4 908/104/4
f 872/401/98 897/402/98 906/3/98 905/180/98
f 904/401/99 903/402/99 900/3/99 885/180/99
f 909/116/2 910/49/2 896/3/2 879/104/2
f 911/403/4 912/404/4 910/3/4 909/104/4
f 878/116/1 899/49/1 912/3/1 911/104/1
f 913/116/2 914/49/2 898/3/2 891/104/2
f 915/403/4 916/404/4 914/3/4 913/104/4
f 890/116/1 895/49/1 916/3/1 915/104/1
f 579/405/14 917/155/14 918/3/14 919/104/14
f 920/405/14 921/155/14 922/3/14 580/104/14
f 908/406/1 907/407/1 921/3/1 920/104/1
f 919/406/2 918/407/2 902/3/2 901/104/2
f 917/408/4 578/2/4 581/3/4 922/44/4
f 804/124/1 805/83/1 923/3/1 924/104/1
f 925/124/2 926/83/2 806/3/2 795/104/2
f 927/116/1 928/49/1 894/3/1 873/104/1
f 884/116/2 893/49/2 929/3/2 930/104/2
f 931/409/100 932/356/100 928/3/100 927/104/100
f 930/409/101 929/356/101 933/3/101 934/104/101
f 935/392/1 936/332/1 937/3/1 938/4/1
f 938/410/14 937/411/14 527/3/14 526/4/14
f 533/410/4 532/411/4 936/3/4 935/4/4
f 537/412/1 536/81/1 539/3/1 538/4/1
f 848/413/4 847/43/4 535/3/4 534/4/4
f 541/413/14 540/43/14 840/3/14 839/4/14
usemtl NUKE24
f 791/414/102 792/415/102 939/3/102 940/34/102
f 821/416/32 834/417/32 941/3/32 942/34/32
f 943/418/103 944/419/103 945/3/103 946/34/103
f 942/420/104 941/421/104 944/3/104 943/31/104
f 946/422/105 945/423/105 947/3/105 948/34/105
f 948/424/106 947/425/106 835/3/106 807/34/106
f 940/426/107 939/427/107 949/3/107 950/34/107
f 950/428/108 949/429/108 951/3/108 952/31/108
f 952/430/109 951/431/109 953/3/109 954/34/109
f 954/432/110 953/433/110 785/3/110 838/34/110
usemtl BROWN96
f 800/125/1 799/81/1 802/3/1 801/127/1
f 434/126/2 433/105/2 432/106/2 431/34/2
usemtl BRNBIGL
f 955/126/1 956/81/1 888/3/1 887/34/1
f 957/126/2 958/81/2 870/3/2 869/34/2
f 959/126/1 960/81/1 876/3/1 875/34/1
f 961/126/2 962/81/2 882/3/2 881/34/2
usemtl BRNBIGR
f 887/126/2 888/81/2 956/3/2 955/34/2
f 869/126/1 870/81/1 958/3/1 957/34/1
f 875/126/2 876/81/2 960/3/2 959/34/2
f 881/126/1 882/81/1 962/3/1 961/34/1
usemtl BRNBIGC
f 957/126/1 958/81/1 956/3/1 955/34/1
f 955/126/2 956/81/2 958/3/2 957/34/2
f 959/126/2 960/81/2 962/3/2 961/34/2
f 961/126/1 962/81/1 960/3/1 959/34/1
usemtl STARTAN1
f 963/434/14 964/49/14 577/3/14 576/162/14
f 583/434/14 582/49/14 965/3/14 966/162/14
f 967/137/14 965/81/14 964/3/14 968/44/14
f 969/126/4 970/163/4 971/164/4 972/34/4
f 973/126/4 974/163/4 975/164/4 976/34/4
f 977/435/2 978/436/2 970/164/2 969/34/2
f 979/126/1 980/163/1 981/164/1 982/34/1
f 976/126/1 975/163/1 983/164/1 984/34/1
f 982/435/14 981/436/14 978/164/14 977/34/14
f 985/105/4 971/163/4 974/164/4 986/106/4
usemtl EXITSIGN
f 987/279/14 988/49/14 989/3/14 990/34/14
f 991/279/4 992/49/4 993/3/4 994/34/4
f 990/203/1 989/142/1 992/49/1 991/279/1
f 994/203/2 993/142/2 988/49/2 987/279/2
f 995/279/14 996/49/14 997/3/14 998/34/14
f 999/279/4 1000/49/4 1001/3/4 1002/34/4
f 998/203/1 997/142/1 1000/49/1 999/279/1
f 1002/203/2 1001/142/2 996/49/2 995/279/2
usemtl EXITDOOR
f 966/437/1 967/404/1 1003/438/1 1004/439/1
f 1005/439/2 1006/438/2 968/49/2 963/279/2
f 1004/279/14 1003/49/14 1006/3/14 1005/34/14
f 972/437/2 985/404/2 1007/438/2 1008/439/2
f 1009/439/1 1010/438/1 986/49/1 973/279/1
f 1008/279/4 1007/49/4 1010/3/4 1009/34/4
usemtl SW1STRTN
f 984/126/1 983/163/1 980/164/1 979/34/1
usemtl BIGDOOR4
f 924/126/14 923/105/14 926/106/14 925/34/14
f 934/126/4 933/105/4 932/106/4 931/34/4
usemtl Default
usemtl NUKAGE3
f 21/440/111 19/441/111 17/442/111
f 23/443/111 21/440/111 17/442/111
f 12/444/111 23/443/111 17/442/111
f 9/445/111 12/444/111 17/442/111
f 13/446/111 9/445/111 17/442/111
f 15/447/111 13/446/111 17/442/111
f 788/448/111 791/449/111 940/450/111
f 807/451/111 511/452/111 814/453/111
f 948/454/111 807/451/111 814/453/111
f 946/455/111 948/454/111 814/453/111
f 942/456/111 943/457/111 946/455/111
f 821/458/111 942/456/111 946/455/111
f 819/459/111 821/458/111 946/455/111
f 813/460/111 819/459/111 946/455/111
f 810/461/111 813/460/111 946/455/111
f 946/455/111 814/453/111 810/461/111
f 788/448/111 940/450/111 950/462/111
f 952/463/111 954/464/111 838/465/111
f 788/448/111 950/462/111 952/463/111
f 952/463/111 838/465/111 788/448/111
usemtl F_SKY1
f 1011/440/112 1012/442/112 1013/441/112
f 1014/443/112 1012/442/112 1011/440/112
f 1015/444/112 1012/442/112 1014/443/112
f 1016/445/112 1012/442/112 1015/444/112
f 1017/446/112 1012/442/112 1016/445/112
f 1018/447/112 1012/442/112 1017/446/112
f 80/466/113 1019/467/113 75/468/113
f 68/469/112 80/466/112 66/470/112
f 70/471/112 68/469/112 71/472/112
f 82/473/113 70/471/113 83/474/113
f 1019/467/112 86/475/112 88/476/112
f 1012/442/112 86/475/112 1019/467/112
f 1018/447/112 86/475/112 1012/442/112
f 1019/467/112 1013/441/112 1012/442/112
f 82/473/112 68/469/112 70/471/112
f 86/475/113 68/469/113 82/473/113
f 1018/447/112 68/469/112 86/475/112
f 1017/446/112 68/469/112 1018/447/112
f 80/466/112 1013/441/112 1019/467/112
f 1016/445/112 68/469/112 1017/446/112
f 80/466/112 1011/440/112 1013/441/112
f 1015/444/112 68/469/112 1016/445/112
f 80/466/112 1014/443/112 1011/440/112
f 1015/444/112 80/466/112 68/469/112
f 1014/443/112 80/466/112 1015/444/112
f 27/477/112 4/478/112 29/479/112
f 1/480/112 27/477/112 26/466/112
f 27/477/112 1/480/112 4/478/112
f 2/480/112 323/481/112 3/478/112
f 320/482/112 7/483/112 6/484/112
f 2/480/112 320/482/112 323/481/112
f 7/483/112 320/482/112 2/480/112
f 37/485/112 34/486/112 33/487/112
f 41/488/112 37/485/112 39/489/112
f 715/490/112 41/488/112 43/491/112
f 37/485/112 713/492/112 34/486/112
f 715/490/112 37/485/112 41/488/112
f 713/492/112 37/485/112 715/490/112
f 714/492/112 246/493/112 266/486/112
f 251/494/112 716/490/112 265/491/112
f 249/495/113 716/490/113 251/494/113
f 230/496/113 716/490/113 249/495/113
f 246/493/113 236/497/113 242/498/113
f 714/492/113 236/497/113 246/493/113
f 230/496/112 714/492/112 716/490/112
f 236/497/112 714/492/112 230/496/112
f 5/484/112 8/483/112 46/468/112 45/499/112
usemtl FLOOR71
f 25/466/114 47/468/114 1020/467/114
f 67/469/111 65/470/111 25/466/111
f 73/471/111 74/472/111 67/469/111
f 81/473/114 84/474/114 73/471/114
f 1020/467/111 87/476/111 85/475/111
f 18/442/111 1020/467/111 85/475/111
f 16/447/111 18/442/111 85/475/111
f 1020/467/111 18/442/111 20/441/111
f 81/473/111 73/471/111 67/469/111
f 85/475/114 81/473/114 67/469/114
f 16/447/111 85/475/111 67/469/111
f 14/446/111 16/447/111 67/469/111
f 25/466/111 1020/467/111 20/441/111
f 10/445/111 14/446/111 67/469/111
f 25/466/111 20/441/111 22/440/111
f 11/444/111 10/445/111 67/469/111
f 25/466/111 22/440/111 24/443/111
f 11/444/111 67/469/111 25/466/111
f 24/443/111 11/444/111 25/466/111
f 28/477/111 30/479/111 31/478/111
f 1021/480/111 25/466/111 28/477/111
f 28/477/111 31/478/111 1021/480/111
f 1021/480/111 31/478/111 324/481/111
f 319/482/111 48/484/111 1022/483/111
f 1021/480/111 324/481/111 319/482/111
f 1022/483/111 1021/480/111 319/482/111
f 326/500/111 318/501/111 317/502/111 321/503/111
f 36/485/111 32/487/111 35/486/111
f 40/488/111 38/489/111 36/485/111
f 1023/490/111 42/491/111 40/488/111
f 36/485/111 35/486/111 1024/492/111
f 1023/490/111 40/488/111 36/485/111
f 1024/492/111 1023/490/111 36/485/111
f 1024/492/111 35/486/111 245/493/111
f 252/494/111 42/491/111 1023/490/111
f 250/495/114 252/494/114 1023/490/114
f 229/496/114 250/495/114 1023/490/114
f 245/493/114 241/498/114 235/497/114
f 1024/492/114 245/493/114 235/497/114
f 229/496/111 1023/490/111 1024/492/111
f 235/497/111 229/496/111 1024/492/111
f 1022/483/111 48/484/111 44/499/111 47/468/111
usemtl FLOOR48
f 69/471/111 102/504/111 267/505/111
f 72/472/111 69/471/111 267/505/111
f 268/506/111 101/507/111 72/472/111
f 267/505/111 268/506/111 72/472/111
f 182/508/111 186/509/111 98/510/111 97/511/111
f 595/512/111 269/506/111 272/505/111 543/513/111
f 1025/514/111 1026/515/111 592/516/111
f 1027/517/111 1026/515/111 1028/518/111
f 616/519/111 1027/517/111 1028/518/111
f 488/520/111 481/521/111 484/522/111
f 485/523/111 488/520/111 484/522/111
f 1027/517/111 614/524/111 610/525/111
f 1029/526/111 1027/517/111 610/525/111
f 596/527/111 1029/526/111 1030/528/111
f 594/512/111 596/527/111 1030/528/111
f 1025/514/111 592/516/111 590/529/111
f 616/519/111 1028/518/111 1031/530/111
f 484/522/111 616/519/111 1031/530/111
f 485/523/111 484/522/111 1031/530/111
f 613/531/111 485/523/111 1031/530/111
f 1029/526/111 610/525/111 613/531/111
f 1032/532/111 1029/526/111 613/531/111
f 594/512/111 1030/528/111 1033/533/111
f 590/529/111 594/512/111 1033/533/111
f 1034/534/111 1025/514/111 590/529/111
f 613/531/111 1031/530/111 1034/534/111
f 1035/535/111 1032/532/111 613/531/111
f 1034/534/111 590/529/111 1033/533/111
f 1035/535/111 613/531/111 1034/534/111
f 1034/534/111 1033/533/111 1035/535/111
f 1036/536/111 1028/518/111 1025/514/111
f 1037/537/111 1036/536/111 1025/514/111
f 1036/536/111 1038/538/111 1039/539/111
f 1031/530/111 1036/536/111 1039/539/111
f 1037/537/111 1025/514/111 1034/534/111
f 1040/540/111 1037/537/111 1034/534/111
f 1031/530/111 1039/539/111 1040/540/111
f 1034/534/111 1031/530/111 1040/540/111
f 1038/538/111 1037/537/111 1040/540/111 1039/539/111
f 1041/541/111 1042/542/111 1035/535/111
f 1042/542/111 1043/543/111 1044/544/111
f 1032/532/111 1042/542/111 1044/544/111
f 1041/541/111 1035/535/111 1033/533/111
f 1032/532/111 1044/544/111 1045/545/111
f 1030/528/111 1032/532/111 1045/545/111
f 1041/541/111 1033/533/111 1030/528/111
f 1045/545/111 1041/541/111 1030/528/111
f 1043/543/111 1041/541/111 1045/545/111 1044/544/111
f 605/546/111 609/547/111 606/548/111 604/549/111
f 108/550/111 109/551/111 112/552/111
f 105/553/111 108/550/111 112/552/111
f 115/554/114 105/553/114 112/552/114
f 114/555/111 115/554/111 112/552/111
f 115/554/111 114/555/111 122/556/111 123/557/111
f 609/547/111 123/557/111 122/556/111 606/548/111
f 159/558/111 158/559/111 164/560/111
f 165/561/111 159/558/111 164/560/111
f 175/562/111 169/563/111 165/561/111
f 172/564/111 175/562/111 165/561/111
f 109/551/114 176/565/114 172/564/114
f 171/566/111 109/551/111 172/564/111
f 374/567/111 171/566/111 172/564/111
f 168/568/111 184/569/111 363/570/111
f 164/560/111 168/568/111 363/570/111
f 165/561/111 164/560/111 363/570/111
f 369/571/111 374/567/111 172/564/111
f 165/561/111 363/570/111 360/572/111
f 369/571/111 172/564/111 165/561/111
f 360/572/111 369/571/111 165/561/111
f 155/573/111 162/574/111 573/575/111 574/576/111
f 200/577/111 490/578/111 489/579/111
f 192/580/111 200/577/111 489/579/111
f 189/581/111 192/580/111 489/579/111
f 683/582/111 680/583/111 189/581/111
f 196/584/111 683/582/111 189/581/111
f 197/585/111 193/586/111 196/584/111
f 489/579/111 197/585/111 196/584/111
f 189/581/111 489/579/111 196/584/111
f 760/587/111 686/588/111 697/589/111
f 686/588/111 756/590/111 750/591/111
f 688/592/111 686/588/111 750/591/111
f 705/593/111 690/594/111 688/592/111
f 659/595/111 709/596/111 705/593/111
f 701/597/111 704/598/111 656/599/111
f 692/600/111 695/601/111 701/597/111
f 745/602/111 1046/603/111 692/600/111
f 1046/603/111 740/604/111 734/605/111
f 697/589/111 1046/603/111 734/605/111
f 688/592/111 750/591/111 753/606/111
f 745/602/111 692/600/111 701/597/111
f 705/593/111 688/592/111 753/606/111
f 737/607/111 745/602/111 701/597/111
f 705/593/111 753/606/111 760/587/111
f 737/607/111 701/597/111 656/599/111
f 659/595/111 705/593/111 760/587/111
f 697/589/111 737/607/111 656/599/111
f 659/595/111 760/587/111 697/589/111
f 697/589/111 656/599/111 659/595/111
f 657/599/111 660/608/111 663/609/111 658/595/111
f 661/608/111 664/610/111 667/611/111 662/609/111
f 665/610/111 668/612/111 671/613/111 666/611/111
f 669/612/111 672/614/111 675/615/111 670/613/111
f 673/614/111 676/616/111 679/617/111 674/615/111
f 768/618/111 1047/619/111 491/620/111
f 770/621/111 768/618/111 491/620/111
f 1047/619/111 768/618/111 766/622/111
f 494/623/111 1047/619/111 766/622/111
f 204/624/111 494/623/111 766/622/111
f 208/625/111 201/626/111 204/624/111
f 491/620/111 205/627/111 208/625/111
f 770/621/111 491/620/111 208/625/111
f 772/628/111 770/621/111 208/625/111
f 204/624/111 766/622/111 762/629/111
f 774/630/111 772/628/111 208/625/111
f 204/624/111 762/629/111 765/631/111
f 776/632/111 774/630/111 208/625/111
f 204/624/111 765/631/111 776/632/111
f 776/632/111 208/625/111 204/624/111
f 495/633/111 498/593/111 718/596/111
f 494/623/111 495/633/111 718/596/111
f 491/620/111 494/623/111 718/596/111
f 502/634/111 491/620/111 718/596/111
f 499/597/111 502/634/111 718/596/111
f 703/598/111 499/597/111 718/596/111
f 677/616/111 717/598/111 719/596/111 678/617/111
f 386/635/111 383/636/111 381/637/111 380/638/111
f 530/639/111 529/640/111 824/641/111
f 825/642/111 530/639/111 824/641/111
f 511/452/111 514/643/111 825/642/111
f 510/644/111 511/452/111 825/642/111
f 507/645/111 510/644/111 825/642/111
f 828/646/111 507/645/111 825/642/111
f 824/641/111 828/646/111 825/642/111
f 816/452/111 822/644/111 812/460/111
f 815/453/114 816/452/114 812/460/114
f 811/461/111 815/453/111 812/460/111
f 842/647/111 844/648/111 856/649/111
f 839/650/111 842/647/111 856/649/111
f 845/651/111 848/652/111 839/650/111
f 851/653/111 849/654/111 845/651/111
f 853/655/111 851/653/111 845/651/111
f 519/459/111 522/656/111 865/657/111
f 515/658/111 518/458/111 519/459/111
f 864/659/111 868/660/111 515/658/111
f 858/661/111 860/662/111 864/659/111
f 845/651/111 839/650/111 856/649/111
f 515/658/111 519/459/111 865/657/111
f 845/651/111 856/649/111 858/661/111
f 853/655/111 845/651/111 858/661/111
f 864/659/114 515/658/114 865/657/114
f 853/655/111 858/661/111 864/659/111
f 864/659/111 865/657/111 861/663/111
f 861/663/111 853/655/111 864/659/111
f 391/664/111 388/636/111 387/635/111
f 393/665/111 396/666/111 391/664/111
f 387/635/111 393/665/111 391/664/111
f 530/639/111 935/667/111 938/668/111 529/640/111
f 537/669/111 538/641/111 839/650/111 848/652/111
usemtl CEIL51
f 69/471/112 267/505/112 102/504/112
f 72/472/112 267/505/112 69/471/112
f 268/506/112 72/472/112 101/507/112
f 267/505/112 72/472/112 268/506/112
f 270/506/112 588/512/112 542/513/112 271/505/112
f 549/670/112 557/671/112 550/672/112
f 586/516/112 557/671/112 549/670/112
f 545/673/112 584/529/112 546/674/112
f 554/675/112 584/529/112 545/673/112
f 586/516/112 554/675/112 557/671/112
f 584/529/112 554/675/112 586/516/112
f 569/676/112 566/677/112 565/678/112 270/506/112
usemtl FLAT55
f 62/679/111 131/680/111 130/569/111 63/681/111
f 128/680/112 57/679/112 60/681/112 125/569/112
f 54/682/111 139/566/111 138/683/111 55/684/111
f 137/566/112 49/682/112 52/684/112 135/683/112
f 431/685/112 800/686/112 801/687/112 434/688/112
usemtl FLAT20
f 186/509/112 182/508/112 97/511/112 98/510/112
f 123/557/112 609/547/112 606/548/112 122/556/112
f 259/689/111 220/627/111 219/690/111 260/691/111
f 217/627/112 257/689/112 258/691/112 215/690/112
f 223/625/111 264/692/111 263/693/111 224/626/111
f 262/692/112 221/625/112 222/626/112 261/693/112
f 212/624/111 256/694/111 255/695/111 213/696/111
f 254/694/112 209/624/112 211/696/112 253/695/112
f 275/697/111 92/476/111 91/698/111 274/448/111
f 90/476/112 276/697/112 273/448/112 89/698/112
f 1009/699/112 1004/700/112 1005/701/112 1008/702/112
f 931/703/112 924/704/112 925/705/112 934/706/112
usemtl FLOOR51
f 289/707/111 277/708/111 280/709/111
f 284/710/111 289/707/111 280/709/111
f 288/711/111 281/712/111 284/710/111
f 280/709/111 285/713/111 288/711/111
f 284/710/111 280/709/111 288/711/111
f 291/714/111 283/710/111 282/712/111 296/715/111
f 301/716/111 298/714/111 297/715/111 304/717/111
f 309/718/111 306/716/111 305/717/111 308/719/111
f 315/501/111 312/718/111 311/719/111 314/502/111
f 403/720/111 404/721/111 397/722/111 400/723/111
f 399/723/111 398/722/111 407/724/111 410/725/111
f 409/725/111 408/724/111 413/726/111 416/727/111
f 415/727/111 414/726/111 419/728/111 422/729/111
f 421/729/111 420/728/111 425/730/111 428/731/111
f 285/713/111 280/709/111 453/732/111 458/733/111
f 458/733/111 453/732/111 455/734/111
f 456/735/111 458/733/111 455/734/111
f 452/736/111 456/735/111 455/734/111
f 449/737/111 452/736/111 455/734/111
f 460/720/111 451/736/111 450/737/111 459/721/111
usemtl CEIL52
f 290/707/112 279/709/112 278/708/112
f 299/710/112 279/709/112 290/707/112
f 287/711/112 299/710/112 300/712/112
f 279/709/112 287/711/112 286/713/112
f 299/710/112 287/711/112 279/709/112
f 293/710/112 292/714/112 295/715/112 294/712/112
f 292/714/112 302/716/112 303/717/112 295/715/112
f 302/716/112 310/718/112 307/719/112 303/717/112
f 310/718/112 316/501/112 313/502/112 307/719/112
f 316/501/112 327/500/112 328/503/112 313/502/112
f 405/721/112 402/720/112 401/723/112 406/722/112
f 406/722/112 401/723/112 411/725/112 412/724/112
f 412/724/112 411/725/112 417/727/112 418/726/112
f 418/726/112 417/727/112 423/729/112 424/728/112
f 424/728/112 423/729/112 429/731/112 430/730/112
f 430/730/112 429/731/112 432/685/112 433/688/112
f 440/733/112 454/734/112 437/732/112
f 457/735/112 454/734/112 440/733/112
f 525/736/112 454/734/112 457/735/112
f 464/737/112 454/734/112 525/736/112
f 462/736/112 402/720/112 405/721/112 463/737/112
usemtl CEIL35
f 1048/514/112 587/516/112 1049/515/112
f 1050/517/112 1051/518/112 1049/515/112
f 617/519/112 1051/518/112 1050/517/112
f 487/520/112 483/522/112 482/521/112
f 486/523/112 483/522/112 487/520/112
f 1050/517/112 611/525/112 615/524/112
f 1052/526/112 611/525/112 1050/517/112
f 597/527/112 1053/528/112 1052/526/112
f 589/512/112 1053/528/112 597/527/112
f 1048/514/112 585/529/112 587/516/112
f 617/519/112 1054/530/112 1051/518/112
f 483/522/112 1054/530/112 617/519/112
f 486/523/112 1054/530/112 483/522/112
f 612/531/112 1054/530/112 486/523/112
f 1052/526/112 612/531/112 611/525/112
f 1055/532/112 612/531/112 1052/526/112
f 589/512/112 1056/533/112 1053/528/112
f 585/529/112 1056/533/112 589/512/112
f 1057/534/112 585/529/112 1048/514/112
f 612/531/112 1057/534/112 1054/530/112
f 1058/535/112 612/531/112 1055/532/112
f 1057/534/112 1056/533/112 585/529/112
f 1058/535/112 1057/534/112 612/531/112
f 1057/534/112 1058/535/112 1056/533/112
f 1059/536/112 1048/514/112 1051/518/112
f 643/537/112 1048/514/112 1059/536/112
f 1059/536/112 640/539/112 639/538/112
f 1054/530/112 640/539/112 1059/536/112
f 643/537/112 1057/534/112 1048/514/112
f 645/540/112 1057/534/112 643/537/112
f 1054/530/112 645/540/112 640/539/112
f 1057/534/112 645/540/112 1054/530/112
f 651/541/112 1058/535/112 1060/542/112
f 1060/542/112 648/544/112 647/543/112
f 1055/532/112 648/544/112 1060/542/112
f 651/541/112 1056/533/112 1058/535/112
f 1055/532/112 653/545/112 648/544/112
f 1053/528/112 653/545/112 1055/532/112
f 651/541/112 1053/528/112 1056/533/112
f 653/545/112 1053/528/112 651/541/112
f 608/547/112 599/546/112 602/549/112 607/548/112
f 107/550/112 111/552/112 110/551/112
f 106/553/112 111/552/112 107/550/112
f 116/554/113 111/552/113 106/553/113
f 113/555/112 111/552/112 116/554/112
f 142/570/112 136/566/112 126/569/112
f 334/738/112 136/566/112 142/570/112
f 149/739/112 334/738/112 152/740/112
f 338/741/112 334/738/112 149/739/112
f 136/566/112 338/741/112 145/567/112
f 338/741/112 136/566/112 334/738/112
f 342/742/112 154/743/112 347/744/112
f 151/740/112 154/743/112 342/742/112
f 150/739/112 355/745/112 147/746/112
f 353/747/112 355/745/112 150/739/112
f 350/748/112 151/740/112 345/749/112
f 150/739/112 151/740/112 350/748/112
f 160/558/112 163/560/112 157/559/112
f 166/561/112 163/560/112 160/558/112
f 174/562/112 166/561/112 170/563/112
f 173/564/112 166/561/112 174/562/112
f 118/551/113 173/564/113 177/565/113
f 144/566/112 173/564/112 118/551/112
f 146/567/112 173/564/112 144/566/112
f 167/568/112 141/570/112 143/569/112
f 163/560/112 141/570/112 167/568/112
f 166/561/112 141/570/112 163/560/112
f 368/571/112 173/564/112 146/567/112
f 166/561/112 359/572/112 141/570/112
f 368/571/112 166/561/112 173/564/112
f 359/572/112 166/561/112 368/571/112
f 161/574/112 156/573/112 575/576/112 572/575/112
f 199/577/112 188/579/112 187/578/112
f 191/580/112 188/579/112 199/577/112
f 190/581/112 188/579/112 191/580/112
f 682/582/112 190/581/112 681/583/112
f 195/584/112 190/581/112 682/582/112
f 198/585/112 195/584/112 194/586/112
f 188/579/112 195/584/112 198/585/112
f 190/581/112 195/584/112 188/579/112
f 780/750/112 784/465/112 783/751/112
f 377/637/112 779/752/112 503/753/112
f 376/638/112 779/752/112 377/637/112
f 506/754/112 779/752/112 376/638/112
f 787/755/112 779/752/112 506/754/112
f 780/750/113 787/755/113 784/465/113
f 787/755/112 780/750/112 779/752/112
f 384/636/112 385/635/112 375/638/112 378/637/112
f 789/448/112 1061/450/112 790/449/112
f 803/756/112 797/757/112 796/758/112
f 793/759/112 797/757/112 803/756/112
f 1061/450/112 793/759/112 790/449/112
f 797/757/112 793/759/112 1061/450/112
f 808/451/112 1062/453/112 809/452/112
f 1063/454/112 1062/453/112 808/451/112
f 1064/455/112 1062/453/112 1063/454/112
f 1065/456/112 1064/455/112 1066/457/112
f 820/458/112 1064/455/112 1065/456/112
f 818/459/112 1064/455/112 820/458/112
f 817/460/112 1064/455/112 818/459/112
f 1067/461/112 1064/455/112 817/460/112
f 1064/455/112 1067/461/112 1062/453/112
f 809/452/112 817/460/112 831/644/112
f 1062/453/113 817/460/113 809/452/113
f 1067/461/112 817/460/112 1062/453/112
f 797/757/112 1063/454/112 808/451/112
f 1061/450/112 1063/454/112 797/757/112
f 1068/462/112 1063/454/112 1061/450/112
f 787/755/112 1069/464/112 784/465/112
f 833/760/112 1069/464/112 787/755/112
f 1065/456/112 833/760/112 820/458/112
f 1068/462/112 1064/455/112 1063/454/112
f 1065/456/112 1069/464/112 833/760/112
f 1066/457/112 1069/464/112 1065/456/112
f 1068/462/112 1066/457/112 1064/455/112
f 1070/463/113 1066/457/113 1068/462/113
f 1066/457/112 1070/463/112 1069/464/112
f 789/448/112 1068/462/112 1061/450/112
f 1070/463/112 784/465/112 1069/464/112
f 789/448/112 1070/463/112 1068/462/112
f 1070/463/112 789/448/112 784/465/112
f 392/664/112 385/635/112 384/636/112
f 523/665/112 392/664/112 524/666/112
f 385/635/112 392/664/112 523/665/112
f 906/761/112 921/762/112 907/763/112
f 897/764/112 921/762/112 906/761/112
f 914/765/112 921/762/112 897/764/112
f 896/766/112 916/767/112 895/768/112
f 910/769/112 916/767/112 896/766/112
f 903/770/112 912/771/112 900/772/112
f 902/773/112 912/771/112 903/770/112
f 918/774/112 912/771/112 902/773/112
f 914/765/112 918/774/112 921/762/112
f 916/767/112 918/774/112 914/765/112
f 910/769/112 918/774/112 916/767/112
f 912/771/112 918/774/112 910/769/112
f 992/775/112 578/776/112 1071/777/112
f 989/778/112 578/776/112 992/775/112
f 577/779/112 993/780/112 1071/777/112
f 582/781/112 993/780/112 577/779/112
f 578/776/112 582/781/112 581/782/112
f 988/783/112 578/776/112 989/778/112
f 582/781/112 988/783/112 993/780/112
f 988/783/112 582/781/112 578/776/112
f 1003/700/112 967/784/112 968/785/112 1006/701/112
f 986/786/112 1010/699/112 1007/702/112 985/787/112
f 923/704/112 805/756/112 806/758/112 926/705/112
f 894/788/112 929/789/112 893/790/112
f 928/791/112 929/789/112 894/788/112
f 932/703/112 929/789/112 928/791/112
f 933/706/112 929/789/112 932/703/112
usemtl TLITE65
f 642/537/112 638/538/112 641/539/112 644/540/112
f 650/541/112 646/543/112 649/544/112 652/545/112
f 618/520/112 619/521/112 621/792/112 624/793/112
f 624/793/112 621/792/112 627/794/112 630/795/112
f 630/795/112 627/794/112 633/796/112 636/797/112
f 871/764/112 886/772/112 877/798/112 892/799/112
f 1000/800/113 970/801/113 1072/802/113
f 997/803/112 970/801/112 1000/800/112
f 978/804/112 1001/805/112 1072/802/112
f 981/806/112 1001/805/112 978/804/112
f 970/801/112 981/806/112 975/807/112
f 996/808/112 970/801/112 997/803/112
f 981/806/112 996/808/112 1001/805/112
f 996/808/112 981/806/112 970/801/112
usemtl FLAT14
f 622/521/111 623/520/111 625/793/111 620/792/111
f 335/570/111 129/569/111 140/566/111
f 333/738/111 335/570/111 140/566/111
f 654/739/111 655/740/111 333/738/111
f 337/741/111 654/739/111 333/738/111
f 140/566/111 340/567/111 337/741/111
f 337/741/111 333/738/111 140/566/111
f 343/742/111 346/744/111 348/743/111
f 341/740/111 343/742/111 348/743/111
f 349/739/111 354/746/111 356/745/111
f 352/747/111 349/739/111 356/745/111
f 351/748/111 344/749/111 341/740/111
f 349/739/111 351/748/111 341/740/111
f 628/792/111 629/793/111 631/795/111 626/794/111
f 634/794/111 637/795/111 635/797/111 632/796/111
usemtl FLAT18
f 548/670/111 551/672/111 556/671/111
f 593/516/111 548/670/111 556/671/111
f 544/673/111 547/674/111 591/529/111
f 555/675/111 544/673/111 591/529/111
f 593/516/111 556/671/111 555/675/111
f 591/529/111 593/516/111 555/675/111
f 567/677/111 568/676/111 269/506/111 564/678/111
usemtl TLITE64
f 119/555/112 120/554/112 124/557/112 121/556/112
usemtl FLOOR72
f 759/587/112 696/589/112 687/588/112
f 687/588/112 747/591/112 755/590/112
f 689/592/112 747/591/112 687/588/112
f 706/593/112 689/592/112 691/594/112
f 1073/595/112 706/593/112 708/596/112
f 698/597/112 1074/599/112 699/598/112
f 693/600/112 698/597/112 694/601/112
f 743/602/112 693/600/112 1075/603/112
f 1075/603/112 731/605/112 739/604/112
f 696/589/112 731/605/112 1075/603/112
f 689/592/112 748/606/112 747/591/112
f 743/602/112 698/597/112 693/600/112
f 706/593/112 748/606/112 689/592/112
f 732/607/112 698/597/112 743/602/112
f 706/593/112 759/587/112 748/606/112
f 732/607/112 1074/599/112 698/597/112
f 1073/595/112 759/587/112 706/593/112
f 696/589/112 1074/599/112 732/607/112
f 1073/595/112 696/589/112 759/587/112
f 696/589/112 1073/595/112 1074/599/112
f 1076/608/112 1074/599/112 1073/595/112 1077/609/112
f 1078/610/112 1076/608/112 1077/609/112 1079/611/112
f 1080/612/112 1078/610/112 1079/611/112 1081/613/112
f 1082/614/112 1080/612/112 1081/613/112 1083/615/112
f 1084/616/112 1082/614/112 1083/615/112 1085/617/112
f 1086/618/112 492/620/112 1087/619/112
f 1088/621/112 492/620/112 1086/618/112
f 1087/619/112 1089/622/112 1086/618/112
f 493/623/112 1089/622/112 1087/619/112
f 203/624/112 1089/622/112 493/623/112
f 207/625/112 203/624/112 202/626/112
f 492/620/112 207/625/112 206/627/112
f 1088/621/112 207/625/112 492/620/112
f 1090/628/112 207/625/112 1088/621/112
f 203/624/112 1091/629/112 1089/622/112
f 1092/630/112 207/625/112 1090/628/112
f 203/624/112 1093/631/112 1091/629/112
f 1094/632/112 207/625/112 1092/630/112
f 203/624/112 1094/632/112 1093/631/112
f 1094/632/112 203/624/112 207/625/112
f 1093/631/112 1089/622/112 1091/629/112
f 1094/632/112 1089/622/112 1093/631/112
f 1092/630/112 1089/622/112 1094/632/112
f 1090/628/112 1089/622/112 1092/630/112
f 1088/621/112 1089/622/112 1090/628/112
f 1086/618/112 1089/622/112 1088/621/112
f 496/633/112 707/596/112 497/593/112
f 711/623/112 707/596/112 496/633/112
f 712/620/112 707/596/112 711/623/112
f 501/634/112 707/596/112 712/620/112
f 500/597/112 707/596/112 501/634/112
f 700/598/112 707/596/112 500/597/112
f 699/598/112 1084/616/112 1085/617/112 708/596/112
usemtl STEP2
f 757/590/111 761/587/111 752/606/111 751/591/111
f 741/604/111 744/602/111 736/607/111 735/605/111
usemtl TLITE61
f 758/587/112 754/590/112 746/591/112 749/606/112
f 742/602/112 738/604/112 730/605/112 733/607/112
usemtl FLOOR11
f 764/631/111 763/629/111 767/622/111
f 777/632/111 764/631/111 767/622/111
f 775/630/111 777/632/111 767/622/111
f 773/628/111 775/630/111 767/622/111
f 771/621/111 773/628/111 767/622/111
f 769/618/111 771/621/111 767/622/111
usemtl FLOOR52
f 781/750/111 782/751/111 785/465/111
f 382/637/111 504/753/111 778/752/111
f 379/638/111 382/637/111 778/752/111
f 505/754/111 379/638/111 778/752/111
f 786/755/111 505/754/111 778/752/111
f 781/750/114 785/465/114 786/755/114
f 786/755/111 778/752/111 781/750/111
f 804/756/111 795/758/111 798/757/111
f 794/759/111 804/756/111 798/757/111
f 939/450/111 792/449/111 794/759/111
f 798/757/111 939/450/111 794/759/111
f 798/757/111 835/451/111 947/454/111
f 939/450/111 798/757/111 947/454/111
f 949/462/111 939/450/111 947/454/111
f 786/755/111 785/465/111 953/464/111
f 832/760/111 786/755/111 953/464/111
f 941/456/111 834/458/111 832/760/111
f 949/462/111 947/454/111 945/455/111
f 941/456/111 832/760/111 953/464/111
f 944/457/111 941/456/111 953/464/111
f 949/462/111 945/455/111 944/457/111
f 951/463/114 949/462/114 944/457/114
f 944/457/111 953/464/111 951/463/111
f 885/772/111 872/764/111 891/799/111 878/798/111
f 905/761/111 908/763/111 920/762/111
f 872/764/111 905/761/111 920/762/111
f 913/765/111 872/764/111 920/762/111
f 879/766/111 890/768/111 915/767/111
f 909/769/111 879/766/111 915/767/111
f 904/770/111 885/772/111 911/771/111
f 901/773/111 904/770/111 911/771/111
f 919/774/111 901/773/111 911/771/111
f 913/765/111 920/762/111 919/774/111
f 915/767/111 913/765/111 919/774/111
f 909/769/111 915/767/111 919/774/111
f 911/771/111 909/769/111 919/774/111
f 1095/775/111 1096/777/111 579/776/111
f 1097/778/111 1095/775/111 579/776/111
f 576/779/111 1096/777/111 1098/780/111
f 583/781/111 576/779/111 1098/780/111
f 579/776/111 580/782/111 583/781/111
f 1099/783/111 1097/778/111 579/776/111
f 583/781/111 1098/780/111 1099/783/111
f 1099/783/111 579/776/111 583/781/111
f 1099/783/111 1098/780/111 1095/775/111 1097/778/111
f 966/784/111 1004/700/111 1005/701/111 963/785/111
f 1004/700/111 1009/699/111 1008/702/111 1005/701/111
f 1100/800/114 1101/802/114 969/801/114
f 1102/803/111 1100/800/111 969/801/111
f 977/804/111 1101/802/111 1103/805/111
f 982/806/111 977/804/111 1103/805/111
f 969/801/111 976/807/111 982/806/111
f 1104/808/111 1102/803/111 969/801/111
f 982/806/111 1103/805/111 1104/808/111
f 1104/808/111 969/801/111 982/806/111
f 1104/808/111 1103/805/111 1100/800/111 1102/803/111
f 1009/699/111 973/786/111 972/787/111 1008/702/111
f 427/731/111 426/730/111 434/688/111 431/685/111
f 804/756/111 924/704/111 925/705/111 795/758/111
f 800/686/111 431/685/111 434/688/111 801/687/111
f 873/788/111 884/790/111 930/789/111
f 927/791/111 873/788/111 930/789/111
f 931/703/111 927/791/111 930/789/111
f 934/706/111 931/703/111 930/789/111
f 924/704/111 931/703/111 934/706/111 925/705/111
usemtl FLOOR62
f 827/639/112 538/641/112 823/640/112
f 826/642/112 538/641/112 827/639/112
f 512/452/112 826/642/112 513/643/112
f 509/644/112 826/642/112 512/452/112
f 508/645/112 826/642/112 509/644/112
f 829/646/112 826/642/112 508/645/112
f 538/641/112 826/642/112 829/646/112
f 841/647/112 855/649/112 843/648/112
f 840/650/112 855/649/112 841/647/112
f 846/651/112 840/650/112 847/652/112
f 852/653/112 846/651/112 850/654/112
f 854/655/112 846/651/112 852/653/112
f 520/459/112 866/657/112 521/656/112
f 516/658/112 520/459/112 517/458/112
f 863/659/112 516/658/112 867/660/112
f 857/661/112 863/659/112 859/662/112
f 846/651/112 855/649/112 840/650/112
f 516/658/112 866/657/112 520/459/112
f 846/651/112 857/661/112 855/649/112
f 854/655/112 857/661/112 846/651/112
f 863/659/113 866/657/113 516/658/113
f 854/655/112 863/659/112 857/661/112
f 863/659/112 862/663/112 866/657/112
f 862/663/112 863/659/112 854/655/112
f 539/641/112 536/669/112 847/652/112 840/650/112
usemtl FLAT23
f 994/780/112 987/783/112 990/778/112 991/775/112
f 1002/805/112 995/808/112 998/803/112 999/800/112
usemtl TLITE66
f 436/709/112 435/713/112 439/733/112 438/732/112
f 936/667/112 531/639/112 528/640/112 937/668/112
`
const mapModule = {}
{
	mapModule.link = env => {
		const signal = env.require("signal")
		const vector = env.require("vector")
		const maps = []
		mapModule.change = signal.make()
		mapModule.register = (name, code) => {
			maps[name] = code
		}
		mapModule.switch = name => {
		}
		mapModule.getGeometry = name => {
		}
		mapModule.change
		mapModule.startPoints = _ => {
			return [vector.make(-1969, 8, -3292)]
		}
		mapModule.register("e1m1", e1m1Src)
	}
}
const mathPipelineModule = {};
{
	const operatorMap = {
		"+": "add",
		"*": "mul",
		".": "dot",
		"^": "cross"
	};

	// Function to parse and transform the AST manually
	const parseAndTransform = (expression) => {
		const tokenize = (expr) => {
			const tokens = [];
			let current = '';
			for (let char of expr) {
				if ('+*^.'.includes(char)) {
					if (current.trim()) tokens.push(current.trim());
					tokens.push(char);
					current = '';
				} else {
					current += char;
				}
			}
			if (current.trim()) tokens.push(current.trim());
			return tokens;
		};

		const tokens = tokenize(expression);
		let i = 0;
		const transformTokens = () => {
			let left = tokens[i++];
			while (i < tokens.length) {
				const operator = tokens[i++];
				const right = tokens[i++];
				const method = operatorMap[operator];
				if (!method) throw new Error(`Unsupported operator: ${operator}`);
				left = `${left}.${method}(${right})`;
			}
			return left;
		};
		return transformTokens();
	};

	const transformFunction = (func) => {
		const funcString = func.toString();
		const bodyMatch = funcString.match(/=>\s*{([\s\S]*)}/);
		if (!bodyMatch) throw new Error("Invalid function format");
		let originalBody = bodyMatch[1].trim();

		if (originalBody.startsWith("return")) {
			originalBody = originalBody.replace(/^return\s+/, "");
			if (originalBody.endsWith(";")) {
				originalBody = originalBody.slice(0, -1);
			}
		}

		const transformedBody = parseAndTransform(originalBody);
		const transformedFunc = new Function("a", "b", `return ${transformedBody};`);
		return transformedFunc;
	};

	const sourceFunction = (a, b) => {
		return a . b + a ^ b + a * b + a + b;
	}

	const transformedFunc = transformFunction(sourceFunction.toString());
	console.log(transformedFunc.toString())

	const a = {
		dot: (other) => {
			console.log("Called dot");
			return 100;
		},
		cross: (other) => {
			console.log("Called cross");
			return 200;
		},
		add: (other) => {
			console.log("Called add");
			return 5 + other;
		},
		mul: (other) => {
			console.log("Called mul");
			return 5 * other;
		},
		value: 5
	};

	const b = 3;

	// const transformedResult = transformedFunc(a, b);

	// console.log("Transformed Function Result:", transformedResult);
}

const matrixModule = {}
{
	// TODO: Make something which moves declarations as far up as possible with respect to dependency constraints.
	matrixModule.link = env => {
		const make = (xx, yx, zx, wx, xy, yy, zy, wy, xz, yz, zz, wz, xw, yw, zw, ww) => {
			const m4 = {}
			m4.type = "matrix"
			m4.copy = _ => {
				return make(xx, yx, zx, wx, xy, yy, zy, wy, xz, yz, zz, wz, xw, yw, zw, ww)
			}
			m4.dump = _ => {
				return [
					xx, yx, zx, wx,
					xy, yy, zy, wy,
					xz, yz, zz, wz,
					xw, yw, zw, ww
				]
			}
			m4.tdump = _ => {
				return [
					xx, xy, xz, xw,
					yx, yy, yz, yw,
					zx, zy, zz, zw,
					wx, wy, wz, ww
				]
			}
			return m4
		}
		matrixModule.pers = (n, f, fov) => {
			const t = tan(0.5*fov)
			return make(
				innerHeight/innerWidth/t, 0, 0, 0,
				0, 1/t, 0, 0,
				0, 0, (n + f)/(n - f), 2*n*f/(n - f),
				0, 0, -1, 0
			)
		}
		matrixModule.make = make
	}
}
const playerModule = {}
{
	playerModule.link = env => {
		const map = env.require("map")
		const camera = env.require("camera")
		const vector = env.require("vector")
		const input = env.require("input")
		playerModule.spawn = _ => {
			const startPoints = map.startPoints()
			camera.locate(startPoints[0])
		}
		let controlStuff
		playerModule.control = _ => {
			controlStuff = input.move.join(event => {
				camera.r().qmul(vector.fromAxisAngle(-2/innerHeight*event.movementY, -2/innerHeight*event.movementX, 0))
			})
		}
		playerModule.release = _ => {
			input.move.releaseAll()
			controlStuff.release()
		}
		playerModule.update = dt => {
			applyInput()
			a.add(g.copy().scale(dt))
			v.add(a.copy().scale(dt))
			const horizontalVelocity = vector.make(v.x(), v.y(), 0)
			if (horizontalVelocity.length() > MAX_SPEED) {
				horizontalVelocity.norm().scale(MAX_SPEED)
				v.set(horizontalVelocity.x(), horizontalVelocity.y(), v.z())
			}
			a.set(0, 0, 0)
			const dp = v.copy().scale(dt)
			const origin = p.copy()
			const length = dp.length()
			if (length > 1e-9) {
				const dir = dp.copy().norm()
				const hit = geometry.raycast(origin, dir, length, "feet")
				if (hit) {
					const distToHit = origin.distance(hit.p())
					if (distToHit < length) {
						const safeDist = Math.max(distToHit - 0.1, 0)
						dp.set(dir.copy().scale(safeDist))
						const normal = hit.n()
						if (normal) {
							v.project(normal)
						}
					}
				}
			}
			p.add(dp)
			v.scale(DAMPING)
			camera.locate(p.copy().add(vector.make(0, 0, 30)))
		}
	}
}
const signalModule = {}
{
	signalModule.make = _ => {
		const signal = {}
		const events = []
		signal.join = func => {
			const conn = {}
			events.push(func)
			conn.release = _ => {
				events.splice(events.indexOf(func), 1)
			}
			return conn
		}
		signal.fire = values => {
			let i = 0
			while (i < events.length) {
				events[i](values)
				++i
			}
		}
		signal.releaseAll = _ => {
			let i = events.length
			while (--i > 0) {
				events[i].release()
			}
		}
		signal.remove = _ => {
			signal.join = undefined
			signal.fire = undefined
			signal.releaseAll = undefined
			signal.remove = undefined
			signal = undefined
			events = undefined
		}
		return signal
	}
}
const tellerModule = {}
{
	tellerModule.link = env => {
		const thread = env.require("thread")
		let count = 0

		tellerModule.read = text => {
			const container = document.createElement("div")
			container.style = `
				position: fixed;
				bottom: ${15 + 10 * count}vh;
				width: 100%;
				text-align: center;
				pointer-events: none;
				z-index: 1;
			`

			const label = document.createElement("span")
			label.textContent = text
			label.style = `
				display: inline-block;
				background: black;
				color: white;
				font-size: 2.5vh;
				white-space: nowrap;
				overflow: hidden;
				max-width: 0;
				opacity: 1;
			`

			container.appendChild(label)
			document.body.appendChild(container)
			++count

			const cps = 30
			const duration = text.length / cps

			const letsTell = thread.make(_ => {
				const t = thread.now()
				const e = t - letsTell.t

				if (e < duration) {
					label.style.maxWidth = (label.scrollWidth * (e / duration)) + "px"
				} else if (e < duration + 1) {
					label.style.maxWidth = label.scrollWidth + "px"
					label.style.opacity = (1 - (e - duration)).toFixed(2)
				} else {
					container.remove()
					--count
					letsTell.remove()
				}
			})
		}
	}
}


// Maybe this would be better called threadModule or something of that nature.
const threadModule = {}
{
	threadModule.link = env => {
		let t = 0
		let o = 0
		const threads = []
		// const queue = []
		threadModule.timeout = (func, t) => {
			return threadModule.make(func, t)
		}
		threadModule.interval = _ => {}
		threadModule.make = (func, t1) => {
			const thread = {}
			thread.func = func
			thread.t = t1 || t
			thread.remove = _ => {
				threads.splice(threads.indexOf(thread), 1)
				// queue.splice(queue.indexOf(thread), 1)
			}
			thread.timeout = delay => {
				thread.t += delay
				threads.sort((a, b) => a.t - b.t) // We will do this inneficiently for now.
			}
			threads.push(thread)
			threads.sort((a, b) => a.t - b.t) // We will do this inneficiently for now.
			return thread
		}
		// threadModule.update = t1 => {
		// 	if (t < t1) {
		// 		let i = 0
		// 		while (i < threads.length) {
		// 			const thread = threads[i]
		// 			const ft = thread.func() || dt
		// 			if (ft === undefined) {
		// 			}
		// 			else {
		// 				thread.t += ft
		// 				t += ft
		// 			}
		// 			++i
		// 		}
		// 		// Move time from the post-stack events to current time.
		// 	}
		// }
		threadModule.update = t1 => {
			let i = 0
			while (true) {
				const thread = threads[i]
				if (thread) {
					if (thread.t < t1) {
						thread.func()
						// thread.remove()
					}
					// const t0 = thread.t
					// while (thread.t < t1) {
					// 	thread.func()
					// 	const tafter = thread.t
					// 	if (tafter === t0) {
					// 		break
					// 	}
					// }
				}
				else {
					break
				}
				++i
			}
			t = t1
		}
		threadModule.now = _ => {
			return t
		}
		threadModule.tick = _ => {
			const t0 = t
			threadModule.update(0.001*performance.now())
			return [t, t - t0]
		}
	}
}
const triggerModule = {}
{
	triggerModule.link = env => {
		const graphics = env.require("graphics")
		// Storage for triggers.
		const triggers = []
		// Create a trigger with a position, size, orientation (optional), and an activation function.
		//
		// Parameters:
		//   p: Position vector representing the trigger’s center (e.g. {x: 0, y: 0, z: 0}).
		//   s: Size object containing width, height, and depth (e.g. {width: 10, height: 5, depth: 3}).
		//   func: The function to call when the trigger is activated.
		//   quat (optional): The orientation of the trigger represented by a unit quaternion
		//                    (default is no rotation: {x:0, y:0, z:0, w:1}).
		//
		// In this design, the trigger’s “local box” is axis-aligned with the center at (0,0,0)
		// and extents of half of the provided size.
		triggerModule.make = (p, r, s, func) => {
			const triggerObj = {
				// Store the center position.
				x: p.x(),
				y: p.y(),
				z: p.z(),
				// The full size is stored; the local box runs from -width/2 to width/2, etc.
				w: s.width,
				h: s.height,
				d: s.depth,
				// Orientation stored as a quaternion.
				r: r,
				// Activation function.
				func: func,
				// Provide a remove method.
				remove: () => {
					const idx = triggers.indexOf(triggerObj)
					if (idx !== -1) {
						triggers.splice(idx, 1)
					}
				}
			}
			triggers.push(triggerObj)
			// graphics.drawDebugBox(p, s, r)
			return triggerObj
		}
		// Ray-box intersection for oriented boxes.
		// The function expects:
		//   p: The ray origin (world coordinates)
		//   d: The ray direction (world coordinates)
		//
		// For each trigger we bring the ray into the trigger’s local space where the box is axis-aligned,
		// then we use the standard slab method.
		triggerModule.shoot = (p, d) => {
			for (let i = 0, len = triggers.length; i < len; i++) {
				const t = triggers[i]
				// Step 1. Transform the ray into the trigger's local space.
				// Compute the ray’s origin relative to the trigger’s center.
				const relOrigin = {
					x: p.x - t.x,
					y: p.y - t.y,
					z: p.z - t.z
				}
				// To “undo” the trigger’s rotation, we rotate the ray by the inverse rotation.
				// For unit quaternions, the inverse is the conjugate.
				// Extract the quaternion components using .dump(), which returns [x, y, z, w]
				const [qx, qy, qz, qw] = t.r.dump()
				// The conjugate/inverse is then:
				const iqx = -qx, iqy = -qy, iqz = -qz, iqw = qw
				// --- Helper inline function (expanded inline) ---
				// Instead of using external class functions, we manually rotate a vector v (an object {x,y,z})
				// by the quaternion given by (iqx, iqy, iqz, iqw):
				//   t = 2*(iqVector × v)
				//   v' = v + iqw*t + (iqVector × t)
				//
				// We'll do this once for relOrigin and again for the ray direction d.
				// Rotation for a generic vector v:
				// (We inline the math; in production code you might extract this to a helper.)
				const rotateByInvQuat = (v) => {
					const vx = v.x, vy = v.y, vz = v.z
					// Compute cross product: iqVector × v:
					const cross1X = iqy * vz - iqz * vy
					const cross1Y = iqz * vx - iqx * vz
					const cross1Z = iqx * vy - iqy * vx
					// Multiply by 2:
					const tx = 2 * cross1X
					const ty = 2 * cross1Y
					const tz = 2 * cross1Z
					// Compute second cross product: iqVector × t:
					const cross2X = iqy * tz - iqz * ty
					const cross2Y = iqz * tx - iqx * tz
					const cross2Z = iqx * ty - iqy * tx
					return {
						x: vx + iqw * tx + cross2X,
						y: vy + iqw * ty + cross2Y,
						z: vz + iqw * tz + cross2Z
					}
				}
				// Rotate the relative origin and the ray direction.
				const localOrigin = rotateByInvQuat(relOrigin)
				const localDir    = rotateByInvQuat(d)
				// Step 2. Define the AABB bounds in local space.
				// The box is centered at (0,0,0) and extends half-size in every direction.
				const halfW = t.w / 2
				const halfH = t.h / 2
				const halfD = t.d / 2
				const xmin = -halfW, xmax = halfW
				const ymin = -halfH, ymax = halfH
				const zmin = -halfD, zmax = halfD
				// Step 3. Compute intersections with each slab.
				// Precompute inverse components of the ray direction.
				const invx = 1 / localDir.x,
							invy = 1 / localDir.y,
							invz = 1 / localDir.z
				// X slab.
				let tx1 = (xmin - localOrigin.x) * invx,
						tx2 = (xmax - localOrigin.x) * invx
				let tminx = Math.min(tx1, tx2),
						tmaxx = Math.max(tx1, tx2)
				// Y slab.
				let ty1 = (ymin - localOrigin.y) * invy,
						ty2 = (ymax - localOrigin.y) * invy
				let tminy = Math.min(ty1, ty2),
						tmaxy = Math.max(ty1, ty2)
				// Z slab.
				let tz1 = (zmin - localOrigin.z) * invz,
						tz2 = (zmax - localOrigin.z) * invz
				let tminz = Math.min(tz1, tz2),
						tmaxz = Math.max(tz1, tz2)
				// Determine the overall intersection intervals.
				const tmin = Math.max(tminx, tminy, tminz)
				const tmax = Math.min(tmaxx, tmaxy, tmaxz)
				// Step 4. If there is an intersection in front of the ray, activate the trigger.
				if (tmax >= (tmin < 0 ? 0 : tmin)) {
					t.func()
				}
			}
		}
	}
}
const interpModule = {}
{
	interpModule.make = (targs, style) => {
		const interp = {}
		const l = targs.length
		interp.sample = t => {
			const i = floor(t*targs.length)
			const v0 = vector.make(...targs[(i + 0)%l])
			const v1 = vector.make(...targs[(i + 1)%l])
			if (style === "quat") {
				// return v0.slerp(v1, x)
				return v0
			}
			return v0
		}
		return interp
	}
}
const vectorModule = {}
{
	vectorModule.link = env => {
		const make = (x, y, z, w) => {
			if (w === undefined) {
				w = 1
			}
			const v4 = {}
			v4.type = "vector"
			v4.copy = _ => {
				return make(x, y, z, w)
			}
			v4.set = (x1, y1, z1, w1) => {
				const v = x1
				if (v.dump === undefined) {
					x = x1
					y = y1
					z = z1
					w = w1
				}
				else {
					[x1, y1, z1, w1] = v.dump()
					x = x1
					y = y1
					z = z1
					w = w1
				}
			}
			v4.dump = _ => {
				return [x, y, z, w]
			}
			v4.length = _ => {
				return sqrt(x*x + y*y + z*z + w*w)
			}
			v4.dot = b => {
				const [bx, by, bz, bw] = b.dump()
				return x*bx + y*by + z*bz + w*bw
			}
			v4.conj = _ => {
				x = -x
				y = -y
				z = -z
				return v4
			}
			v4.x = _ => {
				return x
			}
			v4.y = _ => {
				return y
			}
			v4.z = _ => {
				return z
			}
			v4.norm = _ => {
				const l = sqrt(x*x + y*y + z*z)
				x /= l
				y /= l
				z /= l
				return v4
			}
			v4.ddump = _ => {
				return [hyp*x, hyp*y, hyp*z, hyp*w]
			}
			v4.distance = b => {
				const [bx, by, bz, bw] = b.dump()
				const dx = bx - x
				const dy = by - y
				const dz = bz - z
				return sqrt(dx*dx + dy*dy + dz*dz)
			}
			v4.crossImaginary = b => {
				const [bx, by, bz, bw] = b.dump()
				return vectorModule.make(y*bz - z*by, z*bx - x*bz, x*by - y*bx)
			}
			v4.qmul = b => {
				const [bx, by, bz, bw] = b.dump()
				const x1 = w*bx + x*bw + y*bz - z*by
				const y1 = w*by - x*bz + y*bw + z*bx
				const z1 = w*bz + x*by - y*bx + z*bw
				const w1 = w*bw - x*bx - y*by - z*bz
				x = x1
				y = y1
				z = z1
				w = w1
				return v4
			}
			v4.exp = n => {
				const l = sqrt(x*x + y*y + z*z)
				if (l > 0) {
					const t = n*atan2(l, w)
					const s = sin(t)/l
					x *= s
					y *= s
					z *= s
					w = cos(t)
				}
				return v4
			}
			v4.negate = _ => {
				x = -x
				y = -y
				z = -z
				w = -w
				return v4
			}
			v4.project = b => {
				const d = v4.dot(b)
				v4.sub(b.copy().scale(d))
				return v4
			}
			v4.slerp = (b, n) => {
				let [ax, ay, az, aw] = v4.dump()
				let [bx, by, bz, bw] = b.dump()
				if (ax*bx + ay*by + az*bz + aw*bw < 0) {
					ax = -ax
					ay = -ay
					az = -az
					aw = -aw
				}
				const x0 = aw*bx - ax*bw + ay*bz - az*by
				const y0 = aw*by - ax*bz - ay*bw + az*bx
				const z0 = aw*bz + ax*by - ay*bx - az*bw
				const w0 = aw*bw + ax*bx + ay*by + az*bz
				const l = sqrt(x0*x0 + y0*y0 + z0*z0)
				if (l > 0) {
					const t = n*atan2(l, w0)
					const s = sin(t)/l
					bx = s*x0
					by = s*y0
					bz = s*z0
					bw = cos(t)
					x = aw*bx + ax*bw - ay*bz + az*by
					y = aw*by + ax*bz + ay*bw - az*bx
					z = aw*bz - ax*by + ay*bx + az*bw
					w = aw*bw - ax*bx - ay*by - az*bz
				}
				return v4
			}
			v4.add = b => {
				const [bx, by, bz, bw] = b.dump()
				x += bx
				y += by
				z += bz
				w += bw
				return v4
			}
			v4.sub = b => {
				const [bx, by, bz, bw] = b.dump()
				x -= bx
				y -= by
				z -= bz
				w -= bw
				return v4
			}
			v4.scale = r => {
				x *= r
				y *= r
				z *= r
				w *= r
				return v4
			}
			return v4
		}
		vectorModule.rotX = t => {
			return make(sin(0.5*t), 0, 0, cos(0.5*t))
		}
		vectorModule.rotY = t => {
			return make(0, sin(0.5*t), 0, cos(0.5*t))
		}
		vectorModule.rotZ = t => {
			return make(0, 0, sin(0.5*t), cos(0.5*t))
		}
		vectorModule.rotYxzFromQuat = q => {
			const [x, y, z, w] = q.dump()
			const rx = asin(2*(w*x - y*z))
			const ry = atan2(2*(x*z + w*y), 1 - 2*(x*x + y*y))
			const rz = atan2(2*(x*y + w*z), 1 - 2*(x*x + z*z))
			return [rx, ry, rz]
		}
		/*
		vectorModule.quatFromRotYx = q => {
			const [x, y, z, w] = q.dump()
			const d = w*w + x*x + y*y + z*z
			const [xx, yx, zx] = [(w*w + x*x - y*y - z*z)/d, 2*(x*y - w*z)/d, 2*(w*y + x*z)/d]
			const [xy, yy, zy] = [2*(x*y + w*z)/d, (w*w - x*x + y*y - z*z)/d, 2*(y*z - w*x)/d]
			const [xz, yz, zz] = [2*(x*z - w*y)/d, 2*(w*x + y*z)/d, (w*w - x*x - y*y + z*z)/d]
			const kc = xx*xx + xz*xz
			if (kc === 0) {
				return [0, atan2(zx, zz), 0]
			}
			return [atan2(xx*yz - xz*yx, xx*zz - xz*zx), atan2(-xz, xx)]
		}
		*/
		const look = b => {
			const [bx, by, bz, bw] = b.dump()
			hyp*(y*bz - z*by)
			hyp*(z*bx - x*bz)
			hyp*(x*by - y*bz)
			hyp
		}
		const axisAngle = v => {
			const [x, y, z] = v.dump()
			const l = sqrt(x*x + y*y + z*z)
			const s = sin(0.5*l)
			return [s*z/l, s*x/l, s*y/l, cos(0.5*l)]
		}
		vectorModule.rand = _ => {
			const l0 = log(1 - rand())
			const l1 = log(1 - rand())
			const a0 = tau*rand()
			const a1 = tau*rand()
			const m0 = sqrt(l0/(l0 + l1))
			const m1 = sqrt(l1/(l0 + l1))
			return make(
				m1*sin(a1),
				m0*sin(a0),
				m1*cos(a1),
				m0*cos(a0)
			)
		}
		const ident = make(0, 0, 0, 1)
		vectorModule.fromAxisAngle = (x, y, z) => {
			const l = sqrt(x*x + y*y + z*z)
			const s = sin(0.5*l)
			if (l > 0) {
				return make(s*x/l, s*y/l, s*z/l, cos(0.5*l))
			}
			else {
				return ident
			}
		}
		vectorModule.tweenLinearVelocity = (p, v0, v1, s, t) => {
			const vector = vectorModule.make
			const d = v1.copy().sub(v0)
			const u = d.copy().norm()
			const l = d.length() / s
			if (t < l) {
				const position = p.copy()
					.add(v0.copy().scale(t))
					.add(u.copy().scale(0.5 * s * t * t))
				const velocity = v0.copy().add(u.copy().scale(s * t))
				return [position, velocity]
			}
			else {
				const position = p.copy()
					.add(v0.copy().scale(l))
					.add(u.copy().scale(0.5 * s * l * l))
					.add(v1.copy().scale(t - l))
				const velocity = v1.copy()
				return [position, velocity]
			}
		}
		vectorModule.ident = ident
		vectorModule.make = make
	}
}
const abs = Math.abs
const acos = Math.acos
const asin = Math.asin
const atan2 = Math.atan2
const cos = Math.cos
const min = Math.min
const max = Math.max
const exp = Math.exp
const floor = Math.floor
const log = Math.log
const pow = Math.pow
const rand = Math.random
const sign = Math.sign
const sin = Math.sin
const sqrt = Math.sqrt
const tan = Math.tan
const int = parseInt
parseInt = undefined
const hyp = 1.41421356
const tau = 6.28318531
const pi = 3.1415927
{
	const symbols = {}
	const env = {}
	const require = name => {
		if (symbols[name] === undefined) {
			eval("symbols." + name + "=" + name + "Module")
			if (symbols[name].link) {
				symbols[name].link(env)
			}
		}
		return symbols[name]
	}
	env.require = require
	const boombox = require("boombox")
	const camera = require("camera")
	const graphics = require("graphics")
	const input = require("input")
	const teller = require("teller")
	const thread = require("thread")
	const player = require("player")
	const geometry = require("geometry")
	const vector = require("vector")
	const map = require("map")
	const harbingerDialogue = [
		"They always said the stars would guide us, didn’t they? Guide us... home. But they never said what would crawl out when they fell. No, no, no...",
		"Do you hear it? The *hunger*? It’s in the air now, thick as tar. It smells like... like ash and rot, doesn’t it? Sweet, almost. Like it wants you to breathe it in.",
		"They called it the end, but that’s such a kind word. This... this isn’t an ending—it’s a gnawing. A devouring. The world doesn’t stop; it’s being *eaten*.",
		"Did you see the sun today? Or was it the other one again? The one with too many eyes, blinking, watching? I told them to stop looking up... but they didn’t listen. No one listens anymore.",
		"They want to take it all, you know. Not just the earth, not just the oceans—they want your *thoughts*, your *dreams*. They’ll peel you apart from the inside, thread by thread. The sky... the sky will rip first. You’ll see.",
		"Or maybe you won’t. Maybe it’ll take you before it gets that far. Lucky, if it does.",
		"Do you know what it feels like to hear the earth scream? It’s not loud. It’s... wet. Like teeth chewing through raw meat.",
		"You’re still standing here? Hah! Brave, or stupid. But it won’t matter soon. Not for you. Not for anyone. It’s already inside, anyway. It always was."
	]
	map.change.join(name => {
		const geometry = map.getGeometry(name)
		geometry.change(geometry)
	})
	graphics.fade()
	player.spawn()
	player.control()
	graphics.fixCanvas()
	// graphics.drawDebugBox(camera.p().copy().add(vector.make(0, 0, -20)), vector.make(0, 0, 0, 1), vector.make(20, 20, 20))
	const story0 = camera.makeTrigger(camera.p().copy().add(vector.make(0, 0, -20)), vector.make(5, 5, 5), vector.make(0, 0, 0, 1), _ => {
		graphics.fade()
		teller.read(harbingerDialogue[0])
	})
	teller.read(harbingerDialogue[0])
	const update = _ => {
		const [t, dt] = thread.tick()
		const direction = input.intent()
		{
			const [rx, ry] = vector.rotYxzFromQuat(camera.r())
			const nearest = vector.ident.copy().qmul(vector.rotY(ry)).qmul(vector.rotX(rx))
			camera.r().slerp(nearest, 1 - exp(-8*dt))
		}
		camera.impulse(camera.r().copy().qmul(direction).qmul(camera.r().copy().conj()).scale(500*dt))
		camera.step(dt)
		// console.log(camera.p().dump())
		requestAnimationFrame(update)
	}
	requestAnimationFrame(update)
	/*
	network.receive("bullet").join((bullet)
		bullets.push(bullet)
	)
	const b1
	const mp0
	onmousedown = info => {
		b1 = true
		mp0 = [info.clientX, info.clientY]
	}
	onmouseup = info => {
		b1 = false
		const mp1 = [info.clientX, info.clientY]
		while (i) {
			network.send([
				"bullet",
				mp0,
				[
					0.01*(mp1[0] - mp0[0]) + rand() - 0.5,
					0.01*(mp1[1] - mp0[1]) + rand() - 0.5
				]
			])
			--i
		}
	}
	*/
}</script>